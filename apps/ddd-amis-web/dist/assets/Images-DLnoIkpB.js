import{a as q,ce as Y,R as h,f as Z,h as ee,c as g,o as d,bh as se,i as te,r as ae,U as re,cM as k,J as C,cN as ne,cO as T,cP as ie,cQ as le,cR as oe,K as pe,cS as ce,d as f,q as v,s as p,e as ge}from"./index-SNKBwPMT.js";var he=(function(b){q(o,b);function o(n){var e=b.call(this,n)||this;return e.containerRef=Y.createRef(),e.resizeObserver=null,e.isSwiping=!1,e.startX=0,e.list=[],e.gap=5,e.evenReg=/^even-[1-9]\d*-[1-9]\d*$/,e.wrapperRef=h.createRef(),e.generateHeight=function(t,s){var a=Number(e.props.height)||e.state.defaultHeight;if(t==="sm-ss-sss-m"||t==="sss-ss-ms-m"||t==="sms-ss-sms-m")return s===0?a:(a-e.gap)*.5;if(t==="sm-ss-sss-ss"||t==="ms-ss-sss-ss"||t==="sss-ss-sm-ss"||t==="mss-ss-ssm-ss"||t==="sss-ss-mm-ss")return(a-e.gap)*.5;if(e.evenReg.test(t||"")){var r=Number(t?.split("-")[1]),i=Number(t?.split("-")[2]);if(s<r*i)return(a-e.gap*(r-1))/r}return 0},e.generateWidth=function(t,s){var a=Number(e.props.width)||e.state.defaultWidth;if(t==="sm-ss-sss-m"||t==="sss-ss-ms-m")return s===0?(a-2*e.gap)/3:s===1?(a-2*e.gap)/3*2+e.gap:(a-2*e.gap)/3;if(t==="sms-ss-sms-m"){if([0,2,4].includes(s))return(a-2*e.gap)/4;if(s===1||s===3)return(a-2*e.gap)/2+e.gap}else{if(t==="sm-ss-sss-ss")return[0,2,3,4].includes(s)?(a-2*e.gap)/3:(a-2*e.gap)/3*2+e.gap;if(t==="ms-ss-sss-ss")return[1,2,3,4].includes(s)?(a-2*e.gap)/3:(a-2*e.gap)/3*2+e.gap;if(t==="sss-ss-sm-ss")return[0,1,2,4].includes(s)?(a-2*e.gap)/3:(a-2*e.gap)/3*2+e.gap;if(t==="mss-ss-ssm-ss")return[1,2,4,5].includes(s)?(a-2*e.gap)/4:(a-2*e.gap)/2+e.gap;if(t==="sss-ss-mm-ss")return[0,1,2].includes(s)?(a-e.gap*2)/3:(a-e.gap)/2;if(e.evenReg.test(t||"")){var r=Number(t?.split("-")[1]),i=Number(t?.split("-")[2]);if(s<r*i)return(a-e.gap*(i-1))/i}}return 0},e.generateTranslate=function(t,s){var a=Number(e.props.width)||e.state.defaultWidth,r=Number(e.props.height)||e.state.defaultHeight,i={position:"absolute",boxSizing:"content-box",height:e.generateHeight(t,s)+"px",width:e.generateWidth(t,s)+"px"};return t==="sm-ss-sss-m"?s===1?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat(0,"px)"):s===2?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat((r-e.gap)*.5+e.gap,"px)"):s===3&&(i.transform="translate(".concat((a-2*e.gap)/3*2+2*e.gap,"px,").concat((r-e.gap)*.5+e.gap,"px)")):t==="sss-ss-ms-m"?s===1?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat((r-e.gap)*.5+e.gap,"px)"):s===2?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat(0,"px)"):s===3&&(i.transform="translate(".concat((a-2*e.gap)/3*2+2*e.gap,"px,").concat(0,"px)")):t==="sms-ss-sms-m"?s===1?i.transform="translate(".concat((a-2*e.gap)/4+e.gap,"px,").concat(0,"px)"):s===2?i.transform="translate(".concat((a-2*e.gap)/4*3+3*e.gap,"px,").concat(0,"px)"):s===3?i.transform="translate(".concat((a-2*e.gap)/4+e.gap,"px,").concat((r-e.gap)/2+e.gap,"px)"):s===4&&(i.transform="translate(".concat((a-2*e.gap)/4*3+3*e.gap,"px,").concat((r-e.gap)/2+e.gap,"px)")):t==="sm-ss-sss-ss"?s===1?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat(0,"px)"):s===2?i.transform="translate(".concat(0,"px,").concat((r-e.gap)/2+e.gap,"px)"):s===3?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat((r-e.gap)/2+e.gap,"px)"):s===4&&(i.transform="translate(".concat((a-2*e.gap)/3*2+2*e.gap,"px,").concat((r-e.gap)/2+e.gap,"px)")):t==="ms-ss-sss-ss"?s===1?i.transform="translate(".concat((a-2*e.gap)/3*2+2*e.gap,"px,").concat(0,"px)"):s===2?i.transform="translate(".concat(0,"px,").concat((r-e.gap)/2+e.gap,"px)"):s===3?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat((r-e.gap)/2+e.gap,"px)"):s===4&&(i.transform="translate(".concat((a-2*e.gap)/3*2+2*e.gap,"px,").concat((r-e.gap)/2+e.gap,"px)")):t==="sss-ss-sm-ss"?s===1?i.transform="translate(".concat((a-2*e.gap)/3+e.gap,"px,").concat(0,"px)"):s===2?i.transform="translate(".concat((a-2*e.gap)/3*2+2*e.gap,"px,").concat(0,"px)"):s===3?i.transform="translate(".concat(0,"px,").concat((r-e.gap)/2+e.gap,"px)"):s===4&&(i.transform="translate(".concat((a-2*e.gap)/3*2+2*e.gap,"px,").concat((r-e.gap)/2+e.gap,"px")):t==="mss-ss-ssm-ss"?s===1||s===2?i.transform="translate(".concat(((a-2*e.gap)/4+e.gap)*(s+1),"px,").concat(0,"px)"):s===3?i.transform="translate(".concat(0,"px,").concat((r-e.gap)/2+e.gap,"px)"):(s===4||s===5)&&(i.transform="translate(".concat(((a-2*e.gap)/4+e.gap)*(s-2),"px,").concat((r-e.gap)/2+e.gap,"px)")):t==="sss-ss-mm-ss"?s===1||s===2?i.transform="translate(".concat(((a-2*e.gap)/3+e.gap)*s,"px,").concat(0,"px)"):(s===3||s===4)&&(i.transform="translate(".concat(((a-e.gap)/2+e.gap)*(s-3),"px,").concat((r-e.gap)/2+e.gap,"px)")):e.evenReg.test(t||"")&&(i.transform=e.generateEvenTranslate(t,s)),i},e.state={defaultWidth:200,defaultHeight:112.5,currentIndex:0,nextAnimation:""},e}return o.prototype.getFrameId=function(n){var e=this.state.currentIndex,t=this.list.length;switch(n){case"prev":return(e-1+t)%t;case"next":return(e+1)%t;default:return e}},o.prototype.transitFramesTowards=function(n,e){return Z(this,void 0,void 0,function(){var t;return ee(this,function(s){switch(t=this.state.currentIndex,n){case"left":t=this.getFrameId("next"),e="slideLeft";break;case"right":t=this.getFrameId("prev"),e="slideRight";break;default:return[2]}return this.setState({currentIndex:t,nextAnimation:e}),[2]})})},o.prototype.handleSwipe=function(n){var e=50;Math.abs(n)>e&&(n>0?this.transitFramesTowards("right","slideRight"):this.transitFramesTowards("left","slideLeft"))},o.prototype.handleTouchStart=function(n){this.props.displayMode==="full"&&(this.isSwiping=!0,this.startX=n.touches[0].clientX)},o.prototype.handleTouchEnd=function(n){if(this.isSwiping){var e=n.changedTouches[0].clientX-this.startX;this.handleSwipe(e),this.isSwiping=!1}},o.prototype.handleMouseDown=function(n){this.props.displayMode==="full"&&(n.preventDefault(),this.isSwiping=!0,this.startX=n.clientX,document.addEventListener("mouseup",this.handleMouseUp))},o.prototype.handleMouseUp=function(n){if(this.isSwiping){var e=n.clientX-this.startX;this.handleSwipe(e),this.isSwiping=!1,document.removeEventListener("mouseup",this.handleMouseUp)}},o.prototype.handleEnlarge=function(n){var e=this.props,t=e.onImageEnlarge,s=e.src,a=e.originalSrc;t&&t(g(g({},n),{originalSrc:n.originalSrc||n.src,list:this.list.map(function(r){return{src:s?d(s,r,"| raw"):r&&r.image||r,originalSrc:a?d(a,r,"| raw"):r?.src||d(s,r,"| raw")||r?.image||r,title:r&&(r.enlargeTitle||r.title),caption:r&&(r.enlargeCaption||r.description||r.caption)}})}),this.props)},o.prototype.generateEvenTranslate=function(n,e){var t="",s=Number(this.props.width)||this.state.defaultWidth,a=Number(this.props.height)||this.state.defaultHeight,r=Number(n?.split("-")[1]),i=Number(n?.split("-")[2]);if(e<r*i){var w=(s-(i-1)*this.gap)/i,I=(a-(r-1)*this.gap)/r,u=Math.floor(e/i),R=e%i,X=R*(w+this.gap),M=u*(I+this.gap);t="translate(".concat(X,"px,").concat(M,"px)")}return t},o.prototype.componentDidMount=function(){(!this.props.width||!this.props.height||String(this.props.width).includes("%")&&String(this.props.height).includes("%"))&&this.observeParentSize()},o.prototype.componentWillUnmount=function(){this.resizeObserver&&this.resizeObserver.disconnect()},o.prototype.observeParentSize=function(){var n=this,e;!((e=this.containerRef.current)===null||e===void 0)&&e.parentElement&&(this.resizeObserver=new ResizeObserver(function(t){var s,a;try{for(var r=se(t),i=r.next();!i.done;i=r.next()){var w=i.value;n.setState({defaultWidth:w.contentRect.width*parseFloat(n.props.width||"100")/100,defaultHeight:w.contentRect.height*parseFloat(n.props.height||"100")/100}),n.forceUpdate()}}catch(I){s={error:I}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}}),this.resizeObserver.observe(this.containerRef.current.parentElement))},o.prototype.render=function(){var n=this,e=this.props,t=e.className,s=e.style,a=e.defaultImage,r=e.thumbMode,i=e.thumbRatio,w=e.data;e.name;var I=e.placeholder,u=e.classnames,R=e.source,X=e.delimiter,M=e.enlargeAble,D=e.enlargeWithGallary,N=e.src,x=e.originalSrc,H=e.listClassName,z=e.options,P=e.showToolbar,U=e.toolbarActions,j=e.imageGallaryClassName;e.galleryControlClassName;var y=e.id,L=e.wrapperCustomStyle,J=e.env,S=e.themeCss,F=e.sortType;e.imagesControlClassName;var A=e.displayMode,K=e.fullThumbMode,Q=e.maskColor,$=this.state.currentIndex,_,c;return typeof R=="string"&&te(R)?c=ae(R,w,"| raw")||void 0:Array.isArray(_=re(this.props))||typeof _=="string"?c=_:Array.isArray(z)&&(c=z),typeof c=="string"?c=c.split(X):c&&!Array.isArray(c)&&(c=[c]),this.list=c,this.props.sortType==="sm-ss-sss-m"?this.list=c.slice(0,4):this.props.sortType==="sss-ss-ms-m"?this.list=c.slice(0,5):this.props.sortType==="sms-ss-sms-m"||this.props.sortType==="sm-ss-sss-ss"||this.props.sortType==="ms-ss-sss-ss"||this.props.sortType==="sss-ss-sm-ss"?this.list=c.slice(0,6):this.props.sortType==="mss-ss-ssm-ss"?this.list=c.slice(0,8):this.props.sortType==="sss-ss-mm-ss"&&(this.list=c.slice(0,6)),this.props.sortType?h.createElement("div",{ref:this.containerRef,className:F,style:{width:(this.props.width||this.state.defaultWidth)+"px",height:(this.props.height||this.state.defaultHeight)+"px"}},this.list.map(function(l,m){return h.createElement(k,{maskColor:Q,fontStyle:n.props.fontStyle,style:n.generateTranslate(F,m),width:n.generateWidth(F,m),height:n.generateHeight(F,m),hoverMode:n.props.hoverMode||"text-style-4",index:m,className:u("Images-item"),key:m,src:(N?d(N,l,"| raw"):l&&l.image)||l,originalSrc:(x?d(x,l,"| raw"):l&&l.src)||l,title:l&&l.title,sortType:n.props.sortType,caption:l&&(l.description||l.caption),thumbMode:r,thumbRatio:i,enlargeAble:M,enlargeWithGallary:D,onEnlarge:n.handleEnlarge,showToolbar:P,imageGallaryClassName:"".concat(j," ").concat(C(g(g({},n.props),{name:"imageGallaryClassName",id:y,themeCss:S}))," ").concat(C(g(g({},n.props),{name:"galleryControlClassName",id:y,themeCss:S}))),toolbarActions:U})})):h.createElement("div",{ref:this.wrapperRef,className:u("ImagesField",t,A==="full"?"ImagesField--full":"",C(g(g({},this.props),{name:"imagesControlClassName",id:y,themeCss:S})),C(g(g({},this.props),{name:"wrapperCustomStyle",id:y,themeCss:L}))),style:g(g({},s),A==="full"?{height:"auto"}:{}),onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onMouseDown:this.handleMouseDown},Array.isArray(c)?h.createElement("div",{className:u("Images",H)},A==="full"?h.createElement("div",{className:u("Images-container")},c.map(function(l,m){return h.createElement(ne,{key:m,in:m===$,timeout:300,mountOnEnter:!0,unmountOnExit:!0},function(V){var E,O,W;V===T&&((W=n.wrapperRef.current)===null||W===void 0||W.childNodes.forEach(function(G){return G.offsetHeight}));var B=(E={},E[T]={opacity:1,transform:"translateX(0)"},E[ie]={opacity:1,transform:"translateX(0)"},E[le]={opacity:0,transform:n.state.nextAnimation==="slideRight"?"translateX(100%)":"translateX(-100%)"},E[oe]={opacity:0,transform:n.state.nextAnimation==="slideRight"?"translateX(-100%)":"translateX(100%)"},E);return h.createElement("div",{className:u("Images-item"),style:g({position:"absolute",width:"100%",height:"100%",transition:"all 300ms ease-in-out"},B[V])},h.createElement("div",{className:u("Images-itemInner")},h.createElement("img",{className:u("Image-image",(O={},O["Image-image--".concat(K)]=A==="full",O)),src:(N?d(N,l,"| raw"):l&&l.image)||l,alt:l&&l.title,draggable:!1,onDragStart:function(G){return G.preventDefault()}}),h.createElement("div",{className:u("Images-itemIndex")},m+1,"/",c.length)))})})):c.map(function(l,m){return h.createElement(k,{hoverMode:n.props.hoverMode||"text-style-4",fontStyle:n.props.fontStyle,index:m,className:u("Images-item"),key:m,src:(N?d(N,l,"| raw"):l&&l.image)||l,originalSrc:(x?d(x,l,"| raw"):l&&l.src)||l,title:l&&l.title,caption:l&&(l.description||l.caption),thumbMode:r,thumbRatio:i,enlargeAble:M,enlargeWithGallary:D,onEnlarge:n.handleEnlarge,showToolbar:P,imageGallaryClassName:"".concat(j," ").concat(C(g(g({},n.props),{name:"imageGallaryClassName",id:y,themeCss:S}))," ").concat(C(g(g({},n.props),{name:"galleryControlClassName",id:y,themeCss:S}))),toolbarActions:U})})):a?h.createElement("div",{className:u("Images",H)},h.createElement(k,{hoverMode:this.props.hoverMode||"text-style-4",className:u("Images-item"),src:a,thumbMode:r,thumbRatio:i})):I,h.createElement(pe,g({},this.props,{config:{wrapperCustomStyle:L,id:y,themeCss:S,classNames:[{key:"imagesControlClassName"},{key:"galleryControlClassName"}]},env:J})))},o.defaultProps={className:"",delimiter:",",defaultImage:ce,placehoder:"-",thumbMode:"cover",thumbRatio:"1:1",displayMode:"thumb",fullThumbMode:"cover"},f([v,p("design:type",Function),p("design:paramtypes",[String]),p("design:returntype",void 0)],o.prototype,"getFrameId",null),f([v,p("design:type",Function),p("design:paramtypes",[String,String]),p("design:returntype",Promise)],o.prototype,"transitFramesTowards",null),f([v,p("design:type",Function),p("design:paramtypes",[Number]),p("design:returntype",void 0)],o.prototype,"handleSwipe",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleTouchStart",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleTouchEnd",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleMouseDown",null),f([v,p("design:type",Function),p("design:paramtypes",[MouseEvent]),p("design:returntype",void 0)],o.prototype,"handleMouseUp",null),f([v,p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],o.prototype,"handleEnlarge",null),o})(h.Component),me=(function(b){q(o,b);function o(){return b!==null&&b.apply(this,arguments)||this}return o=f([ge({type:"images"})],o),o})(he);export{he as ImagesField,me as ImagesFieldRenderer};
