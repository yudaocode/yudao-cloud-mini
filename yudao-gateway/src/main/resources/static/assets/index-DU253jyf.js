import{d as N,D as O,g as I,r as b,f as Q,C as V,G as A,U as R,aA as z,_ as E,X as L,o as s,c as D,k as t,w as i,Y as K,F as T,n as j,q as y,m,I as _,t as k,Z as B,L as G,J as H,K as J,z as X,N as Z,O as $,P as W,Q as ee,R as te}from"./index-BaY5TDP-.js";import{_ as ae}from"./index-avjYFQiD.js";import{_ as re}from"./DictTag-QtcI9ZjC.js";import{E as ie}from"./el-image-Bg-CwbDE.js";import{_ as le}from"./ContentWrap-DKQn7kZm.js";import{_ as oe}from"./index-BAz6Gqim.js";import{d as ne,f as se}from"./formatTime-Dr6TiYYc.js";import{a as me,b as pe,d as ue}from"./combinationActivity-BFjeGiax.js";import ce from"./CombinationActivityForm-CivXi0NJ.js";import{f as de}from"./formatter-DdccBgw4.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./Form-CB5RGX1K.js";import"./el-virtual-list-Cbbiio1P.js";import"./el-tree-select-DphqCDCz.js";import"./el-time-select-DuQV2otj.js";import"./InputPassword-liMgUpCC.js";import"./tsxHelper-B5zJ1wt3.js";import"./formRules-CMjZInfO.js";import"./useCrudSchemas-BQxlWSsn.js";import"./tree-z7HkrWVC.js";import"./SpuSelect-egfD7fzC.js";import"./index-DqlyDc99.js";import"./SkuList-LfTbtJ44.js";import"./category-B7jjsMOS.js";import"./spu-BVX48OKx.js";import"./SpuAndSkuList-BPESFKMK.js";const fe=E(N({name:"PromotionBargainActivity",__name:"index",setup(Y,{expose:r}){r();const u=O(),{t:e}=I(),g=b(!0),P=b(0),h=b([]),w=Q({pageNo:1,pageSize:10,name:null,status:null}),c=b(),p=async()=>{g.value=!0;try{const o=await me(w);h.value=o.list,P.value=o.total}finally{g.value=!1}},v=()=>{w.pageNo=1,p()},d=b();V(async()=>{await p()});const n={message:u,t:e,loading:g,total:P,list:h,queryParams:w,queryFormRef:c,getList:p,handleQuery:v,resetQuery:()=>{c.value.resetFields(),v()},formRef:d,openForm:(o,f)=>{d.value.open(o,f)},handleClose:async o=>{try{await u.confirm("\u786E\u8BA4\u5173\u95ED\u8BE5\u62FC\u56E2\u6D3B\u52A8\u5417\uFF1F"),await pe(o),u.success("\u5173\u95ED\u6210\u529F"),await p()}catch{}},handleDelete:async o=>{try{await u.delConfirm(),await ue(o),u.success(e("common.delSuccess")),await p()}catch{}},formatCombinationPrice:o=>{const f=Math.min(...o.map(l=>l.combinationPrice));return`\uFFE5${z(f)}`},get DICT_TYPE(){return A},get getIntDictOptions(){return R},get dateFormatter(){return ne},get formatDate(){return se},CombinationActivityForm:ce,get fenToYuanFormat(){return de}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),[["render",function(Y,r,u,e,g,P){const h=oe,w=B,c=G,p=H,v=J,d=X,n=Z,o=$,f=le,l=W,q=ie,F=re,S=ee,U=ae,C=L("hasPermi"),M=te;return s(),D(T,null,[t(h,{title:"\u3010\u8425\u9500\u3011\u62FC\u56E2\u6D3B\u52A8",url:"https://doc.iocoder.cn/mall/promotion-combination/"}),t(f,null,{default:i(()=>[t(o,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"68px"},{default:i(()=>[t(c,{label:"\u6D3B\u52A8\u540D\u79F0",prop:"name"},{default:i(()=>[t(w,{modelValue:e.queryParams.name,"onUpdate:modelValue":r[0]||(r[0]=a=>e.queryParams.name=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0",onKeyup:K(e.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),t(c,{label:"\u6D3B\u52A8\u72B6\u6001",prop:"status"},{default:i(()=>[t(v,{modelValue:e.queryParams.status,"onUpdate:modelValue":r[1]||(r[1]=a=>e.queryParams.status=a),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D3B\u52A8\u72B6\u6001"},{default:i(()=>[(s(!0),D(T,null,j(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),a=>(s(),y(p,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,null,{default:i(()=>[t(n,{onClick:e.handleQuery},{default:i(()=>[t(d,{class:"mr-5px",icon:"ep:search"}),r[5]||(r[5]=m(" \u641C\u7D22 "))]),_:1}),t(n,{onClick:e.resetQuery},{default:i(()=>[t(d,{class:"mr-5px",icon:"ep:refresh"}),r[6]||(r[6]=m(" \u91CD\u7F6E "))]),_:1}),_((s(),y(n,{plain:"",type:"primary",onClick:r[2]||(r[2]=a=>e.openForm("create"))},{default:i(()=>[t(d,{class:"mr-5px",icon:"ep:plus"}),r[7]||(r[7]=m(" \u65B0\u589E "))]),_:1})),[[C,["promotion:combination-activity:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(f,null,{default:i(()=>[_((s(),y(S,{data:e.list,"show-overflow-tooltip":!0,stripe:!0},{default:i(()=>[t(l,{label:"\u6D3B\u52A8\u7F16\u53F7","min-width":"80",prop:"id"}),t(l,{label:"\u6D3B\u52A8\u540D\u79F0","min-width":"140",prop:"name"}),t(l,{label:"\u6D3B\u52A8\u65F6\u95F4","min-width":"210"},{default:i(a=>[m(k(e.formatDate(a.row.startTime,"YYYY-MM-DD"))+" ~ "+k(e.formatDate(a.row.endTime,"YYYY-MM-DD")),1)]),_:1}),t(l,{label:"\u5546\u54C1\u56FE\u7247","min-width":"80",prop:"spuName"},{default:i(a=>[t(q,{"preview-src-list":[a.row.picUrl],src:a.row.picUrl,class:"h-40px w-40px","preview-teleported":""},null,8,["preview-src-list","src"])]),_:1}),t(l,{label:"\u5546\u54C1\u6807\u9898","min-width":"300",prop:"spuName"}),t(l,{formatter:e.fenToYuanFormat,label:"\u539F\u4EF7","min-width":"100",prop:"marketPrice"},null,8,["formatter"]),t(l,{label:"\u62FC\u56E2\u4EF7","min-width":"100",prop:"seckillPrice"},{default:i(a=>[m(k(e.formatCombinationPrice(a.row.products)),1)]),_:1}),t(l,{label:"\u5F00\u56E2\u7EC4\u6570","min-width":"100",prop:"groupCount"}),t(l,{label:"\u6210\u56E2\u7EC4\u6570","min-width":"100",prop:"groupSuccessCount"}),t(l,{label:"\u8D2D\u4E70\u6B21\u6570","min-width":"100",prop:"recordCount"}),t(l,{align:"center",label:"\u6D3B\u52A8\u72B6\u6001","min-width":"100",prop:"status"},{default:i(a=>[t(F,{type:e.DICT_TYPE.COMMON_STATUS,value:a.row.status},null,8,["type","value"])]),_:1}),t(l,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),t(l,{align:"center",fixed:"right",label:"\u64CD\u4F5C",width:"150px"},{default:i(a=>[_((s(),y(n,{link:"",type:"primary",onClick:x=>e.openForm("update",a.row.id)},{default:i(()=>r[8]||(r[8]=[m(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[C,["promotion:combination-activity:update"]]]),a.row.status===0?_((s(),y(n,{key:0,link:"",type:"danger",onClick:x=>e.handleClose(a.row.id)},{default:i(()=>r[9]||(r[9]=[m(" \u5173\u95ED ")])),_:2},1032,["onClick"])),[[C,["promotion:combination-activity:close"]]]):_((s(),y(n,{key:1,link:"",type:"danger",onClick:x=>e.handleDelete(a.row.id)},{default:i(()=>r[10]||(r[10]=[m(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[C,["promotion:combination-activity:delete"]]])]),_:1})]),_:1},8,["data"])),[[M,e.loading]]),t(U,{limit:e.queryParams.pageSize,"onUpdate:limit":r[3]||(r[3]=a=>e.queryParams.pageSize=a),page:e.queryParams.pageNo,"onUpdate:page":r[4]||(r[4]=a=>e.queryParams.pageNo=a),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),t(e.CombinationActivityForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/combination/activity/index.vue"]]);export{fe as default};
