import{d as A,g as M,D as w,r as s,f as E,G as F,U as O,d$ as S,_ as P,o as m,q as c,w as o,k as t,m as y,I as q,c as x,F as k,n as C,t as R,J as N,K,L as B,Z as Y,cf as j,ak as G,al as J,O as Z,N as $,R as z}from"./index-BaY5TDP-.js";import{_ as H}from"./Dialog-CZSXtzfQ.js";import{C as T}from"./index-Cz_ljQ_t.js";import{A as Q}from"./index-B3VhXi0r.js";import{C as h}from"./constants-CEEr2azc.js";const W=P(A({name:"ChatModelForm",__name:"ChatModelForm",emits:["success"],setup(L,{expose:l,emit:I}){const{t:a}=M(),v=w(),g=s(!1),n=s(""),d=s(!1),r=s(""),u=s({id:void 0,keyId:void 0,name:void 0,model:void 0,platform:void 0,sort:void 0,status:h.ENABLE,temperature:void 0,maxTokens:void 0,maxContexts:void 0}),i=E({keyId:[{required:!0,message:"API \u79D8\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6A21\u578B\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],model:[{required:!0,message:"\u6A21\u578B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],platform:[{required:!0,message:"\u6240\u5C5E\u5E73\u53F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),p=s(),b=s([]),V=async(e,U)=>{if(g.value=!0,n.value=a("action."+e),r.value=e,_(),U){d.value=!0;try{u.value=await T.getChatModel(U)}finally{d.value=!1}}b.value=await Q.getApiKeySimpleList(h.ENABLE)};l({open:V});const f=I,_=()=>{var e;u.value={id:void 0,keyId:void 0,name:void 0,model:void 0,platform:void 0,sort:void 0,status:h.ENABLE,temperature:void 0,maxTokens:void 0,maxContexts:void 0},(e=p.value)==null||e.resetFields()},D={t:a,message:v,dialogVisible:g,dialogTitle:n,formLoading:d,formType:r,formData:u,formRules:i,formRef:p,apiKeyList:b,open:V,emit:f,submitForm:async()=>{await p.value.validate(),d.value=!0;try{const e=u.value;r.value==="create"?(await T.createChatModel(e),v.success(a("common.createSuccess"))):(await T.updateChatModel(e),v.success(a("common.updateSuccess"))),g.value=!1,f("success")}finally{d.value=!1}},resetForm:_,get DICT_TYPE(){return F},get getIntDictOptions(){return O},get getStrDictOptions(){return S}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),[["render",function(L,l,I,a,v,g){const n=N,d=K,r=B,u=Y,i=j,p=G,b=J,V=Z,f=$,_=H,D=z;return m(),c(_,{title:a.dialogTitle,modelValue:a.dialogVisible,"onUpdate:modelValue":l[10]||(l[10]=e=>a.dialogVisible=e)},{footer:o(()=>[t(f,{onClick:a.submitForm,type:"primary",disabled:a.formLoading},{default:o(()=>l[11]||(l[11]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),t(f,{onClick:l[9]||(l[9]=e=>a.dialogVisible=!1)},{default:o(()=>l[12]||(l[12]=[y("\u53D6 \u6D88")])),_:1})]),default:o(()=>[q((m(),c(V,{ref:"formRef",model:a.formData,rules:a.formRules,"label-width":"120px"},{default:o(()=>[t(r,{label:"\u6240\u5C5E\u5E73\u53F0",prop:"platform"},{default:o(()=>[t(d,{modelValue:a.formData.platform,"onUpdate:modelValue":l[0]||(l[0]=e=>a.formData.platform=e),placeholder:"\u8BF7\u8F93\u5165\u5E73\u53F0",clearable:""},{default:o(()=>[(m(!0),x(k,null,C(a.getStrDictOptions(a.DICT_TYPE.AI_PLATFORM),e=>(m(),c(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"API \u79D8\u94A5",prop:"keyId"},{default:o(()=>[t(d,{modelValue:a.formData.keyId,"onUpdate:modelValue":l[1]||(l[1]=e=>a.formData.keyId=e),placeholder:"\u8BF7\u9009\u62E9 API \u79D8\u94A5",clearable:""},{default:o(()=>[(m(!0),x(k,null,C(a.apiKeyList,e=>(m(),c(n,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u6A21\u578B\u540D\u5B57",prop:"name"},{default:o(()=>[t(u,{modelValue:a.formData.name,"onUpdate:modelValue":l[2]||(l[2]=e=>a.formData.name=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u540D\u5B57"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u6A21\u578B\u6807\u8BC6",prop:"model"},{default:o(()=>[t(u,{modelValue:a.formData.model,"onUpdate:modelValue":l[3]||(l[3]=e=>a.formData.model=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u6A21\u578B\u6392\u5E8F",prop:"sort"},{default:o(()=>[t(i,{modelValue:a.formData.sort,"onUpdate:modelValue":l[4]||(l[4]=e=>a.formData.sort=e),placeholder:"\u8BF7\u8F93\u5165\u6A21\u578B\u6392\u5E8F",class:"!w-1/1"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:o(()=>[t(b,{modelValue:a.formData.status,"onUpdate:modelValue":l[5]||(l[5]=e=>a.formData.status=e)},{default:o(()=>[(m(!0),x(k,null,C(a.getIntDictOptions(a.DICT_TYPE.COMMON_STATUS),e=>(m(),c(p,{key:e.value,value:e.value},{default:o(()=>[y(R(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"\u6E29\u5EA6\u53C2\u6570",prop:"temperature"},{default:o(()=>[t(i,{modelValue:a.formData.temperature,"onUpdate:modelValue":l[6]||(l[6]=e=>a.formData.temperature=e),placeholder:"\u8BF7\u8F93\u5165\u6E29\u5EA6\u53C2\u6570",min:0,max:2,precision:2},null,8,["modelValue"])]),_:1}),t(r,{label:"\u56DE\u590D\u6570 Token \u6570",prop:"maxTokens"},{default:o(()=>[t(i,{modelValue:a.formData.maxTokens,"onUpdate:modelValue":l[7]||(l[7]=e=>a.formData.maxTokens=e),placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u6570 Token \u6570",min:0,max:4096},null,8,["modelValue"])]),_:1}),t(r,{label:"\u4E0A\u4E0B\u6587\u6570\u91CF",prop:"maxContexts"},{default:o(()=>[t(i,{modelValue:a.formData.maxContexts,"onUpdate:modelValue":l[8]||(l[8]=e=>a.formData.maxContexts=e),placeholder:"\u8BF7\u8F93\u5165\u4E0A\u4E0B\u6587\u6570\u91CF",min:0,max:20},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[D,a.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/model/chatModel/ChatModelForm.vue"]]);export{W as default};
