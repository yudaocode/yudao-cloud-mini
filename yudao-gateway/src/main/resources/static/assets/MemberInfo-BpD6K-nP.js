import{d as j,r as o,b as E,b9 as M,ao as A,aI as S,_ as L,o as m,q as f,w as l,k as n,j as g,a2 as H,I,c as O,ah as v,ag as R,b6 as P,l as q,aq as D,e8 as W,b7 as N,R as z}from"./index-BaY5TDP-.js";import{E as F}from"./el-empty-wTPt5q4m.js";import G from"./ProductBrowsingHistory-Bct-6M6F.js";import J from"./OrderBrowsingHistory-DfwP2eRo.js";import{C as K}from"./CardTitle-Z2xLAPly.js";import Q from"./UserBasicInfo-XwNP3Edg.js";import V from"./UserAccountInfo-DzbKHh2V.js";import{g as X}from"./index-DzP0w9x-.js";import{g as Y}from"./index-BI4JaB4e.js";import"./ProductItem-B-fB2q4x.js";import"./el-image-Bg-CwbDE.js";import"./concat-C9cLR7iJ.js";import"./OrderItem-DNgvh09i.js";import"./index-B6VQ3j6W.js";import"./el-descriptions-item-CRF_CO88.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";import"./el-avatar-DZsRbb7z.js";import"./formatTime-Dr6TiYYc.js";import"./el-collapse-transition-l0sNRNKZ.js";import"./Descriptions.vue_vue_type_style_index_0_scoped_aee191e8_lang-B_BAqhyt.js";import"./DescriptionsItemLabel-htYg8uGg.js";const Z={key:0},$=L(j({name:"MemberBrowsingHistory",__name:"MemberInfo",setup(U,{expose:i}){const r=o("\u4F1A\u5458\u4FE1\u606F"),e=E(()=>a=>r.value===a),p=o(),y=o(),d=async()=>{var a,s;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":await C(),await T();break;case"\u6700\u8FD1\u6D4F\u89C8":await((a=p.value)==null?void 0:a.getHistoryList(t.value));break;case"\u4EA4\u6613\u8BA2\u5355":await((s=y.value)==null?void 0:s.getHistoryList(t.value))}},w=async()=>{var a,s;switch(r.value){case"\u4F1A\u5458\u4FE1\u606F":break;case"\u6700\u8FD1\u6D4F\u89C8":await((a=p.value)==null?void 0:a.loadMore());break;case"\u4EA4\u6613\u8BA2\u5355":await((s=y.value)==null?void 0:s.loadMore())}},t=o({}),b=async a=>{r.value="\u4F1A\u5458\u4FE1\u606F",t.value=a,await A(),await d()};i({initHistory:b});const k=o(),h=M(()=>{var s;const a=(s=k.value)==null?void 0:s.wrapRef;Math.abs(a.scrollHeight-a.clientHeight-a.scrollTop)<1&&w()},200),c={balance:0,totalExpense:0,totalRecharge:0},u=o(c),T=async()=>{t.value.userId?u.value=await Y({userId:t.value.userId})||c:u.value=c},_=o(!0),B=o({}),C=async()=>{_.value=!0;try{B.value=await X(t.value.userId)}finally{_.value=!1}},x={activeTab:r,tabActivation:e,productBrowsingHistoryRef:p,orderBrowsingHistoryRef:y,handleClick:async a=>{r.value=a,await A(),await d()},getHistoryList:d,loadMore:w,conversation:t,initHistory:b,scrollbarRef:k,handleScroll:h,WALLET_INIT_DATA:c,wallet:u,getUserWallet:T,loading:_,user:B,getUserData:C,ProductBrowsingHistory:G,OrderBrowsingHistory:J,get isEmpty(){return S},get CardTitle(){return K},UserBasicInfo:Q,UserAccountInfo:V};return Object.defineProperty(x,"__isScriptSetup",{enumerable:!1,value:!0}),x}}),[["render",function(U,i,r,e,p,y){const d=P,w=q,t=D,b=F,k=W,h=N,c=z;return m(),f(h,{class:"kefu"},{default:l(()=>[n(d,{class:"kefu-header"},{default:l(()=>[g("div",{class:H([{"kefu-header-item-activation":e.tabActivation("\u4F1A\u5458\u4FE1\u606F")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:i[0]||(i[0]=u=>e.handleClick("\u4F1A\u5458\u4FE1\u606F"))}," \u4F1A\u5458\u4FE1\u606F ",2),g("div",{class:H([{"kefu-header-item-activation":e.tabActivation("\u6700\u8FD1\u6D4F\u89C8")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:i[1]||(i[1]=u=>e.handleClick("\u6700\u8FD1\u6D4F\u89C8"))}," \u6700\u8FD1\u6D4F\u89C8 ",2),g("div",{class:H([{"kefu-header-item-activation":e.tabActivation("\u4EA4\u6613\u8BA2\u5355")},"kefu-header-item cursor-pointer flex items-center justify-center"]),onClick:i[2]||(i[2]=u=>e.handleClick("\u4EA4\u6613\u8BA2\u5355"))}," \u4EA4\u6613\u8BA2\u5355 ",2)]),_:1}),n(k,{class:"kefu-content p-10px!"},{default:l(()=>[e.isEmpty(e.conversation)?v("",!0):I((m(),O("div",Z,[e.activeTab==="\u4F1A\u5458\u4FE1\u606F"?(m(),f(e.UserBasicInfo,{key:0,user:e.user,mode:"kefu"},{header:l(()=>[n(e.CardTitle,{title:"\u57FA\u672C\u4FE1\u606F"})]),_:1},8,["user"])):v("",!0),e.activeTab==="\u4F1A\u5458\u4FE1\u606F"?(m(),f(w,{key:1,class:"h-full mt-10px",shadow:"never"},{header:l(()=>[n(e.CardTitle,{title:"\u8D26\u6237\u4FE1\u606F"})]),default:l(()=>[n(e.UserAccountInfo,{column:1,user:e.user,wallet:e.wallet},null,8,["user","wallet"])]),_:1})):v("",!0)])),[[c,e.loading]]),I(g("div",null,[n(t,{ref:"scrollbarRef",always:"",onScroll:e.handleScroll},{default:l(()=>[e.activeTab==="\u6700\u8FD1\u6D4F\u89C8"?(m(),f(e.ProductBrowsingHistory,{key:0,ref:"productBrowsingHistoryRef"},null,512)):v("",!0),e.activeTab==="\u4EA4\u6613\u8BA2\u5355"?(m(),f(e.OrderBrowsingHistory,{key:1,ref:"orderBrowsingHistoryRef"},null,512)):v("",!0)]),_:1},8,["onScroll"])],512),[[R,!e.isEmpty(e.conversation)]]),I(n(b,{description:"\u8BF7\u9009\u62E9\u5DE6\u4FA7\u7684\u4E00\u4E2A\u4F1A\u8BDD\u540E\u5F00\u59CB"},null,512),[[R,e.isEmpty(e.conversation)]])]),_:1})]),_:1})}],["__scopeId","data-v-e9d8aa80"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/kefu/components/member/MemberInfo.vue"]]);export{$ as default};
