import{d as F,D as L,g as R,u as O,r as g,f as W,C as U,G as M,U as N,d$ as S,_ as Q,X as z,o as n,c as h,k as a,w as t,F as C,n as x,q as p,m as f,I as y,j as G,t as j,J as H,K as J,L as K,M as X,z as $,N as B,O as Z,P as ee,Q as ae,R as le}from"./index-BaY5TDP-.js";import{_ as re}from"./index-avjYFQiD.js";import{_ as te}from"./DictTag-QtcI9ZjC.js";import{_ as oe}from"./ContentWrap-DKQn7kZm.js";import{d as ne}from"./formatTime-Dr6TiYYc.js";import{W as k}from"./index-Dq7IKwyK.js";import{g as ie}from"./index-CuAlllbQ.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./fetch-D5K_4anA.js";const ue=Q(F({name:"AiWriteManager",__name:"index",setup(E,{expose:r}){r();const w=L(),{t:l}=R(),D=O(),v=g(!0),m=g([]),c=g(0),u=W({pageNo:1,pageSize:10,userId:void 0,type:void 0,platform:void 0,createTime:void 0}),T=g(),s=g([]),i=async()=>{v.value=!0;try{const o=await k.getWritePage(u);m.value=o.list,c.value=o.total}finally{v.value=!1}},b=()=>{u.pageNo=1,i()};U(async()=>{i(),s.value=await ie()});const _={message:w,t:l,router:D,loading:v,list:m,total:c,queryParams:u,queryFormRef:T,userList:s,getList:i,handleQuery:b,resetQuery:()=>{T.value.resetFields(),b()},openForm:(o,d)=>{o==="create"&&D.push("/ai/write")},handleDelete:async o=>{try{await w.delConfirm(),await k.deleteWrite(o),w.success(l("common.delSuccess")),await i()}catch{}},get DICT_TYPE(){return M},get getIntDictOptions(){return N},get getStrDictOptions(){return S},get dateFormatter(){return ne}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),[["render",function(E,r,w,l,D,v){const m=H,c=J,u=K,T=X,s=$,i=B,b=Z,_=oe,o=ee,d=te,q=ae,Y=re,I=z("hasPermi"),A=le;return n(),h(C,null,[a(_,null,{default:t(()=>[a(b,{class:"-mb-15px",model:l.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:t(()=>[a(u,{label:"\u7528\u6237\u7F16\u53F7",prop:"userId"},{default:t(()=>[a(c,{modelValue:l.queryParams.userId,"onUpdate:modelValue":r[0]||(r[0]=e=>l.queryParams.userId=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7",class:"!w-240px"},{default:t(()=>[(n(!0),h(C,null,x(l.userList,e=>(n(),p(m,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"\u5199\u4F5C\u7C7B\u578B",prop:"type"},{default:t(()=>[a(c,{modelValue:l.queryParams.type,"onUpdate:modelValue":r[1]||(r[1]=e=>l.queryParams.type=e),placeholder:"\u8BF7\u9009\u62E9\u5199\u4F5C\u7C7B\u578B",clearable:"",class:"!w-240px"},{default:t(()=>[(n(!0),h(C,null,x(l.getIntDictOptions(l.DICT_TYPE.AI_WRITE_TYPE),e=>(n(),p(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"\u5E73\u53F0",prop:"platform"},{default:t(()=>[a(c,{modelValue:l.queryParams.platform,"onUpdate:modelValue":r[2]||(r[2]=e=>l.queryParams.platform=e),placeholder:"\u8BF7\u9009\u62E9\u5E73\u53F0",clearable:"",class:"!w-240px"},{default:t(()=>[(n(!0),h(C,null,x(l.getStrDictOptions(l.DICT_TYPE.AI_PLATFORM),e=>(n(),p(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[a(T,{modelValue:l.queryParams.createTime,"onUpdate:modelValue":r[3]||(r[3]=e=>l.queryParams.createTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),a(u,null,{default:t(()=>[a(i,{onClick:l.handleQuery},{default:t(()=>[a(s,{icon:"ep:search",class:"mr-5px"}),r[7]||(r[7]=f(" \u641C\u7D22"))]),_:1}),a(i,{onClick:l.resetQuery},{default:t(()=>[a(s,{icon:"ep:refresh",class:"mr-5px"}),r[8]||(r[8]=f(" \u91CD\u7F6E"))]),_:1}),y((n(),p(i,{type:"primary",plain:"",onClick:r[4]||(r[4]=e=>l.openForm("create"))},{default:t(()=>[a(s,{icon:"ep:plus",class:"mr-5px"}),r[9]||(r[9]=f(" \u65B0\u589E "))]),_:1})),[[I,["ai:write:create"]]]),y((n(),p(i,{type:"success",plain:"",onClick:E.handleExport,loading:E.exportLoading},{default:t(()=>[a(s,{icon:"ep:download",class:"mr-5px"}),r[10]||(r[10]=f(" \u5BFC\u51FA "))]),_:1},8,["onClick","loading"])),[[I,["ai:write:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(_,null,{default:t(()=>[y((n(),p(q,{data:l.list,stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[a(o,{label:"\u7F16\u53F7",align:"center",prop:"id",width:"120",fixed:"left"}),a(o,{label:"\u7528\u6237",align:"center",prop:"userId",width:"180"},{default:t(e=>{var P;return[G("span",null,j((P=l.userList.find(V=>V.id===e.row.userId))==null?void 0:P.nickname),1)]}),_:1}),a(o,{label:"\u5199\u4F5C\u7C7B\u578B",align:"center",prop:"type"},{default:t(e=>[a(d,{type:l.DICT_TYPE.AI_WRITE_TYPE,value:e.row.type},null,8,["type","value"])]),_:1}),a(o,{label:"\u5E73\u53F0",align:"center",prop:"platform",width:"120"},{default:t(e=>[a(d,{type:l.DICT_TYPE.AI_PLATFORM,value:e.row.platform},null,8,["type","value"])]),_:1}),a(o,{label:"\u6A21\u578B",align:"center",prop:"model",width:"180"}),a(o,{label:"\u751F\u6210\u5185\u5BB9\u63D0\u793A",align:"center",prop:"prompt",width:"180","show-overflow-tooltip":""}),a(o,{label:"\u751F\u6210\u7684\u5185\u5BB9",align:"center",prop:"generatedContent",width:"180"}),a(o,{label:"\u539F\u6587",align:"center",prop:"originalContent",width:"180"}),a(o,{label:"\u957F\u5EA6",align:"center",prop:"length"},{default:t(e=>[a(d,{type:l.DICT_TYPE.AI_WRITE_LENGTH,value:e.row.length},null,8,["type","value"])]),_:1}),a(o,{label:"\u683C\u5F0F",align:"center",prop:"format"},{default:t(e=>[a(d,{type:l.DICT_TYPE.AI_WRITE_FORMAT,value:e.row.format},null,8,["type","value"])]),_:1}),a(o,{label:"\u8BED\u6C14",align:"center",prop:"tone"},{default:t(e=>[a(d,{type:l.DICT_TYPE.AI_WRITE_TONE,value:e.row.tone},null,8,["type","value"])]),_:1}),a(o,{label:"\u8BED\u8A00",align:"center",prop:"language"},{default:t(e=>[a(d,{type:l.DICT_TYPE.AI_WRITE_LANGUAGE,value:e.row.language},null,8,["type","value"])]),_:1}),a(o,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:l.dateFormatter,width:"180px"},null,8,["formatter"]),a(o,{label:"\u9519\u8BEF\u4FE1\u606F",align:"center",prop:"errorMessage"}),a(o,{label:"\u64CD\u4F5C",align:"center"},{default:t(e=>[y((n(),p(i,{link:"",type:"primary",onClick:P=>l.openForm("update",e.row.id)},{default:t(()=>r[11]||(r[11]=[f(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[I,["ai:write:update"]]]),y((n(),p(i,{link:"",type:"danger",onClick:P=>l.handleDelete(e.row.id)},{default:t(()=>r[12]||(r[12]=[f(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[I,["ai:write:delete"]]])]),_:1})]),_:1},8,["data"])),[[A,l.loading]]),a(Y,{total:l.total,page:l.queryParams.pageNo,"onUpdate:page":r[5]||(r[5]=e=>l.queryParams.pageNo=e),limit:l.queryParams.pageSize,"onUpdate:limit":r[6]||(r[6]=e=>l.queryParams.pageSize=e),onPagination:l.getList},null,8,["total","page","limit"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/write/manager/index.vue"]]);export{ue as default};
