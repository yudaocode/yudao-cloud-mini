import{bz as q,d as L,D as Q,g as z,r as v,f as G,C as B,U as H,H as j,G as K,_ as J,X,o as s,c as y,k as l,w as r,F as _,n as S,q as d,Y as Z,m as f,I as E,j as W,t as M,ah as D,J as $,K as ee,L as ae,Z as le,M as te,z as re,N as ue,O as se,P as ie,y as ne,an as oe,ch as de,Q as pe,R as ce}from"./index-BaY5TDP-.js";import{_ as me}from"./index-avjYFQiD.js";import{_ as ge}from"./DictTag-QtcI9ZjC.js";import{_ as fe}from"./ContentWrap-DKQn7kZm.js";import{d as be}from"./formatTime-Dr6TiYYc.js";import{g as ye}from"./index-CuAlllbQ.js";import{j as _e}from"./constants-BXWrMvZH.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";const he=async c=>await q.get({url:"/ai/music/page",params:c}),we=async c=>await q.put({url:"/ai/music/update",data:c}),ve=async c=>await q.delete({url:"/ai/music/delete?id="+c}),Se=J(L({name:"AiMusicManager",__name:"index",setup(c,{expose:t}){t();const h=Q(),{t:a}=z(),P=v(!0),x=v([]),m=v(0),p=G({pageNo:1,pageSize:10,userId:void 0,title:void 0,status:void 0,generateMode:void 0,createTime:[],publicStatus:void 0}),o=v(),I=v([]),g=async()=>{P.value=!0;try{const i=await he(p);x.value=i.list,m.value=i.total}finally{P.value=!1}},w=()=>{p.pageNo=1,g()};B(async()=>{g(),I.value=await ye()});const b={message:h,t:a,loading:P,list:x,total:m,queryParams:p,queryFormRef:o,userList:I,getList:g,handleQuery:w,resetQuery:()=>{o.value.resetFields(),w()},handleDelete:async i=>{try{await h.delConfirm(),await ve(i),h.success(a("common.delSuccess")),await g()}catch{}},handleUpdatePublicStatusChange:async i=>{try{const U=i.publicStatus?"\u516C\u5F00":"\u79C1\u6709";await h.confirm('\u786E\u8BA4\u8981"'+U+'"\u8BE5\u97F3\u4E50\u5417?'),await we({id:i.id,publicStatus:i.publicStatus}),await g()}catch{i.publicStatus=!i.publicStatus}},get getIntDictOptions(){return H},get getBoolDictOptions(){return j},get DICT_TYPE(){return K},get dateFormatter(){return be},get AiMusicStatusEnum(){return _e}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),[["render",function(c,t,h,a,P,x){const m=$,p=ee,o=ae,I=le,g=te,w=re,b=ue,i=se,U=fe,u=ie,k=ge,V=ne,A=oe,O=de,Y=pe,N=me,R=X("hasPermi"),F=ce;return s(),y(_,null,[l(U,null,{default:r(()=>[l(i,{class:"-mb-15px",model:a.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:r(()=>[l(o,{label:"\u7528\u6237\u7F16\u53F7",prop:"userId"},{default:r(()=>[l(p,{modelValue:a.queryParams.userId,"onUpdate:modelValue":t[0]||(t[0]=e=>a.queryParams.userId=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7",class:"!w-240px"},{default:r(()=>[(s(!0),y(_,null,S(a.userList,e=>(s(),d(m,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"\u97F3\u4E50\u540D\u79F0",prop:"title"},{default:r(()=>[l(I,{modelValue:a.queryParams.title,"onUpdate:modelValue":t[1]||(t[1]=e=>a.queryParams.title=e),placeholder:"\u8BF7\u8F93\u5165\u97F3\u4E50\u540D\u79F0",clearable:"",onKeyup:Z(a.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(o,{label:"\u97F3\u4E50\u72B6\u6001",prop:"status"},{default:r(()=>[l(p,{modelValue:a.queryParams.status,"onUpdate:modelValue":t[2]||(t[2]=e=>a.queryParams.status=e),placeholder:"\u8BF7\u9009\u62E9\u97F3\u4E50\u72B6\u6001",clearable:"",class:"!w-240px"},{default:r(()=>[(s(!0),y(_,null,S(a.getIntDictOptions(a.DICT_TYPE.AI_MUSIC_STATUS),e=>(s(),d(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"\u751F\u6210\u6A21\u5F0F",prop:"generateMode"},{default:r(()=>[l(p,{modelValue:a.queryParams.generateMode,"onUpdate:modelValue":t[3]||(t[3]=e=>a.queryParams.generateMode=e),placeholder:"\u8BF7\u9009\u62E9\u751F\u6210\u6A21\u5F0F",clearable:"",class:"!w-240px"},{default:r(()=>[(s(!0),y(_,null,S(a.getIntDictOptions(a.DICT_TYPE.AI_GENERATE_MODE),e=>(s(),d(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[l(g,{modelValue:a.queryParams.createTime,"onUpdate:modelValue":t[4]||(t[4]=e=>a.queryParams.createTime=e),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),l(o,{label:"\u662F\u5426\u53D1\u5E03",prop:"publicStatus"},{default:r(()=>[l(p,{modelValue:a.queryParams.publicStatus,"onUpdate:modelValue":t[5]||(t[5]=e=>a.queryParams.publicStatus=e),placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u53D1\u5E03",clearable:"",class:"!w-240px"},{default:r(()=>[(s(!0),y(_,null,S(a.getBoolDictOptions(a.DICT_TYPE.INFRA_BOOLEAN_STRING),e=>(s(),d(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(o,null,{default:r(()=>[l(b,{onClick:a.handleQuery},{default:r(()=>[l(w,{icon:"ep:search",class:"mr-5px"}),t[8]||(t[8]=f(" \u641C\u7D22"))]),_:1}),l(b,{onClick:a.resetQuery},{default:r(()=>[l(w,{icon:"ep:refresh",class:"mr-5px"}),t[9]||(t[9]=f(" \u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(U,null,{default:r(()=>[E((s(),d(Y,{data:a.list,stripe:!0,"show-overflow-tooltip":!0},{default:r(()=>[l(u,{label:"\u7F16\u53F7",align:"center",prop:"id",width:"180",fixed:"left"}),l(u,{label:"\u97F3\u4E50\u540D\u79F0",align:"center",prop:"title",width:"180px",fixed:"left"}),l(u,{label:"\u7528\u6237",align:"center",prop:"userId",width:"180"},{default:r(e=>{var n;return[W("span",null,M((n=a.userList.find(T=>T.id===e.row.userId))==null?void 0:n.nickname),1)]}),_:1}),l(u,{label:"\u97F3\u4E50\u72B6\u6001",align:"center",prop:"status",width:"100"},{default:r(e=>[l(k,{type:a.DICT_TYPE.AI_MUSIC_STATUS,value:e.row.status},null,8,["type","value"])]),_:1}),l(u,{label:"\u6A21\u578B",align:"center",prop:"model",width:"180"}),l(u,{label:"\u5185\u5BB9",align:"center",width:"180"},{default:r(({row:e})=>{var n,T,C;return[((n=e.audioUrl)==null?void 0:n.length)>0?(s(),d(V,{key:0,type:"primary",href:e.audioUrl,target:"_blank"},{default:r(()=>t[10]||(t[10]=[f(" \u97F3\u4E50 ")])),_:2},1032,["href"])):D("",!0),((T=e.videoUrl)==null?void 0:T.length)>0?(s(),d(V,{key:1,type:"primary",href:e.videoUrl,target:"_blank",class:"!pl-5px"},{default:r(()=>t[11]||(t[11]=[f(" \u89C6\u9891 ")])),_:2},1032,["href"])):D("",!0),((C=e.imageUrl)==null?void 0:C.length)>0?(s(),d(V,{key:2,type:"primary",href:e.imageUrl,target:"_blank",class:"!pl-5px"},{default:r(()=>t[12]||(t[12]=[f(" \u5C01\u9762 ")])),_:2},1032,["href"])):D("",!0)]}),_:1}),l(u,{label:"\u65F6\u957F\uFF08\u79D2\uFF09",align:"center",prop:"duration",width:"100"}),l(u,{label:"\u63D0\u793A\u8BCD",align:"center",prop:"prompt",width:"180"}),l(u,{label:"\u6B4C\u8BCD",align:"center",prop:"lyric",width:"180"}),l(u,{label:"\u63CF\u8FF0",align:"center",prop:"gptDescriptionPrompt",width:"180"}),l(u,{label:"\u751F\u6210\u6A21\u5F0F",align:"center",prop:"generateMode",width:"100"},{default:r(e=>[l(k,{type:a.DICT_TYPE.AI_GENERATE_MODE,value:e.row.generateMode},null,8,["type","value"])]),_:1}),l(u,{label:"\u98CE\u683C\u6807\u7B7E",align:"center",prop:"tags",width:"180"},{default:r(e=>[(s(!0),y(_,null,S(e.row.tags,n=>(s(),d(A,{key:n,round:"",class:"ml-2px"},{default:r(()=>[f(M(n),1)]),_:2},1024))),128))]),_:1}),l(u,{label:"\u662F\u5426\u53D1\u5E03",align:"center",prop:"publicStatus"},{default:r(e=>[l(O,{modelValue:e.row.publicStatus,"onUpdate:modelValue":n=>e.row.publicStatus=n,"active-value":!0,"inactive-value":!1,onChange:n=>a.handleUpdatePublicStatusChange(e.row),disabled:e.row.status!==a.AiMusicStatusEnum.SUCCESS},null,8,["modelValue","onUpdate:modelValue","onChange","disabled"])]),_:1}),l(u,{label:"\u4EFB\u52A1\u7F16\u53F7",align:"center",prop:"taskId",width:"180"}),l(u,{label:"\u9519\u8BEF\u4FE1\u606F",align:"center",prop:"errorMessage"}),l(u,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:a.dateFormatter,width:"180px"},null,8,["formatter"]),l(u,{label:"\u64CD\u4F5C",align:"center",width:"100",fixed:"right"},{default:r(e=>[E((s(),d(b,{link:"",type:"danger",onClick:n=>a.handleDelete(e.row.id)},{default:r(()=>t[13]||(t[13]=[f(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[R,["ai:music:delete"]]])]),_:1})]),_:1},8,["data"])),[[F,a.loading]]),l(N,{total:a.total,page:a.queryParams.pageNo,"onUpdate:page":t[6]||(t[6]=e=>a.queryParams.pageNo=e),limit:a.queryParams.pageSize,"onUpdate:limit":t[7]||(t[7]=e=>a.queryParams.pageSize=e),onPagination:a.getList},null,8,["total","page","limit"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/music/manager/index.vue"]]);export{Se as default};
