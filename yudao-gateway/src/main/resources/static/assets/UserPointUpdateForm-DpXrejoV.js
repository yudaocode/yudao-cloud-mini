import{d as P,g as D,D as U,r as v,f as w,b as k,_ as x,o as _,q as h,w as i,k as o,m as b,I as R,Z as T,L as F,cf as L,ak as S,al as q,O as C,N as O,R as j}from"./index-BaY5TDP-.js";import{_ as I}from"./Dialog-CZSXtzfQ.js";import{g as N,b as Z}from"./index-DzP0w9x-.js";const z=x(P({name:"UpdatePointForm",__name:"UserPointUpdateForm",emits:["success"],setup(y,{expose:e,emit:V}){const{t:a}=D(),u=U(),r=v(!1),n=v(!1),t=v({id:void 0,nickname:void 0,point:0,changePoint:0,changeType:1}),d=w({changePoint:[{required:!0,message:"\u53D8\u52A8\u79EF\u5206\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),s=v(),p=async l=>{if(r.value=!0,m(),l){n.value=!0;try{t.value=await N(l),t.value.changeType=1,t.value.changePoint=0}finally{n.value=!1}}};e({open:p});const c=V,m=()=>{var l;t.value={id:void 0,nickname:void 0,point:0,changePoint:0,changeType:1},(l=s.value)==null||l.resetFields()},f=k(()=>t.value.point+t.value.changePoint*t.value.changeType),g={t:a,message:u,dialogVisible:r,formLoading:n,formData:t,formRules:d,formRef:s,open:p,emit:c,submitForm:async()=>{if(s&&await s.value.validate())if(t.value.changePoint<1)u.error("\u53D8\u52A8\u79EF\u5206\u4E0D\u80FD\u5C0F\u4E8E 1");else if(f.value<0)u.error("\u53D8\u52A8\u540E\u7684\u79EF\u5206\u4E0D\u80FD\u5C0F\u4E8E 0");else{n.value=!0;try{await Z({id:t.value.id,point:t.value.changePoint*t.value.changeType}),u.success(a("common.updateSuccess")),r.value=!1,c("success")}finally{n.value=!1}}},resetForm:m,pointResult:f};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(y,e,V,a,u,r){const n=T,t=F,d=L,s=S,p=q,c=C,m=O,f=I,g=j;return _(),h(f,{modelValue:a.dialogVisible,"onUpdate:modelValue":e[7]||(e[7]=l=>a.dialogVisible=l),title:"\u4FEE\u6539\u7528\u6237\u79EF\u5206",width:"600"},{footer:i(()=>[o(m,{disabled:a.formLoading,type:"primary",onClick:a.submitForm},{default:i(()=>e[10]||(e[10]=[b("\u786E \u5B9A")])),_:1},8,["disabled"]),o(m,{onClick:e[6]||(e[6]=l=>a.dialogVisible=!1)},{default:i(()=>e[11]||(e[11]=[b("\u53D6 \u6D88")])),_:1})]),default:i(()=>[R((_(),h(c,{ref:"formRef",model:a.formData,rules:a.formRules,"label-width":"100px"},{default:i(()=>[o(t,{label:"\u7528\u6237\u7F16\u53F7",prop:"id"},{default:i(()=>[o(n,{modelValue:a.formData.id,"onUpdate:modelValue":e[0]||(e[0]=l=>a.formData.id=l),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),o(t,{label:"\u7528\u6237\u6635\u79F0",prop:"nickname"},{default:i(()=>[o(n,{modelValue:a.formData.nickname,"onUpdate:modelValue":e[1]||(e[1]=l=>a.formData.nickname=l),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),o(t,{label:"\u53D8\u52A8\u524D\u79EF\u5206",prop:"point"},{default:i(()=>[o(d,{modelValue:a.formData.point,"onUpdate:modelValue":e[2]||(e[2]=l=>a.formData.point=l),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),o(t,{label:"\u53D8\u52A8\u7C7B\u578B",prop:"changeType"},{default:i(()=>[o(p,{modelValue:a.formData.changeType,"onUpdate:modelValue":e[3]||(e[3]=l=>a.formData.changeType=l)},{default:i(()=>[o(s,{value:1},{default:i(()=>e[8]||(e[8]=[b("\u589E\u52A0")])),_:1}),o(s,{value:-1},{default:i(()=>e[9]||(e[9]=[b("\u51CF\u5C11")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(t,{label:"\u53D8\u52A8\u79EF\u5206",prop:"changePoint"},{default:i(()=>[o(d,{modelValue:a.formData.changePoint,"onUpdate:modelValue":e[4]||(e[4]=l=>a.formData.changePoint=l),min:0,precision:0,class:"!w-240px"},null,8,["modelValue"])]),_:1}),o(t,{label:"\u53D8\u52A8\u540E\u79EF\u5206"},{default:i(()=>[o(d,{modelValue:a.pointResult,"onUpdate:modelValue":e[5]||(e[5]=l=>a.pointResult=l),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[g,a.formLoading]])]),_:1},8,["modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/member/user/components/UserPointUpdateForm.vue"]]);export{z as default};
