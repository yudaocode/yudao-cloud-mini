import{d as q,D as S,g as I,r as C,f as Q,u as T,C as R,G as U,_ as V,X as D,o as u,c as L,k as e,w as l,Y as O,m as d,I as c,q as m,j as Y,ah as j,F as E,Z as A,L as M,z as N,N as z,O as G,P as K,Q as X,R as Z}from"./index-BaY5TDP-.js";import{_ as B}from"./DictTag-QtcI9ZjC.js";import{_ as H}from"./ContentWrap-DKQn7kZm.js";import{_ as J}from"./index-BAz6Gqim.js";import{h as W}from"./tree-z7HkrWVC.js";import{d as $}from"./formatTime-Dr6TiYYc.js";import{g as ee,d as ae}from"./category-B7jjsMOS.js";import re from"./CategoryForm-LvuXz92R.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./constants-CEEr2azc.js";const le=["src"],te=V(q({name:"ProductCategory",__name:"index",setup(x,{expose:r}){r();const f=S(),{t:a}=I(),y=C(!0),k=C([]),_=Q({name:void 0}),g=C(),n=async()=>{y.value=!0;try{const t=await ee(_);k.value=W(t,"id","parentId")}finally{y.value=!1}},i=()=>{n()},s=C(),h=T();R(()=>{n()});const p={message:f,t:a,loading:y,list:k,queryParams:_,queryFormRef:g,getList:n,handleQuery:i,resetQuery:()=>{g.value.resetFields(),i()},formRef:s,openForm:(t,b)=>{s.value.open(t,b)},handleDelete:async t=>{try{await f.delConfirm(),await ae(t),f.success(a("common.delSuccess")),await n()}catch{}},router:h,handleViewSpu:t=>{h.push({name:"ProductSpu",query:{categoryId:t}})},get DICT_TYPE(){return U},get dateFormatter(){return $},CategoryForm:re};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(x,r,f,a,y,k){const _=J,g=A,n=M,i=N,s=z,h=G,p=H,t=K,b=B,F=X,w=D("hasPermi"),P=Z;return u(),L(E,null,[e(_,{title:"\u3010\u5546\u54C1\u3011\u5546\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/mall/product-category/"}),e(p,null,{default:l(()=>[e(h,{class:"-mb-15px",model:a.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:l(()=>[e(n,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:l(()=>[e(g,{modelValue:a.queryParams.name,"onUpdate:modelValue":r[0]||(r[0]=o=>a.queryParams.name=o),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0",clearable:"",onKeyup:O(a.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(n,null,{default:l(()=>[e(s,{onClick:a.handleQuery},{default:l(()=>[e(i,{icon:"ep:search",class:"mr-5px"}),r[2]||(r[2]=d(" \u641C\u7D22"))]),_:1}),e(s,{onClick:a.resetQuery},{default:l(()=>[e(i,{icon:"ep:refresh",class:"mr-5px"}),r[3]||(r[3]=d(" \u91CD\u7F6E"))]),_:1}),c((u(),m(s,{type:"primary",plain:"",onClick:r[1]||(r[1]=o=>a.openForm("create"))},{default:l(()=>[e(i,{icon:"ep:plus",class:"mr-5px"}),r[4]||(r[4]=d(" \u65B0\u589E "))]),_:1})),[[w,["product:category:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(p,null,{default:l(()=>[c((u(),m(F,{data:a.list,"row-key":"id","default-expand-all":""},{default:l(()=>[e(t,{label:"\u540D\u79F0","min-width":"240",prop:"name",sortable:""}),e(t,{label:"\u5206\u7C7B\u56FE\u6807",align:"center","min-width":"80",prop:"picUrl"},{default:l(o=>[Y("img",{src:o.row.picUrl,alt:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",class:"h-36px"},null,8,le)]),_:1}),e(t,{label:"\u6392\u5E8F",align:"center","min-width":"150",prop:"sort"}),e(t,{label:"\u72B6\u6001",align:"center","min-width":"150",prop:"status"},{default:l(o=>[e(b,{type:a.DICT_TYPE.COMMON_STATUS,value:o.row.status},null,8,["type","value"])]),_:1}),e(t,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:a.dateFormatter},null,8,["formatter"]),e(t,{label:"\u64CD\u4F5C",align:"center","min-width":"180"},{default:l(o=>[c((u(),m(s,{link:"",type:"primary",onClick:v=>a.openForm("update",o.row.id)},{default:l(()=>r[5]||(r[5]=[d(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[w,["product:category:update"]]]),o.row.parentId>0?c((u(),m(s,{key:0,link:"",type:"primary",onClick:v=>a.handleViewSpu(o.row.id)},{default:l(()=>r[6]||(r[6]=[d(" \u67E5\u770B\u5546\u54C1 ")])),_:2},1032,["onClick"])),[[w,["product:spu:query"]]]):j("",!0),c((u(),m(s,{link:"",type:"danger",onClick:v=>a.handleDelete(o.row.id)},{default:l(()=>r[7]||(r[7]=[d(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[w,["product:category:delete"]]])]),_:1})]),_:1},8,["data"])),[[P,a.loading]])]),_:1}),e(a.CategoryForm,{ref:"formRef",onSuccess:a.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/product/category/index.vue"]]);export{te as default};
