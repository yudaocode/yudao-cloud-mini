import{d as I,S as Q,r as d,f as N,C as R,D as U,g as z,_ as L,X as O,c as x,k as r,w as l,F,o as i,n as D,q as c,Y as K,m as y,I as v,J as j,K as T,L as J,Z as X,z as Y,N as Z,O as A,P as B,Q as E,R as G}from"./index-BaY5TDP-.js";import{_ as H}from"./index-avjYFQiD.js";import{_ as M}from"./ContentWrap-DKQn7kZm.js";import{d as W}from"./formatTime-Dr6TiYYc.js";import{g as $,a as ee,d as ae}from"./property-Ddjv43NP.js";import re from"./ValueForm-CkifsfDb.js";import"./index-DrSdAlug.js";import"./Dialog-CZSXtzfQ.js";const te=L(I({name:"ProductPropertyValue",__name:"index",setup(C,{expose:a}){a();const f=U(),{t:e}=z(),{params:P}=Q(),g=d(!0),_=d(0),w=d([]),s=N({pageNo:1,pageSize:10,propertyId:P.propertyId,name:void 0}),h=d(),u=d([]),o=async()=>{g.value=!0;try{const n=await ee(s);w.value=n.list,_.value=n.total}finally{g.value=!1}},b=()=>{s.pageNo=1,o()},m=d();R(async()=>{await o(),u.value.push(await $(s.propertyId))});const p={message:f,t:e,params:P,loading:g,total:_,list:w,queryParams:s,queryFormRef:h,propertyOptions:u,getList:o,handleQuery:b,resetQuery:()=>{h.value.resetFields(),b()},formRef:m,openForm:(n,q)=>{m.value.open(n,s.propertyId,q)},handleDelete:async n=>{try{await f.delConfirm(),await ae(n),f.success(e("common.delSuccess")),await o()}catch{}},get dateFormatter(){return W},ValueForm:re};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(C,a,f,e,P,g){const _=j,w=T,s=J,h=X,u=Y,o=Z,b=A,m=M,p=B,n=E,q=H,k=O("hasPermi"),S=G;return i(),x(F,null,[r(m,null,{default:l(()=>[r(b,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:l(()=>[r(s,{label:"\u5C5E\u6027\u9879",prop:"propertyId"},{default:l(()=>[r(w,{modelValue:e.queryParams.propertyId,"onUpdate:modelValue":a[0]||(a[0]=t=>e.queryParams.propertyId=t),class:"!w-240px",disabled:""},{default:l(()=>[(i(!0),x(F,null,D(e.propertyOptions,t=>(i(),c(_,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(s,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[r(h,{modelValue:e.queryParams.name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.queryParams.name=t),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:K(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),r(s,null,{default:l(()=>[r(o,{onClick:e.handleQuery},{default:l(()=>[r(u,{icon:"ep:search",class:"mr-5px"}),a[5]||(a[5]=y(" \u641C\u7D22"))]),_:1}),r(o,{onClick:e.resetQuery},{default:l(()=>[r(u,{icon:"ep:refresh",class:"mr-5px"}),a[6]||(a[6]=y(" \u91CD\u7F6E"))]),_:1}),v((i(),c(o,{plain:"",type:"primary",onClick:a[2]||(a[2]=t=>e.openForm("create"))},{default:l(()=>[r(u,{icon:"ep:plus",class:"mr-5px"}),a[7]||(a[7]=y(" \u65B0\u589E "))]),_:1})),[[k,["product:property:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),r(m,null,{default:l(()=>[v((i(),c(n,{data:e.list},{default:l(()=>[r(p,{label:"\u7F16\u53F7",align:"center","min-width":"60",prop:"id"}),r(p,{label:"\u5C5E\u6027\u503C\u540D\u79F0",align:"center","min-width":"150",prop:"name"}),r(p,{label:"\u5907\u6CE8",align:"center",prop:"remark","show-overflow-tooltip":!0}),r(p,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e.dateFormatter},null,8,["formatter"]),r(p,{label:"\u64CD\u4F5C",align:"center"},{default:l(t=>[v((i(),c(o,{link:"",type:"primary",onClick:V=>e.openForm("update",t.row.id)},{default:l(()=>a[8]||(a[8]=[y(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[k,["product:property:update"]]]),v((i(),c(o,{link:"",type:"danger",onClick:V=>e.handleDelete(t.row.id)},{default:l(()=>a[9]||(a[9]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[k,["product:property:delete"]]])]),_:1})]),_:1},8,["data"])),[[S,e.loading]]),r(q,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":a[3]||(a[3]=t=>e.queryParams.pageNo=t),limit:e.queryParams.pageSize,"onUpdate:limit":a[4]||(a[4]=t=>e.queryParams.pageSize=t),onPagination:e.getList},null,8,["total","page","limit"])]),_:1}),r(e.ValueForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/product/property/value/index.vue"]]);export{te as default};
