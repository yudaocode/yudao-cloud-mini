import{d as P,D as U,dT as b,_ as x,o as z,c as j,j as k}from"./index-BaY5TDP-.js";import A from"./picture-CTjip5lJ.js";const C=["src"],T=x(P({name:"PictureSelectUpload",__name:"PictureSelectUpload",emits:["send-picture"],setup(v,{expose:u,emit:p}){u();const t=U(),r=p;async function n(s={}){const{multiple:l,accept:m,limit:h,fileSize:_}={multiple:!0,accept:"image/jpeg, image/png, image/gif",limit:1,fileSize:500,...s},e=document.createElement("input");e.type="file",e.style.display="none",l&&(e.multiple=!0),m&&(e.accept=m),document.body.appendChild(e),e.click();try{return await new Promise((i,f)=>{e.addEventListener("change",o=>{var y;const c=Array.from(((y=o==null?void 0:o.target)==null?void 0:y.files)||[]);if(document.body.removeChild(e),c.length>h)return void f({errorType:"limit",files:c});const g=c.filter(a=>a.size/1048576>_);if(g.length>0)return void f({errorType:"fileSize",files:g});const w=c.map((a,S)=>({file:a,uid:Date.now()+S}));i(w)})})}catch(i){throw console.error("\u9009\u62E9\u6587\u4EF6\u51FA\u9519:",i),i}}const d={message:t,emits:r,selectAndUpload:async()=>{const s=await n();t.success("\u56FE\u7247\u53D1\u9001\u4E2D\u8BF7\u7A0D\u7B49\u3002\u3002\u3002");const l=await b({file:s[0].file});r("send-picture",l.data)},getFiles:n,get Picture(){return A}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),[["render",function(v,u,p,t,r,n){return z(),j("div",null,[k("img",{src:t.Picture,class:"w-35px h-35px",onClick:t.selectAndUpload},null,8,C)])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/kefu/components/tools/PictureSelectUpload.vue"]]);export{T as default};
