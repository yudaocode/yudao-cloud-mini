import{d as U,D as V,g as I,r as m,f as Q,C as M,G as N,U as z,_ as G,X as O,o as u,c as S,k as a,w as l,Y as X,F as q,n as H,q as f,m as g,I as h,Z as K,L as j,J as A,K as B,M as J,z as W,N as Z,O as $,P as ee,Q as ae,A as te,B as re,R as le}from"./index-BaY5TDP-.js";import{_ as oe}from"./index-avjYFQiD.js";import{_ as ne}from"./DictTag-QtcI9ZjC.js";import{_ as se}from"./ContentWrap-DKQn7kZm.js";import{_ as ue}from"./index-BAz6Gqim.js";import{d as ie}from"./formatTime-Dr6TiYYc.js";import{d as de}from"./download-oWiM5xVU.js";import{m as me,n as pe,o as ce}from"./index-DmE3xvm5.js";import fe from"./Demo03StudentForm-DxL-BoWp.js";import ge from"./Demo03CourseList-BdNQo-qz.js";import ye from"./Demo03GradeList-jtcZinVU.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./Demo03CourseForm-B7c66Gor.js";import"./Demo03GradeForm-Bi66bQ0V.js";const _e=G(U({name:"Demo03Student",__name:"index",setup(T,{expose:t}){t();const y=V(),{t:e}=I(),x=m(!0),D=m([]),w=m(0),p=Q({pageNo:1,pageSize:10,name:null,sex:null,description:null,createTime:[]}),i=m(),_=m(!1),c=async()=>{x.value=!0;try{const o=await me(p);D.value=o.list,w.value=o.total}finally{x.value=!1}},C=()=>{p.pageNo=1,c()},d=m(),n=m({});M(()=>{c()});const b={message:y,t:e,loading:x,list:D,total:w,queryParams:p,queryFormRef:i,exportLoading:_,getList:c,handleQuery:C,resetQuery:()=>{i.value.resetFields(),C()},formRef:d,openForm:(o,s)=>{d.value.open(o,s)},handleDelete:async o=>{try{await y.delConfirm(),await pe(o),y.success(e("common.delSuccess")),await c()}catch{}},handleExport:async()=>{try{await y.exportConfirm(),_.value=!0;const o=await ce(p);de.excel(o,"\u5B66\u751F.xls")}catch{}finally{_.value=!1}},currentRow:n,handleCurrentChange:o=>{n.value=o},get DICT_TYPE(){return N},get getIntDictOptions(){return z},get dateFormatter(){return ie},Demo03StudentForm:fe,Demo03CourseList:ge,Demo03GradeList:ye};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),[["render",function(T,t,y,e,x,D){const w=ue,p=K,i=j,_=A,c=B,C=J,d=W,n=Z,b=$,o=se,s=ee,k=ne,F=ae,E=oe,P=te,Y=re,v=O("hasPermi"),L=le;return u(),S(q,null,[a(w,{title:"\u4EE3\u7801\u751F\u6210\uFF08\u4E3B\u5B50\u8868\uFF09",url:"https://doc.iocoder.cn/new-feature/master-sub/"}),a(o,null,{default:l(()=>[a(b,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"68px"},{default:l(()=>[a(i,{label:"\u540D\u5B57",prop:"name"},{default:l(()=>[a(p,{modelValue:e.queryParams.name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.queryParams.name=r),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57",onKeyup:X(e.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),a(i,{label:"\u6027\u522B",prop:"sex"},{default:l(()=>[a(c,{modelValue:e.queryParams.sex,"onUpdate:modelValue":t[1]||(t[1]=r=>e.queryParams.sex=r),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6027\u522B"},{default:l(()=>[(u(!0),S(q,null,H(e.getIntDictOptions(e.DICT_TYPE.SYSTEM_USER_SEX),r=>(u(),f(_,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:l(()=>[a(C,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":t[2]||(t[2]=r=>e.queryParams.createTime=r),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),a(i,null,{default:l(()=>[a(n,{onClick:e.handleQuery},{default:l(()=>[a(d,{class:"mr-5px",icon:"ep:search"}),t[6]||(t[6]=g(" \u641C\u7D22 "))]),_:1}),a(n,{onClick:e.resetQuery},{default:l(()=>[a(d,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=g(" \u91CD\u7F6E "))]),_:1}),h((u(),f(n,{plain:"",type:"primary",onClick:t[3]||(t[3]=r=>e.openForm("create"))},{default:l(()=>[a(d,{class:"mr-5px",icon:"ep:plus"}),t[8]||(t[8]=g(" \u65B0\u589E "))]),_:1})),[[v,["infra:demo03-student:create"]]]),h((u(),f(n,{loading:e.exportLoading,plain:"",type:"success",onClick:e.handleExport},{default:l(()=>[a(d,{class:"mr-5px",icon:"ep:download"}),t[9]||(t[9]=g(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[v,["infra:demo03-student:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(o,null,{default:l(()=>[h((u(),f(F,{data:e.list,"show-overflow-tooltip":!0,stripe:!0,"highlight-current-row":"",onCurrentChange:e.handleCurrentChange},{default:l(()=>[a(s,{align:"center",label:"\u7F16\u53F7",prop:"id"}),a(s,{align:"center",label:"\u540D\u5B57",prop:"name"}),a(s,{align:"center",label:"\u6027\u522B",prop:"sex"},{default:l(r=>[a(k,{type:e.DICT_TYPE.SYSTEM_USER_SEX,value:r.row.sex},null,8,["type","value"])]),_:1}),a(s,{formatter:e.dateFormatter,align:"center",label:"\u51FA\u751F\u65E5\u671F",prop:"birthday",width:"180px"},null,8,["formatter"]),a(s,{align:"center",label:"\u7B80\u4ECB",prop:"description"}),a(s,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(s,{align:"center",label:"\u64CD\u4F5C"},{default:l(r=>[h((u(),f(n,{link:"",type:"primary",onClick:R=>e.openForm("update",r.row.id)},{default:l(()=>t[10]||(t[10]=[g(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[v,["infra:demo03-student:update"]]]),h((u(),f(n,{link:"",type:"danger",onClick:R=>e.handleDelete(r.row.id)},{default:l(()=>t[11]||(t[11]=[g(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[v,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[L,e.loading]]),a(E,{limit:e.queryParams.pageSize,"onUpdate:limit":t[4]||(t[4]=r=>e.queryParams.pageSize=r),page:e.queryParams.pageNo,"onUpdate:page":t[5]||(t[5]=r=>e.queryParams.pageNo=r),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),a(e.Demo03StudentForm,{ref:"formRef",onSuccess:e.getList},null,512),a(o,null,{default:l(()=>[a(Y,{"model-value":"demo03Course"},{default:l(()=>[a(P,{label:"\u5B66\u751F\u8BFE\u7A0B",name:"demo03Course"},{default:l(()=>{var r;return[a(e.Demo03CourseList,{"student-id":(r=e.currentRow)==null?void 0:r.id},null,8,["student-id"])]}),_:1}),a(P,{label:"\u5B66\u751F\u73ED\u7EA7",name:"demo03Grade"},{default:l(()=>{var r;return[a(e.Demo03GradeList,{"student-id":(r=e.currentRow)==null?void 0:r.id},null,8,["student-id"])]}),_:1})]),_:1})]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/infra/demo/demo03/erp/index.vue"]]);export{_e as default};
