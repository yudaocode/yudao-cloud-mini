import{d as C,b2 as S,p as f,b as g,r as h,au as V,aD as y,_ as w,o as m,c as u,j as d,F as A,n as x,k as n,w as _,I as k,ag as T,q as R,ah as j,z as U,aK as q}from"./index-BaY5TDP-.js";import{E}from"./el-image-Bg-CwbDE.js";import{e as I}from"./combinationActivity-BFjeGiax.js";import N from"./CombinationTableSelect-h8fPH9rh.js";import"./Dialog-CZSXtzfQ.js";import"./ContentWrap-DKQn7kZm.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";import"./formatter-DdccBgw4.js";import"./formatTime-Dr6TiYYc.js";const z=C({name:"CombinationShowcase",__name:"CombinationShowcase",props:{modelValue:S([Number,Array]).isRequired,limit:f.number.def(Number.MAX_VALUE),disabled:f.bool.def(!1)},emits:["update:modelValue","change"],setup(r,{expose:p,emit:s}){p();const l=r,v=g(()=>!l.disabled&&(!l.limit||a.value.length<l.limit)),a=h([]);V(()=>l.modelValue,async()=>{const e=y(l.modelValue)?l.modelValue:l.modelValue?[l.modelValue]:[];e.length!==0?(a.value.length===0||a.value.some(b=>!e.includes(b.id)))&&(a.value=await I(e)):a.value=[]},{immediate:!0});const c=h(),i=s,t=()=>{if(l.limit===1){const e=a.value.length>0?a.value[0]:null;i("update:modelValue",(e==null?void 0:e.id)||0),i("change",e)}else i("update:modelValue",a.value.map(e=>e.id)),i("change",a.value)},o={props:l,canAdd:v,Activitys:a,combinationActivityTableSelectRef:c,openCombinationActivityTableSelect:()=>{c.value.open(a.value)},handleActivitySelected:e=>{a.value=y(e)?e:[e],t()},handleRemoveActivity:e=>{a.value.splice(e,1),t()},emit:i,emitActivityChange:t,CombinationTableSelect:N};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),D={class:"flex flex-wrap items-center gap-8px"},F={class:"relative h-full w-full"},K=w(z,[["render",function(r,p,s,l,v,a){const c=E,i=U,t=q;return m(),u(A,null,[d("div",D,[(m(!0),u(A,null,x(l.Activitys,(o,e)=>(m(),u("div",{key:o.id,class:"select-box spu-pic"},[n(t,{content:o.name},{default:_(()=>[d("div",F,[n(c,{src:o.picUrl,class:"h-full w-full"},null,8,["src"]),k(n(i,{class:"del-icon",icon:"ep:circle-close-filled",onClick:b=>l.handleRemoveActivity(e)},null,8,["onClick"]),[[T,!s.disabled]])])]),_:2},1032,["content"])]))),128)),l.canAdd?(m(),R(t,{key:0,content:"\u9009\u62E9\u6D3B\u52A8"},{default:_(()=>[d("div",{class:"select-box",onClick:l.openCombinationActivityTableSelect},[n(i,{icon:"ep:plus"})])]),_:1})):j("",!0)]),n(l.CombinationTableSelect,{ref:"combinationActivityTableSelectRef",multiple:s.limit!=1,onChange:l.handleActivitySelected},null,8,["multiple"])],64)}],["__scopeId","data-v-3de78326"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/combination/components/CombinationShowcase.vue"]]);export{K as default};
