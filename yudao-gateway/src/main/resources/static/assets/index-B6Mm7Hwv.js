import{d as z,r as n,u as E,S as C,C as D,D as I,a as B,_ as x,c as A,I as F,q as y,w as l,k as a,F as S,v as T,R as V,o as _,m as h,ah as j,N as k,A as N,B as H}from"./index-BaY5TDP-.js";import{g as M,_ as O}from"./index-fxekK-Kb.js";import{u as q}from"./tagsView-lnAkwTv2.js";import{b as Q}from"./index-ndAUlMgd.js";import U from"./ReceivablePlanDetailsHeader-Dwx27ATK.js";import W from"./ReceivablePlanDetailsInfo-B8I2PfUZ.js";import G from"./PermissionList-CbQig5nT.js";import{B as L}from"./index-BlslFSYd.js";import J from"./ReceivablePlanForm-CXCxBqXI.js";import"./el-timeline-item-BFYwlQ-d.js";import"./formatTime-Dr6TiYYc.js";import"./ContentWrap-DKQn7kZm.js";import"./el-descriptions-item-CRF_CO88.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";import"./PermissionForm-jo-CjsNU.js";import"./Dialog-CZSXtzfQ.js";import"./index-CuAlllbQ.js";import"./index-h6ObHKtQ.js";import"./index-B97LdofC.js";const K=x(z({name:"CrmReceivablePlanDetail",__name:"index",setup(w,{expose:i}){i();const d=I(),e=n(0),o=n(!0),v=n({}),b=n(),t=async r=>{o.value=!0;try{v.value=await Q(r),await p(r)}finally{o.value=!1}},m=n(),u=n([]),p=async r=>{if(!r)return;const R=await M({bizType:L.CRM_RECEIVABLE_PLAN,bizId:r});u.value=R.list},{delView:c}=q(),{currentRoute:s}=E(),f=()=>{c(B(s))},{params:P}=C();D(async()=>{if(!P.id)return d.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u8BA1\u5212\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void f();e.value=P.id,await t(e.value)});const g={message:d,receivablePlanId:e,loading:o,receivablePlan:v,permissionListRef:b,getReceivablePlan:t,formRef:m,openForm:(r,R)=>{m.value.open(r,R)},logList:u,getOperateLog:p,delView:c,currentRoute:s,close:f,params:P,ReceivablePlanDetailsHeader:U,ReceivablePlanDetailsInfo:W,PermissionList:G,get BizTypeEnum(){return L},ReceivablePlanForm:J};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(w,i,d,e,o,v){const b=k,t=N,m=O,u=H,p=T,c=V;return _(),A(S,null,[F((_(),y(e.ReceivablePlanDetailsHeader,{"receivable-plan":e.receivablePlan},{default:l(()=>{var s;return[(s=e.permissionListRef)!=null&&s.validateWrite?(_(),y(b,{key:0,onClick:i[0]||(i[0]=f=>e.openForm("update",e.receivablePlan.id))},{default:l(()=>i[2]||(i[2]=[h(" \u7F16\u8F91 ")])),_:1})):j("",!0)]}),_:1},8,["receivable-plan"])),[[c,e.loading]]),a(p,null,{default:l(()=>[a(u,null,{default:l(()=>[a(t,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:l(()=>[a(e.ReceivablePlanDetailsInfo,{"receivable-plan":e.receivablePlan},null,8,["receivable-plan"])]),_:1}),a(t,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:l(()=>[a(m,{"log-list":e.logList},null,8,["log-list"])]),_:1}),a(t,{label:"\u56E2\u961F\u6210\u5458"},{default:l(()=>[a(e.PermissionList,{ref:"permissionListRef","biz-id":e.receivablePlan.id,"biz-type":e.BizTypeEnum.CRM_RECEIVABLE_PLAN,"show-action":!0,onQuitTeam:e.close},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),a(e.ReceivablePlanForm,{ref:"formRef",onSuccess:i[1]||(i[1]=s=>e.getReceivablePlan(e.receivablePlan.id))},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/receivable/plan/detail/index.vue"]]);export{K as default};
