import{d as L,D as T,r as g,f as k,eI as A,aA as w,cv as B,_ as E,X as I,o as h,q as R,w as u,j,k as t,I as D,m as U,z as O,N as Y,v as X,E as q,l as z}from"./index-BaY5TDP-.js";import{E as G}from"./el-skeleton-item-BYAIkmCs.js";import{_ as N}from"./Echart-BQxFkezy.js";import{_ as Z}from"./index-BYWVnEtA.js";import{P as C}from"./product-BL6PUJpk.js";import{S as H}from"./index-DYEmSFQB.js";import{d as J}from"./download-oWiM5xVU.js";import{C as K}from"./CardTitle-Z2xLAPly.js";import{n as M,f as Q}from"./formatTime-Dr6TiYYc.js";import"./echarts-DpbyC_6K.js";import"./CountTo-DJpCwbFz.js";const V={class:"flex flex-row items-center justify-between"},W=E(L({name:"ProductSummary",__name:"ProductSummary",setup(_,{expose:f}){f();const P=T(),e=g(!0),x=g(!1),b=g(),m=g(),d=k({dataset:{dimensions:["time","browseCount","browseUserCount","orderPayPrice","afterSaleRefundPrice"],source:[]},grid:{left:20,right:20,bottom:20,top:80,containLabel:!0},legend:{top:50},series:[{name:"\u5546\u54C1\u6D4F\u89C8\u91CF",type:"line",smooth:!0,itemStyle:{color:"#B37FEB"}},{name:"\u5546\u54C1\u8BBF\u5BA2\u6570",type:"line",smooth:!0,itemStyle:{color:"#FFAB2B"}},{name:"\u652F\u4ED8\u91D1\u989D",type:"bar",smooth:!0,yAxisIndex:1,itemStyle:{color:"#1890FF"}},{name:"\u9000\u6B3E\u91D1\u989D",type:"bar",smooth:!0,yAxisIndex:1,itemStyle:{color:"#00C050"}}],toolbox:{feature:{dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u5546\u54C1\u72B6\u51B5"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},xAxis:{type:"category",boundaryGap:!0,axisTick:{show:!1}},yAxis:[{type:"value",name:"\u91D1\u989D",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#7F8B9C"}},splitLine:{show:!0,lineStyle:{color:"#F5F7F9"}}},{type:"value",name:"\u6570\u91CF",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#7F8B9C"}},splitLine:{show:!0,lineStyle:{color:"#F5F7F9"}}}]}),S=async()=>{const s=m.value.times;b.value=await C.getProductStatisticsAnalyse({times:s})},c=async()=>{const s=m.value.times,p=await C.getProductStatisticsList({times:s});for(let y of p)y.orderPayPrice=w(y.orderPayPrice),y.afterSaleRefundPrice=w(y.afterSaleRefundPrice);d.dataset&&d.dataset.source&&(d.dataset.source=p)},v={message:P,trendLoading:e,exportLoading:x,trendSummary:b,shortcutDateRangePicker:m,lineChartOptions:d,getProductTrendData:async()=>{e.value=!0;const s=m.value.times;M(s[0],s[1])&&(s[0]=Q(B(s[0]).subtract(1,"d"))),await Promise.all([S(),c()]),e.value=!1},getProductTrendSummary:S,getProductStatisticsList:c,handleExport:async()=>{try{await P.exportConfirm(),x.value=!0;const s=m.value.times,p=await C.exportProductStatisticsExcel({times:s});J.excel(p,"\u5546\u54C1\u72B6\u51B5.xls")}catch{}finally{x.value=!1}},SummaryCard:H,get calculateRelativeRate(){return A},get fenToYuan(){return w},get CardTitle(){return K}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),[["render",function(_,f,P,e,x,b){const m=O,d=Y,S=Z,c=X,v=q,s=N,p=G,y=z,F=I("hasPermi");return h(),R(y,{shadow:"never"},{header:u(()=>[j("div",V,[t(e.CardTitle,{title:"\u5546\u54C1\u6982\u51B5"}),t(S,{ref:"shortcutDateRangePicker",onChange:e.getProductTrendData},{default:u(()=>[D((h(),R(d,{class:"ml-4",onClick:e.handleExport,loading:e.exportLoading},{default:u(()=>[t(m,{icon:"ep:download",class:"mr-1"}),f[0]||(f[0]=U("\u5BFC\u51FA "))]),_:1},8,["loading"])),[[F,["statistics:product:export"]]])]),_:1},512)])]),default:u(()=>[t(v,{gutter:16},{default:u(()=>[t(c,{xl:4,md:8,sm:24},{default:u(()=>{var a,o,r,l,i,n;return[t(e.SummaryCard,{title:"\u5546\u54C1\u6D4F\u89C8\u91CF",tooltip:"\u5728\u9009\u5B9A\u6761\u4EF6\u4E0B\uFF0C\u6240\u6709\u5546\u54C1\u8BE6\u60C5\u9875\u88AB\u8BBF\u95EE\u7684\u6B21\u6570\uFF0C\u4E00\u4E2A\u4EBA\u5728\u7EDF\u8BA1\u65F6\u95F4\u5185\u8BBF\u95EE\u591A\u6B21\u8BB0\u4E3A\u591A\u6B21",icon:"ep:view","icon-color":"bg-blue-100","icon-bg-color":"text-blue-500",prefix:"",decimals:0,value:((o=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:o.browseCount)||0,percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.browseCount,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.browseCount)},null,8,["value","percent"])]}),_:1}),t(c,{xl:4,md:8,sm:24},{default:u(()=>{var a,o,r,l,i,n;return[t(e.SummaryCard,{title:"\u5546\u54C1\u8BBF\u5BA2\u6570",tooltip:"\u5728\u9009\u5B9A\u6761\u4EF6\u4E0B\uFF0C\u8BBF\u95EE\u4EFB\u4F55\u5546\u54C1\u8BE6\u60C5\u9875\u7684\u4EBA\u6570\uFF0C\u4E00\u4E2A\u4EBA\u5728\u7EDF\u8BA1\u65F6\u95F4\u8303\u56F4\u5185\u8BBF\u95EE\u591A\u6B21\u53EA\u8BB0\u4E3A\u4E00\u4E2A",icon:"ep:user-filled","icon-color":"bg-purple-100","icon-bg-color":"text-purple-500",prefix:"",decimals:0,value:((o=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:o.browseUserCount)||0,percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.browseUserCount,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.browseUserCount)},null,8,["value","percent"])]}),_:1}),t(c,{xl:4,md:8,sm:24},{default:u(()=>{var a,o,r,l,i,n;return[t(e.SummaryCard,{title:"\u652F\u4ED8\u4EF6\u6570",tooltip:"\u5728\u9009\u5B9A\u6761\u4EF6\u4E0B\uFF0C\u6210\u529F\u4ED8\u6B3E\u8BA2\u5355\u7684\u5546\u54C1\u4EF6\u6570\u4E4B\u548C",icon:"fa-solid:money-check-alt","icon-color":"bg-yellow-100","icon-bg-color":"text-yellow-500",prefix:"",decimals:0,value:((o=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:o.orderPayCount)||0,percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.orderPayCount,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.orderPayCount)},null,8,["value","percent"])]}),_:1}),t(c,{xl:4,md:8,sm:24},{default:u(()=>{var a,o,r,l,i,n;return[t(e.SummaryCard,{title:"\u652F\u4ED8\u91D1\u989D",tooltip:"\u5728\u9009\u5B9A\u6761\u4EF6\u4E0B\uFF0C\u6210\u529F\u4ED8\u6B3E\u8BA2\u5355\u7684\u5546\u54C1\u91D1\u989D\u4E4B\u548C",icon:"ep:warning-filled","icon-color":"bg-green-100","icon-bg-color":"text-green-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((o=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:o.orderPayPrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.orderPayPrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.orderPayPrice)},null,8,["value","percent"])]}),_:1}),t(c,{xl:4,md:8,sm:24},{default:u(()=>{var a,o,r,l,i,n;return[t(e.SummaryCard,{title:"\u9000\u6B3E\u4EF6\u6570",tooltip:"\u5728\u9009\u5B9A\u6761\u4EF6\u4E0B\uFF0C\u6210\u529F\u9000\u6B3E\u7684\u5546\u54C1\u4EF6\u6570\u4E4B\u548C",icon:"fa-solid:wallet","icon-color":"bg-cyan-100","icon-bg-color":"text-cyan-500",prefix:"",decimals:0,value:((o=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:o.afterSaleCount)||0,percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.afterSaleCount,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.afterSaleCount)},null,8,["value","percent"])]}),_:1}),t(c,{xl:4,md:8,sm:24},{default:u(()=>{var a,o,r,l,i,n;return[t(e.SummaryCard,{title:"\u9000\u6B3E\u91D1\u989D",tooltip:"\u5728\u9009\u5B9A\u6761\u4EF6\u4E0B\uFF0C\u6210\u529F\u9000\u6B3E\u7684\u5546\u54C1\u91D1\u989D\u4E4B\u548C",icon:"fa-solid:award","icon-color":"bg-yellow-100","icon-bg-color":"text-yellow-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((o=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:o.afterSaleRefundPrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.afterSaleRefundPrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.afterSaleRefundPrice)},null,8,["value","percent"])]}),_:1})]),_:1}),t(p,{loading:e.trendLoading,animated:""},{default:u(()=>[t(s,{height:500,options:e.lineChartOptions},null,8,["options"])]),_:1},8,["loading"])]),_:1})}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/statistics/product/components/ProductSummary.vue"]]);export{W as default};
