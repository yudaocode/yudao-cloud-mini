import{d as C,r as g,f as h,C as v,_ as w,o as f,c as _,k as t,w as m,I as b,q as D,F as A,l as I,P,Q as q,R as B}from"./index-BaY5TDP-.js";import{E as U}from"./el-skeleton-item-BYAIkmCs.js";import{_ as S}from"./Echart-BQxFkezy.js";import{S as c}from"./customer-DKZgktXn.js";import"./echarts-DpbyC_6K.js";const O=w(C({name:"CustomerDealCycleByUser",__name:"CustomerDealCycleByUser",props:{queryParams:{type:null,required:!0}},setup(y,{expose:x}){const r=y,a=g(!1),d=g([]),e=h({grid:{left:20,right:40,bottom:20,containLabel:!0},legend:{},series:[{name:"\u6210\u4EA4\u5468\u671F(\u5929)",type:"bar",data:[],yAxisIndex:0},{name:"\u6210\u4EA4\u5BA2\u6237\u6570",type:"bar",data:[],yAxisIndex:1}],toolbox:{feature:{dataZoom:{xAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u6210\u4EA4\u5468\u671F\u5206\u6790"}}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"\u6210\u4EA4\u5468\u671F(\u5929)",min:0,minInterval:1},{type:"value",name:"\u6210\u4EA4\u5BA2\u6237\u6570",min:0,minInterval:1,splitLine:{lineStyle:{type:"dotted",opacity:.7}}}],xAxis:{type:"category",name:"\u65E5\u671F",data:[]}}),o=async()=>{const s=await c.getCustomerDealCycleByDate(r.queryParams),u=await c.getCustomerSummaryByDate(r.queryParams),p=await c.getCustomerDealCycleByUser(r.queryParams);e.xAxis&&e.xAxis.data&&(e.xAxis.data=s.map(n=>n.time)),e.series&&e.series[0]&&e.series[0].data&&(e.series[0].data=s.map(n=>n.customerDealCycle)),e.series&&e.series[1]&&e.series[1].data&&(e.series[1].data=u.map(n=>n.customerDealCount)),d.value=p},i=async()=>{a.value=!0;try{await o()}finally{a.value=!1}};x({loadData:i}),v(()=>{i()});const l={props:r,loading:a,list:d,echartsOption:e,fetchAndFill:o,loadData:i};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),[["render",function(y,x,r,a,d,e){const o=S,i=U,l=I,s=P,u=q,p=B;return f(),_(A,null,[t(l,{shadow:"never"},{default:m(()=>[t(i,{loading:a.loading,animated:""},{default:m(()=>[t(o,{height:500,options:a.echartsOption},null,8,["options"])]),_:1},8,["loading"])]),_:1}),t(l,{shadow:"never",class:"mt-16px"},{default:m(()=>[b((f(),D(u,{data:a.list},{default:m(()=>[t(s,{label:"\u5E8F\u53F7",align:"center",type:"index",width:"80"}),t(s,{label:"\u65E5\u671F",align:"center",prop:"ownerUserName","min-width":"200"}),t(s,{label:"\u6210\u4EA4\u5468\u671F(\u5929)",align:"center",prop:"customerDealCycle","min-width":"200"}),t(s,{label:"\u6210\u4EA4\u5BA2\u6237\u6570",align:"center",prop:"customerDealCount","min-width":"200"})]),_:1},8,["data"])),[[p,a.loading]])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/statistics/customer/components/CustomerDealCycleByUser.vue"]]);export{O as default};
