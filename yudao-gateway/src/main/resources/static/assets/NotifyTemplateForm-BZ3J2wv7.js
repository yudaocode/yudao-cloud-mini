import{d as F,D as I,r as i,f as O,G as q,U as L,_ as w,o as n,q as _,w as r,k as o,m as y,I as C,c as T,F as k,n as E,t as N,Z as P,L as S,J as Y,K as R,ak as x,al as A,O as M,N as j,R as B}from"./index-BaY5TDP-.js";import{_ as G}from"./Dialog-CZSXtzfQ.js";import{g as J,c as K,u as Z}from"./index-De-6uoDU.js";import{C as U}from"./constants-CEEr2azc.js";const z=w(F({__name:"NotifyTemplateForm",emits:["success"],setup(h,{expose:l,emit:D}){const e=I(),p=i(!1),b=i(""),t=i(!1),u=i(""),m=i({id:void 0,name:"",nickname:"",code:"",content:"",type:void 0,params:"",status:U.ENABLE,remark:""}),V=O({type:[{required:!0,message:"\u6D88\u606F\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],code:[{required:!0,message:"\u6A21\u677F\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6A21\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nickname:[{required:!0,message:"\u53D1\u4EF6\u4EBA\u59D3\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u6A21\u677F\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=i(),c=async(s,a)=>{if(p.value=!0,b.value=s,u.value=s,f(),a){t.value=!0;try{m.value=await J(a)}finally{t.value=!1}}};l({open:c});const g=D,f=()=>{var s;m.value={id:void 0,name:"",nickname:"",code:"",content:"",type:void 0,params:"",status:U.ENABLE,remark:""},(s=d.value)==null||s.resetFields()},v={message:e,dialogVisible:p,dialogTitle:b,formLoading:t,formType:u,formData:m,formRules:V,formRef:d,open:c,emit:g,submitForm:async()=>{if(d&&await d.value.validate()){t.value=!0;try{const s=m.value;u.value==="create"?(await K(s),e.success("\u65B0\u589E\u6210\u529F")):(await Z(s),e.success("\u4FEE\u6539\u6210\u529F")),p.value=!1,g("success")}finally{t.value=!1}}},resetForm:f,get DICT_TYPE(){return q},get getIntDictOptions(){return L}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),[["render",function(h,l,D,e,p,b){const t=P,u=S,m=Y,V=R,d=x,c=A,g=M,f=j,v=G,s=B;return n(),_(v,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":l[8]||(l[8]=a=>e.dialogVisible=a)},{footer:r(()=>[o(f,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:r(()=>l[9]||(l[9]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),o(f,{onClick:l[7]||(l[7]=a=>e.dialogVisible=!1)},{default:r(()=>l[10]||(l[10]=[y("\u53D6 \u6D88")])),_:1})]),default:r(()=>[C((n(),_(g,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"140px"},{default:r(()=>[o(u,{label:"\u6A21\u7248\u7F16\u7801",prop:"code"},{default:r(()=>[o(t,{modelValue:e.formData.code,"onUpdate:modelValue":l[0]||(l[0]=a=>e.formData.code=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u7248\u7F16\u7801"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u6A21\u677F\u540D\u79F0",prop:"name"},{default:r(()=>[o(t,{modelValue:e.formData.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.formData.name=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u7248\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u53D1\u4EF6\u4EBA\u540D\u79F0",prop:"nickname"},{default:r(()=>[o(t,{modelValue:e.formData.nickname,"onUpdate:modelValue":l[2]||(l[2]=a=>e.formData.nickname=a),placeholder:"\u8BF7\u8F93\u5165\u53D1\u4EF6\u4EBA\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u6A21\u677F\u5185\u5BB9",prop:"content"},{default:r(()=>[o(t,{type:"textarea",modelValue:e.formData.content,"onUpdate:modelValue":l[3]||(l[3]=a=>e.formData.content=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),o(u,{label:"\u7C7B\u578B",prop:"type"},{default:r(()=>[o(V,{modelValue:e.formData.type,"onUpdate:modelValue":l[4]||(l[4]=a=>e.formData.type=a),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},{default:r(()=>[(n(!0),T(k,null,E(e.getIntDictOptions(e.DICT_TYPE.SYSTEM_NOTIFY_TEMPLATE_TYPE),a=>(n(),_(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:r(()=>[o(c,{modelValue:e.formData.status,"onUpdate:modelValue":l[5]||(l[5]=a=>e.formData.status=a)},{default:r(()=>[(n(!0),T(k,null,E(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),a=>(n(),_(d,{key:a.value,value:a.value},{default:r(()=>[y(N(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"\u5907\u6CE8",prop:"remark"},{default:r(()=>[o(t,{modelValue:e.formData.remark,"onUpdate:modelValue":l[6]||(l[6]=a=>e.formData.remark=a),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[s,e.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/system/notify/template/NotifyTemplateForm.vue"]]);export{z as default};
