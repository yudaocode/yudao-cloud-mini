import{d as I,D as L,g as N,r as i,f as E,C as Q,G as U,e2 as V,_ as D,X as R,o as m,c as z,k as a,w as l,Y as O,m as c,I as P,q as _,F as Y,Z as j,L as M,z as A,N as G,O as K,P as X,Q as Z,R as B}from"./index-BaY5TDP-.js";import{_ as H}from"./index-avjYFQiD.js";import{_ as J}from"./DictTag-QtcI9ZjC.js";import{_ as W}from"./ContentWrap-DKQn7kZm.js";import{E as $}from"./el-tree-select-DphqCDCz.js";import{_ as ee}from"./index-BAz6Gqim.js";import{d as ae}from"./formatTime-Dr6TiYYc.js";import{d as re}from"./download-oWiM5xVU.js";import{P as F}from"./index-CJwxK5Qx.js";import{P as le}from"./index-B2KWfNxB.js";import te from"./ProductForm-D3ZGOks5.js";import{h as oe,d as pe}from"./tree-z7HkrWVC.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./index-CRTwLgwp.js";import"./constants-CEEr2azc.js";const ne=D(I({name:"ErpProduct",__name:"index",setup(q,{expose:r}){r();const f=L(),{t:e}=N(),b=i(!0),C=i([]),h=i(0),u=E({pageNo:1,pageSize:10,name:void 0,categoryId:void 0}),d=i(),g=i(!1),s=i([]),n=async()=>{b.value=!0;try{const p=await F.getProductPage(u);C.value=p.list,h.value=p.total}finally{b.value=!1}},x=()=>{u.pageNo=1,n()},y=i();Q(async()=>{await n();const p=await le.getProductCategorySimpleList();s.value=oe(p,"id","parentId")});const t={message:f,t:e,loading:b,list:C,total:h,queryParams:u,queryFormRef:d,exportLoading:g,categoryList:s,getList:n,handleQuery:x,resetQuery:()=>{d.value.resetFields(),x()},formRef:y,openForm:(p,v)=>{y.value.open(p,v)},handleDelete:async p=>{try{await f.delConfirm(),await F.deleteProduct(p),f.success(e("common.delSuccess")),await n()}catch{}},handleExport:async()=>{try{await f.exportConfirm(),g.value=!0;const p=await F.exportProduct(u);re.excel(p,"\u4EA7\u54C1.xls")}catch{}finally{g.value=!1}},get dateFormatter(){return ae},ProductForm:te,get DICT_TYPE(){return U},get defaultProps(){return pe},get erpPriceTableColumnFormatter(){return V}};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),[["render",function(q,r,f,e,b,C){const h=ee,u=j,d=M,g=$,s=A,n=G,x=K,y=W,t=X,p=J,v=Z,k=H,w=R("hasPermi"),T=B;return m(),z(Y,null,[a(h,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u4FE1\u606F\u3001\u5206\u7C7B\u3001\u5355\u4F4D",url:"https://doc.iocoder.cn/erp/product/"}),a(y,null,{default:l(()=>[a(x,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:l(()=>[a(d,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[a(u,{modelValue:e.queryParams.name,"onUpdate:modelValue":r[0]||(r[0]=o=>e.queryParams.name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:O(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(d,{label:"\u5206\u7C7B",prop:"categoryId"},{default:l(()=>[a(g,{modelValue:e.queryParams.categoryId,"onUpdate:modelValue":r[1]||(r[1]=o=>e.queryParams.categoryId=o),data:e.categoryList,props:e.defaultProps,"check-strictly":"","default-expand-all":"",placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B",class:"!w-240px"},null,8,["modelValue","data","props"])]),_:1}),a(d,null,{default:l(()=>[a(n,{onClick:e.handleQuery},{default:l(()=>[a(s,{icon:"ep:search",class:"mr-5px"}),r[5]||(r[5]=c(" \u641C\u7D22"))]),_:1}),a(n,{onClick:e.resetQuery},{default:l(()=>[a(s,{icon:"ep:refresh",class:"mr-5px"}),r[6]||(r[6]=c(" \u91CD\u7F6E"))]),_:1}),P((m(),_(n,{type:"primary",plain:"",onClick:r[2]||(r[2]=o=>e.openForm("create"))},{default:l(()=>[a(s,{icon:"ep:plus",class:"mr-5px"}),r[7]||(r[7]=c(" \u65B0\u589E "))]),_:1})),[[w,["erp:product:create"]]]),P((m(),_(n,{type:"success",plain:"",onClick:e.handleExport,loading:e.exportLoading},{default:l(()=>[a(s,{icon:"ep:download",class:"mr-5px"}),r[8]||(r[8]=c(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[w,["erp:product:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(y,null,{default:l(()=>[P((m(),_(v,{data:e.list,stripe:!0,"show-overflow-tooltip":!0},{default:l(()=>[a(t,{label:"\u6761\u7801",align:"center",prop:"barCode"}),a(t,{label:"\u540D\u79F0",align:"center",prop:"name"}),a(t,{label:"\u89C4\u683C",align:"center",prop:"standard"}),a(t,{label:"\u5206\u7C7B",align:"center",prop:"categoryName"}),a(t,{label:"\u5355\u4F4D",align:"center",prop:"unitName"}),a(t,{label:"\u91C7\u8D2D\u4EF7\u683C",align:"center",prop:"purchasePrice",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),a(t,{label:"\u9500\u552E\u4EF7\u683C",align:"center",prop:"salePrice",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),a(t,{label:"\u6700\u4F4E\u4EF7\u683C",align:"center",prop:"minPrice",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),a(t,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:l(o=>[a(p,{type:e.DICT_TYPE.COMMON_STATUS,value:o.row.status},null,8,["type","value"])]),_:1}),a(t,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e.dateFormatter,width:"180px"},null,8,["formatter"]),a(t,{label:"\u64CD\u4F5C",align:"center",width:"110"},{default:l(o=>[P((m(),_(n,{link:"",type:"primary",onClick:S=>e.openForm("update",o.row.id)},{default:l(()=>r[9]||(r[9]=[c(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[w,["erp:product:update"]]]),P((m(),_(n,{link:"",type:"danger",onClick:S=>e.handleDelete(o.row.id)},{default:l(()=>r[10]||(r[10]=[c(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[w,["erp:product:delete"]]])]),_:1})]),_:1},8,["data"])),[[T,e.loading]]),a(k,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":r[3]||(r[3]=o=>e.queryParams.pageNo=o),limit:e.queryParams.pageSize,"onUpdate:limit":r[4]||(r[4]=o=>e.queryParams.pageSize=o),onPagination:e.getList},null,8,["total","page","limit"])]),_:1}),a(e.ProductForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/product/product/index.vue"]]);export{ne as default};
