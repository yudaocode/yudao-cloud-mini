import{_ as X}from"./ComponentContainerProperty-DsmenGcb.js";import{fo as j,fp as $,er as G,d as R,b3 as N,fq as q,r as D,_ as S,o as w,c as x,k as u,w as v,m as T,j as A,F as H,n as P,aF as Z,t as Y,z as Q,N as F,eQ as B,b8 as J,co as K,L as ee,O as te}from"./index-BaY5TDP-.js";import{_ as oe}from"./AppLinkSelectDialog-2u1IjOJv.js";import{_ as le}from"./Dialog-CZSXtzfQ.js";import{E as ae}from"./el-image-Bg-CwbDE.js";import"./index-m-aKZF12.js";import"./color-BN7ZL7BD.js";import"./ProductCategorySelect-ClWAu1VZ.js";import"./el-tree-select-DphqCDCz.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";var se=Array.prototype.splice;function ne(a,l){var m=[];if(!a||!a.length)return m;var t=-1,c=[],d=a.length;for(l=G(l);++t<d;){var i=a[t];l(i,t,a)&&(m.push(i),c.push(t))}return function(n,r){for(var p=n?r.length:0,g=p-1;p--;){var s=r[p];if(p==g||s!==f){var f=s;j(s)?se.call(n,s,1):$(n,s)}}}(a,c),m}const E=100;var _=(a=>(a[a.LEFT=0]="LEFT",a[a.TOP=1]="TOP",a[a.WIDTH=2]="WIDTH",a[a.HEIGHT=3]="HEIGHT",a))(_||{});const ie=[{position:"\u5DE6\u4E0A\u89D2",types:[0,1,2,3],style:{left:"-5px",top:"-5px",cursor:"nwse-resize"}},{position:"\u4E0A\u65B9\u4E2D\u95F4",types:[1,3],style:{left:"50%",top:"-5px",cursor:"n-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0A\u89D2",types:[1,2,3],style:{right:"-5px",top:"-5px",cursor:"nesw-resize"}},{position:"\u53F3\u4FA7\u4E2D\u95F4",types:[2],style:{right:"-5px",top:"50%",cursor:"e-resize",transform:"translateX(-50%)"}},{position:"\u53F3\u4E0B\u89D2",types:[2,3],style:{right:"-5px",bottom:"-5px",cursor:"nwse-resize"}},{position:"\u4E0B\u65B9\u4E2D\u95F4",types:[3],style:{left:"50%",bottom:"-5px",cursor:"s-resize",transform:"translateX(-50%)"}},{position:"\u5DE6\u4E0B\u89D2",types:[0,2,3],style:{left:"-5px",bottom:"-5px",cursor:"nesw-resize"}},{position:"\u5DE6\u4FA7\u4E2D\u95F4",types:[0,2],style:{left:"-5px",top:"50%",cursor:"w-resize",transform:"translateX(-50%)"}}],M=(a,l,m)=>{l.stopPropagation();const{clientX:t,clientY:c}=l,{left:d,top:i,width:n,height:r}=a;document.onmousemove=p=>{const g=p.clientX-t,s=p.clientY-c;m(d,i,n,r,g,s)},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}},re=R({name:"HotZoneEditDialog",__name:"index",props:{modelValue:N(),imgUrl:q().def("")},emits:["update:modelValue"],setup(a,{expose:l,emit:m}){const t=a,c=m,d=D([]),i=D(!1),n=()=>{var e;d.value=(e=t.modelValue,(e==null?void 0:e.map(o=>({...o,left:o.left*=2,top:o.top*=2,width:o.width*=2,height:o.height*=2})))||[]),i.value=!0};l({open:n});const r=D(),p=(e,o)=>{o>=0&&o<=r.value.offsetWidth-e.width&&(e.left=o)},g=(e,o)=>{o>=0&&o<=r.value.offsetHeight-e.height&&(e.top=o)},s=(e,o)=>{o>=E&&e.left+o<=r.value.offsetWidth&&(e.width=o)},f=(e,o)=>{o>=E&&e.top+o<=r.value.offsetHeight&&(e.height=o)},h=D(),b=D(),V={props:t,emit:c,formData:d,dialogVisible:i,open:n,container:r,handleAdd:()=>{d.value.push({width:E,height:E,top:0,left:0})},handleRemove:e=>{ne(d.value,e)},handleMove:(e,o)=>{M(e,o,(y,L,C,U,O,k)=>{p(e,y+O),g(e,L+k)})},handleResize:(e,o,y)=>{M(e,y,(L,C,U,O,k,I)=>{o.types.forEach(W=>{switch(W){case _.LEFT:p(e,L+k);break;case _.TOP:g(e,C+I);break;case _.WIDTH:{const z=o.types.includes(_.LEFT)?-1:1;s(e,U+k*z)}break;case _.HEIGHT:{const z=o.types.includes(_.TOP)?-1:1;f(e,O+I*z)}}})})},setLeft:p,setTop:g,setWidth:s,setHeight:f,handleSubmit:()=>{i.value=!1},handleClose:()=>{const e=(o=>(o==null?void 0:o.map(y=>({...y,left:y.left/=2,top:y.top/=2,width:y.width/=2,height:y.height/=2})))||[])(d.value);c("update:modelValue",e)},activeHotZone:h,appLinkDialogRef:b,handleShowAppLinkDialog:e=>{h.value=e,b.value.open(e.url)},handleAppLinkChange:e=>{e&&h.value&&(h.value.name=e.name,h.value.url=e.path)},get CONTROL_DOT_LIST(){return ie}};return Object.defineProperty(V,"__isScriptSetup",{enumerable:!1,value:!0}),V}}),pe={ref:"container",class:"relative h-full w-750px"},ue=["onMousedown","onDblclick"],de={class:"pointer-events-none select-none"},me=["onMousedown"],ce=S(re,[["render",function(a,l,m,t,c,d){const i=ae,n=Q,r=F,p=le,g=oe;return w(),x(H,null,[u(p,{modelValue:t.dialogVisible,"onUpdate:modelValue":l[0]||(l[0]=s=>t.dialogVisible=s),title:"\u8BBE\u7F6E\u70ED\u533A",width:"780",onClose:t.handleClose},{footer:v(()=>[u(r,{onClick:t.handleAdd,type:"primary",plain:""},{default:v(()=>[u(n,{icon:"ep:plus",class:"mr-5px"}),l[1]||(l[1]=T(" \u6DFB\u52A0\u70ED\u533A "))]),_:1}),u(r,{onClick:t.handleSubmit,type:"primary",plain:""},{default:v(()=>[u(n,{icon:"ep:check",class:"mr-5px"}),l[2]||(l[2]=T(" \u786E\u5B9A "))]),_:1})]),default:v(()=>[A("div",pe,[u(i,{src:m.imgUrl,class:"pointer-events-none h-full w-750px select-none"},null,8,["src"]),(w(!0),x(H,null,P(t.formData,(s,f)=>(w(),x("div",{key:f,class:"hot-zone",style:Z({width:`${s.width}px`,height:`${s.height}px`,top:`${s.top}px`,left:`${s.left}px`}),onMousedown:h=>t.handleMove(s,h),onDblclick:h=>t.handleShowAppLinkDialog(s)},[A("span",de,Y(s.name||"\u53CC\u51FB\u9009\u62E9\u94FE\u63A5"),1),u(n,{icon:"ep:close",class:"delete",size:14,onClick:h=>t.handleRemove(s)},null,8,["onClick"]),(w(!0),x(H,null,P(t.CONTROL_DOT_LIST,(h,b)=>(w(),x("span",{class:"ctrl-dot",key:b,style:Z(h.style),onMousedown:V=>t.handleResize(s,h,V)},null,44,me))),128))],44,ue))),128))],512)]),_:1},8,["modelValue"]),u(g,{ref:"appLinkDialogRef",onAppLinkChange:t.handleAppLinkChange},null,512)],64)}],["__scopeId","data-v-e60b1a26"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/DiyEditor/components/mobile/HotZone/components/HotZoneEditDialog/index.vue"]]),fe=S(R({name:"HotZoneProperty",__name:"property",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(a,{expose:l,emit:m}){l();const t=a,c=m,d=B(t,"modelValue",c),i=D(),n={props:t,emit:c,formData:d,editDialogRef:i,handleOpenEditDialog:()=>{i.value.open()},HotZoneEditDialog:ce};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),[["render",function(a,l,m,t,c,d){const i=J,n=K,r=ee,p=te,g=F,s=X;return w(),x(H,null,[u(s,{modelValue:t.formData.style,"onUpdate:modelValue":l[1]||(l[1]=f=>t.formData.style=f)},{default:v(()=>[u(p,{"label-width":"80px",model:t.formData,class:"m-t-8px"},{default:v(()=>[u(r,{label:"\u4E0A\u4F20\u56FE\u7247",prop:"imgUrl"},{default:v(()=>[u(n,{modelValue:t.formData.imgUrl,"onUpdate:modelValue":l[0]||(l[0]=f=>t.formData.imgUrl=f),height:"50px",width:"auto",class:"min-w-80px"},{tip:v(()=>[u(i,{type:"info",size:"small"},{default:v(()=>l[3]||(l[3]=[T(" \u63A8\u8350\u5BBD\u5EA6 750")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),u(g,{type:"primary",plain:"",class:"w-full",onClick:t.handleOpenEditDialog},{default:v(()=>l[4]||(l[4]=[T(" \u8BBE\u7F6E\u70ED\u533A ")])),_:1})]),_:1},8,["modelValue"]),u(t.HotZoneEditDialog,{ref:"editDialogRef",modelValue:t.formData.list,"onUpdate:modelValue":l[2]||(l[2]=f=>t.formData.list=f),"img-url":t.formData.imgUrl},null,8,["modelValue","img-url"])],64)}],["__scopeId","data-v-1dfabffd"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/DiyEditor/components/mobile/HotZone/property.vue"]]);export{fe as default};
