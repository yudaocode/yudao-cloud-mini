import{d as L,f as S,e as U,r as o,b as z,au as T,C as A,_ as F,o as I,c as D,k as a,w as s,F as C,n as Q,q as Y,m as V,M as B,L as M,J as j,K as H,z as O,N as E,O as J,A as K,B as N,v as G}from"./index-BaY5TDP-.js";import{_ as W}from"./ContentWrap-DKQn7kZm.js";import{E as X}from"./el-tree-select-DphqCDCz.js";import{g as Z}from"./index-dK17nfjs.js";import{g as $}from"./index-CuAlllbQ.js";import{f as x,e as ee,g as ae,h as re}from"./formatTime-Dr6TiYYc.js";import{h as g,d as le}from"./tree-z7HkrWVC.js";import se from"./PortraitCustomerArea-6SdTwwOD.js";import te from"./PortraitCustomerIndustry-DXFXAKnq.js";import ue from"./PortraitCustomerSource-6hiHxNmT.js";import oe from"./PortraitCustomerLevel-BSiiqk7D.js";import"./el-skeleton-item-BYAIkmCs.js";import"./Echart-BQxFkezy.js";import"./echarts-DpbyC_6K.js";import"./china-aeAnb323.js";import"./portrait-CXf55QaH.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";const de=F(L({name:"CrmStatisticsPortrait",__name:"index",setup(k,{expose:r}){r();const n=S({deptId:U().getUser.deptId,userId:void 0,times:[x(ee(new Date(new Date().getTime()-6048e5))),x(ae(new Date(new Date().getTime()-864e5)))]}),e=o(),h=o([]),f=o([]),R=z(()=>n.deptId?f.value.filter(u=>u.deptId===n.deptId):[]),t=o("areaRef"),c=o(),y=o(),v=o(),p=o(),m=()=>{var u,d,i,_,l,q,b,w;switch(t.value){case"areaRef":(d=(u=c.value)==null?void 0:u.loadData)==null||d.call(u);break;case"levelRef":(_=(i=y.value)==null?void 0:i.loadData)==null||_.call(i);break;case"sourceRef":(q=(l=v.value)==null?void 0:l.loadData)==null||q.call(l);break;case"industryRef":(w=(b=p.value)==null?void 0:b.loadData)==null||w.call(b)}};T(t,()=>{m()}),A(async()=>{h.value=g(await Z()),f.value=g(await $())});const P={queryParams:n,queryFormRef:e,deptList:h,userList:f,userListByDeptId:R,activeTab:t,areaRef:c,levelRef:y,sourceRef:v,industryRef:p,handleQuery:m,resetQuery:()=>{e.value.resetFields(),m()},get defaultShortcuts(){return re},get defaultProps(){return le},PortraitCustomerArea:se,PortraitCustomerIndustry:te,PortraitCustomerSource:ue,PortraitCustomerLevel:oe};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),[["render",function(k,r,n,e,h,f){const R=B,t=M,c=X,y=j,v=H,p=O,m=E,P=J,u=W,d=K,i=N,_=G;return I(),D(C,null,[a(u,null,{default:s(()=>[a(P,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"68px"},{default:s(()=>[a(t,{label:"\u65F6\u95F4\u8303\u56F4",prop:"orderDate"},{default:s(()=>[a(R,{modelValue:e.queryParams.times,"onUpdate:modelValue":r[0]||(r[0]=l=>e.queryParams.times=l),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],shortcuts:e.defaultShortcuts,class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time","shortcuts"])]),_:1}),a(t,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:s(()=>[a(c,{modelValue:e.queryParams.deptId,"onUpdate:modelValue":r[1]||(r[1]=l=>e.queryParams.deptId=l),data:e.deptList,props:e.defaultProps,"check-strictly":"",class:"!w-240px","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:r[2]||(r[2]=l=>e.queryParams.userId=void 0)},null,8,["modelValue","data","props"])]),_:1}),a(t,{label:"\u5458\u5DE5",prop:"userId"},{default:s(()=>[a(v,{modelValue:e.queryParams.userId,"onUpdate:modelValue":r[3]||(r[3]=l=>e.queryParams.userId=l),class:"!w-240px",clearable:"",placeholder:"\u5458\u5DE5"},{default:s(()=>[(I(!0),D(C,null,Q(e.userListByDeptId,(l,q)=>(I(),Y(y,{key:q,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(t,null,{default:s(()=>[a(m,{onClick:e.handleQuery},{default:s(()=>[a(p,{class:"mr-5px",icon:"ep:search"}),r[5]||(r[5]=V(" \u641C\u7D22 "))]),_:1}),a(m,{onClick:e.resetQuery},{default:s(()=>[a(p,{class:"mr-5px",icon:"ep:refresh"}),r[6]||(r[6]=V(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(_,null,{default:s(()=>[a(i,{modelValue:e.activeTab,"onUpdate:modelValue":r[4]||(r[4]=l=>e.activeTab=l)},{default:s(()=>[a(d,{label:"\u57CE\u5E02\u5206\u5E03\u5206\u6790",lazy:"",name:"areaRef"},{default:s(()=>[a(e.PortraitCustomerArea,{ref:"areaRef","query-params":e.queryParams},null,8,["query-params"])]),_:1}),a(d,{label:"\u5BA2\u6237\u7EA7\u522B\u5206\u6790",lazy:"",name:"levelRef"},{default:s(()=>[a(e.PortraitCustomerLevel,{ref:"levelRef","query-params":e.queryParams},null,8,["query-params"])]),_:1}),a(d,{label:"\u5BA2\u6237\u6765\u6E90\u5206\u6790",lazy:"",name:"sourceRef"},{default:s(()=>[a(e.PortraitCustomerSource,{ref:"sourceRef","query-params":e.queryParams},null,8,["query-params"])]),_:1}),a(d,{label:"\u5BA2\u6237\u884C\u4E1A\u5206\u6790",lazy:"",name:"industryRef"},{default:s(()=>[a(e.PortraitCustomerIndustry,{ref:"industryRef","query-params":e.queryParams},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/statistics/portrait/index.vue"]]);export{de as default};
