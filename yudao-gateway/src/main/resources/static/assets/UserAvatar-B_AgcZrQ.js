import{d as Ct,p as L,bt as pi,r as I,b as _t,C as ui,bu as mi,a as gi,a0 as zt,bv as fi,_ as Mt,o as j,c as ot,I as vi,ag as bi,j as J,aF as be,a2 as q,bw as we,k,w as R,m as ye,t as xe,q as Dt,ah as st,aK as wi,bx as yi,N as Ce,by as xi,au as Ci,D as Mi,e as Di}from"./index-BaY5TDP-.js";import{b as ki}from"./profile-BO8Syfus.js";import{E as Me}from"./el-avatar-DZsRbb7z.js";import{_ as Bi}from"./Dialog-CZSXtzfQ.js";import{E as Oi}from"./el-space-B4pGZPiv.js";import{_ as Ti}from"./XButton-BcV39lfk.js";import{a as Si}from"./avatar-BG6NdH5s.js";/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function De(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,a)}return e}function ke(t){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?De(Object(e),!0).forEach(function(a){Ei(t,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):De(Object(e)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})}return t}function Be(t){var i=function(e,a){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,a||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}(t,"string");return typeof i=="symbol"?i:i+""}function Rt(t){return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Rt(t)}function Oe(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,Be(a.key),a)}}function Ei(t,i,e){return(i=Be(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function Te(t){return function(i){if(Array.isArray(i))return Wt(i)}(t)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,e){if(i){if(typeof i=="string")return Wt(i,e);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wt(i,e)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wt(t,i){(i==null||i>t.length)&&(i=t.length);for(var e=0,a=new Array(i);e<i;e++)a[e]=t[e];return a}var kt=typeof window<"u"&&window.document!==void 0,P=kt?window:{},Ht=!(!kt||!P.document.documentElement)&&"ontouchstart"in P.document.documentElement,Nt=!!kt&&"PointerEvent"in P,B="cropper",Lt="all",Se="crop",Ee="move",_e="zoom",tt="e",et="w",ht="s",F="n",mt="ne",gt="nw",ft="se",vt="sw",At="".concat(B,"-crop"),ze="".concat(B,"-disabled"),W="".concat(B,"-hidden"),Re="".concat(B,"-hide"),_i="".concat(B,"-invisible"),Bt="".concat(B,"-modal"),Xt="".concat(B,"-move"),bt="".concat(B,"Action"),Ot="".concat(B,"Preview"),Yt="crop",We="move",He="none",It="crop",jt="cropend",Pt="cropmove",Ut="cropstart",Ne="dblclick",Le=Nt?"pointerdown":Ht?"touchstart":"mousedown",Ae=Nt?"pointermove":Ht?"touchmove":"mousemove",Xe=Nt?"pointerup pointercancel":Ht?"touchend touchcancel":"mouseup",Ye="ready",Ie="resize",je="wheel",Vt="zoom",Pe="image/jpeg",zi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Ri=/^data:/,Wi=/^data:image\/jpeg;base64,/,Hi=/^img|canvas$/i,Ue={viewMode:0,dragMode:Yt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ni=Number.isNaN||P.isNaN;function w(t){return typeof t=="number"&&!Ni(t)}var Ve=function(t){return t>0&&t<1/0};function $t(t){return t===void 0}function it(t){return Rt(t)==="object"&&t!==null}var Li=Object.prototype.hasOwnProperty;function ct(t){if(!it(t))return!1;try{var i=t.constructor,e=i.prototype;return i&&e&&Li.call(e,"isPrototypeOf")}catch{return!1}}function H(t){return typeof t=="function"}var Ai=Array.prototype.slice;function $e(t){return Array.from?Array.from(t):Ai.call(t)}function T(t,i){return t&&H(i)&&(Array.isArray(t)||w(t.length)?$e(t).forEach(function(e,a){i.call(t,e,a,t)}):it(t)&&Object.keys(t).forEach(function(e){i.call(t,t[e],e,t)})),t}var O=Object.assign||function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),a=1;a<i;a++)e[a-1]=arguments[a];return it(t)&&e.length>0&&e.forEach(function(n){it(n)&&Object.keys(n).forEach(function(r){t[r]=n[r]})}),t},Xi=/\.\d*(?:0|9){12}\d*$/;function lt(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Xi.test(t)?Math.round(t*i)/i:t}var Yi=/^width|height|left|top|marginLeft|marginTop$/;function K(t,i){var e=t.style;T(i,function(a,n){Yi.test(n)&&w(a)&&(a="".concat(a,"px")),e[n]=a})}function E(t,i){if(i)if(w(t.length))T(t,function(a){E(a,i)});else if(t.classList)t.classList.add(i);else{var e=t.className.trim();e?e.indexOf(i)<0&&(t.className="".concat(e," ").concat(i)):t.className=i}}function U(t,i){i&&(w(t.length)?T(t,function(e){U(e,i)}):t.classList?t.classList.remove(i):t.className.indexOf(i)>=0&&(t.className=t.className.replace(i,"")))}function dt(t,i,e){i&&(w(t.length)?T(t,function(a){dt(a,i,e)}):e?E(t,i):U(t,i))}var Ii=/([a-z\d])([A-Z])/g;function qt(t){return t.replace(Ii,"$1-$2").toLowerCase()}function Ft(t,i){return it(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-".concat(qt(i)))}function wt(t,i,e){it(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-".concat(qt(i)),e)}var qe=/\s\s*/,Fe=function(){var t=!1;if(kt){var i=!1,e=function(){},a=Object.defineProperty({},"once",{get:function(){return t=!0,i},set:function(n){i=n}});P.addEventListener("test",e,a),P.removeEventListener("test",e,a)}return t}();function Y(t,i,e){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=e;i.trim().split(qe).forEach(function(r){if(!Fe){var s=t.listeners;s&&s[r]&&s[r][e]&&(n=s[r][e],delete s[r][e],Object.keys(s[r]).length===0&&delete s[r],Object.keys(s).length===0&&delete t.listeners)}t.removeEventListener(r,n,a)})}function A(t,i,e){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=e;i.trim().split(qe).forEach(function(r){if(a.once&&!Fe){var s=t.listeners,h=s===void 0?{}:s;n=function(){delete h[r][e],t.removeEventListener(r,n,a);for(var c=arguments.length,o=new Array(c),d=0;d<c;d++)o[d]=arguments[d];e.apply(t,o)},h[r]||(h[r]={}),h[r][e]&&t.removeEventListener(r,h[r][e],a),h[r][e]=n,t.listeners=h}t.addEventListener(r,n,a)})}function pt(t,i,e){var a;return H(Event)&&H(CustomEvent)?a=new CustomEvent(i,{detail:e,bubbles:!0,cancelable:!0}):(a=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,e),t.dispatchEvent(a)}function Ke(t){var i=t.getBoundingClientRect();return{left:i.left+(window.pageXOffset-document.documentElement.clientLeft),top:i.top+(window.pageYOffset-document.documentElement.clientTop)}}var Kt=P.location,ji=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Qe(t){var i=t.match(ji);return i!==null&&(i[1]!==Kt.protocol||i[2]!==Kt.hostname||i[3]!==Kt.port)}function Ze(t){var i="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+i}function yt(t){var i=t.rotate,e=t.scaleX,a=t.scaleY,n=t.translateX,r=t.translateY,s=[];w(n)&&n!==0&&s.push("translateX(".concat(n,"px)")),w(r)&&r!==0&&s.push("translateY(".concat(r,"px)")),w(i)&&i!==0&&s.push("rotate(".concat(i,"deg)")),w(e)&&e!==1&&s.push("scaleX(".concat(e,")")),w(a)&&a!==1&&s.push("scaleY(".concat(a,")"));var h=s.length?s.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function Tt(t,i){var e=t.pageX,a=t.pageY,n={endX:e,endY:a};return i?n:ke({startX:e,startY:a},n)}function Q(t){var i=t.aspectRatio,e=t.height,a=t.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Ve(a),s=Ve(e);if(r&&s){var h=e*i;n==="contain"&&h>a||n==="cover"&&h<a?e=a/i:a=e*i}else r?e=a/i:s&&(a=e*i);return{width:a,height:e}}var Ge=String.fromCharCode,Pi=/^data:.*,/;function Ui(t){var i,e=new DataView(t);try{var a,n,r;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,h=2;h+1<s;){if(e.getUint8(h)===255&&e.getUint8(h+1)===225){n=h;break}h+=1}if(n){var c=n+10;if(function(f,g,b){var C="";b+=g;for(var v=g;v<b;v+=1)C+=Ge(f.getUint8(v));return C}(e,n+4,4)==="Exif"){var o=e.getUint16(c);if(((a=o===18761)||o===19789)&&e.getUint16(c+2,a)===42){var d=e.getUint32(c+4,a);d>=8&&(r=c+d)}}}if(r){var p,l,m=e.getUint16(r,a);for(l=0;l<m;l+=1)if(p=r+12*l+2,e.getUint16(p,a)===274){p+=8,i=e.getUint16(p,a),e.setUint16(p,1,a);break}}}catch{i=1}return i}var Vi={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,a=this.cropper,n=Number(i.minContainerWidth),r=Number(i.minContainerHeight);E(a,W),U(t,W);var s={width:Math.max(e.offsetWidth,n>=0?n:200),height:Math.max(e.offsetHeight,r>=0?r:100)};this.containerData=s,K(a,{width:s.width,height:s.height}),E(t,W),U(a,W)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,a=Math.abs(i.rotate)%180==90,n=a?i.naturalHeight:i.naturalWidth,r=a?i.naturalWidth:i.naturalHeight,s=n/r,h=t.width,c=t.height;t.height*s>t.width?e===3?h=t.height*s:c=t.width/s:e===3?c=t.width/s:h=t.height*s;var o={aspectRatio:s,naturalWidth:n,naturalHeight:r,width:h,height:c};this.canvasData=o,this.limited=e===1||e===2,this.limitCanvas(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.left=(t.width-o.width)/2,o.top=(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCanvasData=O({},o)},limitCanvas:function(t,i){var e=this.options,a=this.containerData,n=this.canvasData,r=this.cropBoxData,s=e.viewMode,h=n.aspectRatio,c=this.cropped&&r;if(t){var o=Number(e.minCanvasWidth)||0,d=Number(e.minCanvasHeight)||0;s>1?(o=Math.max(o,a.width),d=Math.max(d,a.height),s===3&&(d*h>o?o=d*h:d=o/h)):s>0&&(o?o=Math.max(o,c?r.width:0):d?d=Math.max(d,c?r.height:0):c&&(o=r.width,(d=r.height)*h>o?o=d*h:d=o/h));var p=Q({aspectRatio:h,width:o,height:d});o=p.width,d=p.height,n.minWidth=o,n.minHeight=d,n.maxWidth=1/0,n.maxHeight=1/0}if(i)if(s>(c?0:1)){var l=a.width-n.width,m=a.height-n.height;n.minLeft=Math.min(0,l),n.minTop=Math.min(0,m),n.maxLeft=Math.max(0,l),n.maxTop=Math.max(0,m),c&&this.limited&&(n.minLeft=Math.min(r.left,r.left+(r.width-n.width)),n.minTop=Math.min(r.top,r.top+(r.height-n.height)),n.maxLeft=r.left,n.maxTop=r.top,s===2&&(n.width>=a.width&&(n.minLeft=Math.min(0,l),n.maxLeft=Math.max(0,l)),n.height>=a.height&&(n.minTop=Math.min(0,m),n.maxTop=Math.max(0,m))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(t,i){var e=this.canvasData,a=this.imageData;if(i){var n=function(o){var d=o.width,p=o.height,l=o.degree;if((l=Math.abs(l)%180)==90)return{width:p,height:d};var m=l%90*Math.PI/180,f=Math.sin(m),g=Math.cos(m),b=d*g+p*f,C=d*f+p*g;return l>90?{width:C,height:b}:{width:b,height:C}}({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),r=n.width,s=n.height,h=e.width*(r/e.naturalWidth),c=e.height*(s/e.naturalHeight);e.left-=(h-e.width)/2,e.top-=(c-e.height)/2,e.width=h,e.height=c,e.aspectRatio=r/s,e.naturalWidth=r,e.naturalHeight=s,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,K(this.canvas,O({width:e.width,height:e.height},yt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,a=e.naturalWidth*(i.width/i.naturalWidth),n=e.naturalHeight*(i.height/i.naturalHeight);O(e,{width:a,height:n,left:(i.width-a)/2,top:(i.height-n)/2}),K(this.image,O({width:e.width,height:e.height},yt(O({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,n={width:i.width,height:i.height};e&&(i.height*e>i.width?n.height=n.width/e:n.width=n.height*e),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=i.left+(i.width-n.width)/2,n.top=i.top+(i.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=O({},n)},limitCropBox:function(t,i){var e=this.options,a=this.containerData,n=this.canvasData,r=this.cropBoxData,s=this.limited,h=e.aspectRatio;if(t){var c=Number(e.minCropBoxWidth)||0,o=Number(e.minCropBoxHeight)||0,d=s?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,p=s?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;c=Math.min(c,a.width),o=Math.min(o,a.height),h&&(c&&o?o*h>c?o=c/h:c=o*h:c?o=c/h:o&&(c=o*h),p*h>d?p=d/h:d=p*h),r.minWidth=Math.min(c,d),r.minHeight=Math.min(o,p),r.maxWidth=d,r.maxHeight=p}i&&(s?(r.minLeft=Math.max(0,n.left),r.minTop=Math.max(0,n.top),r.maxLeft=Math.min(a.width,n.left+n.width)-r.width,r.maxTop=Math.min(a.height,n.top+n.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=a.width-r.width,r.maxTop=a.height-r.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&wt(this.face,bt,e.width>=i.width&&e.height>=i.height?Ee:Lt),K(this.cropBox,O({width:e.width,height:e.height},yt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),pt(this.element,It,this.getData())}},$i={initPreview:function(){var t=this.element,i=this.crossOrigin,e=this.options.preview,a=i?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",r=document.createElement("img");if(i&&(r.crossOrigin=i),r.src=a,r.alt=n,this.viewBox.appendChild(r),this.viewBoxImage=r,e){var s=e;typeof e=="string"?s=t.ownerDocument.querySelectorAll(e):e.querySelector&&(s=[e]),this.previews=s,T(s,function(h){var c=document.createElement("img");wt(h,Ot,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),i&&(c.crossOrigin=i),c.src=a,c.alt=n,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(c)})}},resetPreview:function(){T(this.previews,function(t){var i=Ft(t,Ot);K(t,{width:i.width,height:i.height}),t.innerHTML=i.html,function(e,a){if(it(e[a]))try{delete e[a]}catch{e[a]=void 0}else if(e.dataset)try{delete e.dataset[a]}catch{e.dataset[a]=void 0}else e.removeAttribute("data-".concat(qt(a)))}(t,Ot)})},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,a=e.width,n=e.height,r=t.width,s=t.height,h=e.left-i.left-t.left,c=e.top-i.top-t.top;this.cropped&&!this.disabled&&(K(this.viewBoxImage,O({width:r,height:s},yt(O({translateX:-h,translateY:-c},t)))),T(this.previews,function(o){var d=Ft(o,Ot),p=d.width,l=d.height,m=p,f=l,g=1;a&&(f=n*(g=p/a)),n&&f>l&&(m=a*(g=l/n),f=l),K(o,{width:m,height:f}),K(o.getElementsByTagName("img")[0],O({width:r*g,height:s*g},yt(O({translateX:-h*g,translateY:-c*g},t))))}))}},qi={bind:function(){var t=this.element,i=this.options,e=this.cropper;H(i.cropstart)&&A(t,Ut,i.cropstart),H(i.cropmove)&&A(t,Pt,i.cropmove),H(i.cropend)&&A(t,jt,i.cropend),H(i.crop)&&A(t,It,i.crop),H(i.zoom)&&A(t,Vt,i.zoom),A(e,Le,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&A(e,je,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&A(e,Ne,this.onDblclick=this.dblclick.bind(this)),A(t.ownerDocument,Ae,this.onCropMove=this.cropMove.bind(this)),A(t.ownerDocument,Xe,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&A(window,Ie,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;H(i.cropstart)&&Y(t,Ut,i.cropstart),H(i.cropmove)&&Y(t,Pt,i.cropmove),H(i.cropend)&&Y(t,jt,i.cropend),H(i.crop)&&Y(t,It,i.crop),H(i.zoom)&&Y(t,Vt,i.zoom),Y(e,Le,this.onCropStart),i.zoomable&&i.zoomOnWheel&&Y(e,je,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&Y(e,Ne,this.onDblclick),Y(t.ownerDocument,Ae,this.onCropMove),Y(t.ownerDocument,Xe,this.onCropEnd),i.responsive&&Y(window,Ie,this.onResize)}},Fi={resize:function(){if(!this.disabled){var t,i,e=this.options,a=this.container,n=this.containerData,r=a.offsetWidth/n.width,s=a.offsetHeight/n.height,h=Math.abs(r-1)>Math.abs(s-1)?r:s;h!==1&&(e.restore&&(t=this.getCanvasData(),i=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(T(t,function(c,o){t[o]=c*h})),this.setCropBoxData(T(i,function(c,o){i[o]=c*h}))))}},dblclick:function(){var t,i;this.disabled||this.options.dragMode===He||this.setDragMode((t=this.dragBox,i=At,(t.classList?t.classList.contains(i):t.className.indexOf(i)>-1)?We:Yt))},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*e,t)))},cropStart:function(t){var i=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(w(i)&&i!==1||w(e)&&e!==0||t.ctrlKey))){var a,n=this.options,r=this.pointers;t.changedTouches?T(t.changedTouches,function(s){r[s.identifier]=Tt(s)}):r[t.pointerId||0]=Tt(t),a=Object.keys(r).length>1&&n.zoomable&&n.zoomOnTouch?_e:Ft(t.target,bt),zi.test(a)&&pt(this.element,Ut,{originalEvent:t,action:a})!==!1&&(t.preventDefault(),this.action=a,this.cropping=!1,a===Se&&(this.cropping=!0,E(this.dragBox,Bt)))}},cropMove:function(t){var i=this.action;if(!this.disabled&&i){var e=this.pointers;t.preventDefault(),pt(this.element,Pt,{originalEvent:t,action:i})!==!1&&(t.changedTouches?T(t.changedTouches,function(a){O(e[a.identifier]||{},Tt(a,!0))}):O(e[t.pointerId||0]||{},Tt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?T(t.changedTouches,function(a){delete e[a.identifier]}):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,dt(this.dragBox,Bt,this.cropped&&this.options.modal)),pt(this.element,jt,{originalEvent:t,action:i}))}}},Ki={change:function(t){var i,e=this.options,a=this.canvasData,n=this.containerData,r=this.cropBoxData,s=this.pointers,h=this.action,c=e.aspectRatio,o=r.left,d=r.top,p=r.width,l=r.height,m=o+p,f=d+l,g=0,b=0,C=n.width,v=n.height,y=!0;!c&&t.shiftKey&&(c=p&&l?p/l:1),this.limited&&(g=r.minLeft,b=r.minTop,C=g+Math.min(n.width,a.width,a.left+a.width),v=b+Math.min(n.height,a.height,a.top+a.height));var D=s[Object.keys(s)[0]],u={x:D.endX-D.startX,y:D.endY-D.startY},x=function(M){switch(M){case tt:m+u.x>C&&(u.x=C-m);break;case et:o+u.x<g&&(u.x=g-o);break;case F:d+u.y<b&&(u.y=b-d);break;case ht:f+u.y>v&&(u.y=v-f)}};switch(h){case Lt:o+=u.x,d+=u.y;break;case tt:if(u.x>=0&&(m>=C||c&&(d<=b||f>=v))){y=!1;break}x(tt),(p+=u.x)<0&&(h=et,o-=p=-p),c&&(l=p/c,d+=(r.height-l)/2);break;case F:if(u.y<=0&&(d<=b||c&&(o<=g||m>=C))){y=!1;break}x(F),l-=u.y,d+=u.y,l<0&&(h=ht,d-=l=-l),c&&(p=l*c,o+=(r.width-p)/2);break;case et:if(u.x<=0&&(o<=g||c&&(d<=b||f>=v))){y=!1;break}x(et),p-=u.x,o+=u.x,p<0&&(h=tt,o-=p=-p),c&&(l=p/c,d+=(r.height-l)/2);break;case ht:if(u.y>=0&&(f>=v||c&&(o<=g||m>=C))){y=!1;break}x(ht),(l+=u.y)<0&&(h=F,d-=l=-l),c&&(p=l*c,o+=(r.width-p)/2);break;case mt:if(c){if(u.y<=0&&(d<=b||m>=C)){y=!1;break}x(F),l-=u.y,d+=u.y,p=l*c}else x(F),x(tt),u.x>=0?m<C?p+=u.x:u.y<=0&&d<=b&&(y=!1):p+=u.x,u.y<=0?d>b&&(l-=u.y,d+=u.y):(l-=u.y,d+=u.y);p<0&&l<0?(h=vt,d-=l=-l,o-=p=-p):p<0?(h=gt,o-=p=-p):l<0&&(h=ft,d-=l=-l);break;case gt:if(c){if(u.y<=0&&(d<=b||o<=g)){y=!1;break}x(F),l-=u.y,d+=u.y,p=l*c,o+=r.width-p}else x(F),x(et),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y<=0&&d<=b&&(y=!1):(p-=u.x,o+=u.x),u.y<=0?d>b&&(l-=u.y,d+=u.y):(l-=u.y,d+=u.y);p<0&&l<0?(h=ft,d-=l=-l,o-=p=-p):p<0?(h=mt,o-=p=-p):l<0&&(h=vt,d-=l=-l);break;case vt:if(c){if(u.x<=0&&(o<=g||f>=v)){y=!1;break}x(et),p-=u.x,o+=u.x,l=p/c}else x(ht),x(et),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y>=0&&f>=v&&(y=!1):(p-=u.x,o+=u.x),u.y>=0?f<v&&(l+=u.y):l+=u.y;p<0&&l<0?(h=mt,d-=l=-l,o-=p=-p):p<0?(h=ft,o-=p=-p):l<0&&(h=gt,d-=l=-l);break;case ft:if(c){if(u.x>=0&&(m>=C||f>=v)){y=!1;break}x(tt),l=(p+=u.x)/c}else x(ht),x(tt),u.x>=0?m<C?p+=u.x:u.y>=0&&f>=v&&(y=!1):p+=u.x,u.y>=0?f<v&&(l+=u.y):l+=u.y;p<0&&l<0?(h=gt,d-=l=-l,o-=p=-p):p<0?(h=vt,o-=p=-p):l<0&&(h=mt,d-=l=-l);break;case Ee:this.move(u.x,u.y),y=!1;break;case _e:this.zoom(function(M){var S=ke({},M),_=0;return T(M,function(V,at){delete S[at],T(S,function(z){var N=Math.abs(V.startX-z.startX),ut=Math.abs(V.startY-z.startY),Z=Math.abs(V.endX-z.endX),nt=Math.abs(V.endY-z.endY),$=Math.sqrt(N*N+ut*ut),rt=(Math.sqrt(Z*Z+nt*nt)-$)/$;Math.abs(rt)>Math.abs(_)&&(_=rt)})}),_}(s),t),y=!1;break;case Se:if(!u.x||!u.y){y=!1;break}i=Ke(this.cropper),o=D.startX-i.left,d=D.startY-i.top,p=r.minWidth,l=r.minHeight,u.x>0?h=u.y>0?ft:mt:u.x<0&&(o-=p,h=u.y>0?vt:gt),u.y<0&&(d-=l),this.cropped||(U(this.cropBox,W),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}y&&(r.width=p,r.height=l,r.left=o,r.top=d,this.action=h,this.renderCropBox()),T(s,function(M){M.startX=M.endX,M.startY=M.endY})}},Qi={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&E(this.dragBox,Bt),U(this.cropBox,W),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=O({},this.initialImageData),this.canvasData=O({},this.initialCanvasData),this.cropBoxData=O({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(O(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),U(this.dragBox,Bt),E(this.cropBox,W)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,T(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,U(this.cropper,ze)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,E(this.cropper,ze)),this},destroy:function(){var t=this.element;return t[B]?(t[B]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,a=e.left,n=e.top;return this.moveTo($t(t)?t:a+Number(t),$t(i)?i:n+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,a=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(w(t)&&(e.left=t,a=!0),w(i)&&(e.top=i,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var a=this.options,n=this.canvasData,r=n.width,s=n.height,h=n.naturalWidth,c=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&a.zoomable){var o=h*t,d=c*t;if(pt(this.element,Vt,{ratio:t,oldRatio:r/h,originalEvent:e})===!1)return this;if(e){var p=this.pointers,l=Ke(this.cropper),m=p&&Object.keys(p).length?function(f){var g=0,b=0,C=0;return T(f,function(v){var y=v.startX,D=v.startY;g+=y,b+=D,C+=1}),{pageX:g/=C,pageY:b/=C}}(p):{pageX:e.pageX,pageY:e.pageY};n.left-=(o-r)*((m.pageX-l.left-n.left)/r),n.top-=(d-s)*((m.pageY-l.top-n.top)/s)}else ct(i)&&w(i.x)&&w(i.y)?(n.left-=(o-r)*((i.x-n.left)/r),n.top-=(d-s)*((i.y-n.top)/s)):(n.left-=(o-r)/2,n.top-=(d-s)/2);n.width=o,n.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return w(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,w(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(w(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,a=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(w(t)&&(e.scaleX=t,a=!0),w(i)&&(e.scaleY=i,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.options,a=this.imageData,n=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-n.left,y:r.top-n.top,width:r.width,height:r.height};var s=a.width/a.naturalWidth;if(T(t,function(o,d){t[d]=o/s}),i){var h=Math.round(t.y+t.height),c=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=c-t.x,t.height=h-t.y}}else t={x:0,y:0,width:0,height:0};return e.rotatable&&(t.rotate=a.rotate||0),e.scalable&&(t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1),t},setData:function(t){var i=this.options,e=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&ct(t)){var r=!1;i.rotatable&&w(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,r=!0),i.scalable&&(w(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,r=!0),w(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var s=e.width/e.naturalWidth;w(t.x)&&(n.left=t.x*s+a.left),w(t.y)&&(n.top=t.y*s+a.top),w(t.width)&&(n.width=t.width*s),w(t.height)&&(n.height=t.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?O({},this.containerData):{}},getImageData:function(){return this.sized?O({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&T(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&ct(t)&&(w(t.left)&&(i.left=t.left),w(t.top)&&(i.top=t.top),w(t.width)?(i.width=t.width,i.height=t.width/e):w(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,i=this.cropBoxData;return this.ready&&this.cropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(t){var i,e,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ct(t)&&(w(t.left)&&(a.left=t.left),w(t.top)&&(a.top=t.top),w(t.width)&&t.width!==a.width&&(i=!0,a.width=t.width),w(t.height)&&t.height!==a.height&&(e=!0,a.height=t.height),n&&(i?a.height=a.width/n:e&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,e=function(nt,$,rt,G){var Qt=$.aspectRatio,ti=$.naturalWidth,ei=$.naturalHeight,Zt=$.rotate,ii=Zt===void 0?0:Zt,Gt=$.scaleX,ai=Gt===void 0?1:Gt,Jt=$.scaleY,ni=Jt===void 0?1:Jt,te=rt.aspectRatio,ri=rt.naturalWidth,oi=rt.naturalHeight,ee=G.fillColor,si=ee===void 0?"transparent":ee,ie=G.imageSmoothingEnabled,hi=ie===void 0||ie,ae=G.imageSmoothingQuality,ci=ae===void 0?"low":ae,ne=G.maxWidth,re=ne===void 0?1/0:ne,oe=G.maxHeight,se=oe===void 0?1/0:oe,he=G.minWidth,ce=he===void 0?0:he,le=G.minHeight,de=le===void 0?0:le,xt=document.createElement("canvas"),X=xt.getContext("2d"),pe=Q({aspectRatio:te,width:re,height:se}),ue=Q({aspectRatio:te,width:ce,height:de},"cover"),St=Math.min(pe.width,Math.max(ue.width,ri)),Et=Math.min(pe.height,Math.max(ue.height,oi)),me=Q({aspectRatio:Qt,width:re,height:se}),ge=Q({aspectRatio:Qt,width:ce,height:de},"cover"),fe=Math.min(me.width,Math.max(ge.width,ti)),ve=Math.min(me.height,Math.max(ge.height,ei)),li=[-fe/2,-ve/2,fe,ve];return xt.width=lt(St),xt.height=lt(Et),X.fillStyle=si,X.fillRect(0,0,St,Et),X.save(),X.translate(St/2,Et/2),X.rotate(ii*Math.PI/180),X.scale(ai,ni),X.imageSmoothingEnabled=hi,X.imageSmoothingQuality=ci,X.drawImage.apply(X,[nt].concat(Te(li.map(function(di){return Math.floor(lt(di))})))),X.restore(),xt}(this.image,this.imageData,i,t);if(!this.cropped)return e;var a=this.getData(t.rounded),n=a.x,r=a.y,s=a.width,h=a.height,c=e.width/Math.floor(i.naturalWidth);c!==1&&(n*=c,r*=c,s*=c,h*=c);var o=s/h,d=Q({aspectRatio:o,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Q({aspectRatio:o,width:t.minWidth||0,height:t.minHeight||0},"cover"),l=Q({aspectRatio:o,width:t.width||(c!==1?e.width:s),height:t.height||(c!==1?e.height:h)}),m=l.width,f=l.height;m=Math.min(d.width,Math.max(p.width,m)),f=Math.min(d.height,Math.max(p.height,f));var g=document.createElement("canvas"),b=g.getContext("2d");g.width=lt(m),g.height=lt(f),b.fillStyle=t.fillColor||"transparent",b.fillRect(0,0,m,f);var C=t.imageSmoothingEnabled,v=C===void 0||C,y=t.imageSmoothingQuality;b.imageSmoothingEnabled=v,y&&(b.imageSmoothingQuality=y);var D,u,x,M,S,_,V=e.width,at=e.height,z=n,N=r;z<=-s||z>V?(z=0,D=0,x=0,S=0):z<=0?(x=-z,z=0,S=D=Math.min(V,s+z)):z<=V&&(x=0,S=D=Math.min(s,V-z)),D<=0||N<=-h||N>at?(N=0,u=0,M=0,_=0):N<=0?(M=-N,N=0,_=u=Math.min(at,h+N)):N<=at&&(M=0,_=u=Math.min(h,at-N));var ut=[z,N,D,u];if(S>0&&_>0){var Z=m/s;ut.push(x*Z,M*Z,S*Z,_*Z)}return b.drawImage.apply(b,[e].concat(Te(ut.map(function(nt){return Math.floor(lt(nt))})))),g},setAspectRatio:function(t){var i=this.options;return this.disabled||$t(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=t===Yt,r=i.movable&&t===We;t=n||r?t:He,i.dragMode=t,wt(e,bt,t),dt(e,At,n),dt(e,Xt,r),i.cropBoxMovable||(wt(a,bt,t),dt(a,At,n),dt(a,Xt,r))}return this}},Zi=P.Cropper,Je=function(){function t(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(function(s,h){if(!(s instanceof h))throw new TypeError("Cannot call a class as a function")}(this,t),!n||!Hi.test(n.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=n,this.options=O({},Ue,ct(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return i=t,a=[{key:"noConflict",value:function(){return window.Cropper=Zi,t}},{key:"setDefaults",value:function(n){O(Ue,ct(n)&&n)}}],(e=[{key:"init",value:function(){var n,r=this.element,s=r.tagName.toLowerCase();if(!r[B]){if(r[B]=this,s==="img"){if(this.isImg=!0,n=r.getAttribute("src")||"",this.originalUrl=n,!n)return;n=r.src}else s==="canvas"&&window.HTMLCanvasElement&&(n=r.toDataURL());this.load(n)}}},{key:"load",value:function(n){var r=this;if(n){this.url=n,this.imageData={};var s=this.element,h=this.options;if(h.rotatable||h.scalable||(h.checkOrientation=!1),h.checkOrientation&&window.ArrayBuffer)if(Ri.test(n))Wi.test(n)?this.read((c=n.replace(Pi,""),o=atob(c),d=new ArrayBuffer(o.length),T(p=new Uint8Array(d),function(f,g){p[g]=o.charCodeAt(g)}),d)):this.clone();else{var c,o,d,p,l=new XMLHttpRequest,m=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=m,l.onerror=m,l.ontimeout=m,l.onprogress=function(){l.getResponseHeader("content-type")!==Pe&&l.abort()},l.onload=function(){r.read(l.response)},l.onloadend=function(){r.reloading=!1,r.xhr=null},h.checkCrossOrigin&&Qe(n)&&s.crossOrigin&&(n=Ze(n)),l.open("GET",n,!0),l.responseType="arraybuffer",l.withCredentials=s.crossOrigin==="use-credentials",l.send()}else this.clone()}}},{key:"read",value:function(n){var r=this.options,s=this.imageData,h=Ui(n),c=0,o=1,d=1;if(h>1){this.url=function(l,m){for(var f=[],g=new Uint8Array(l);g.length>0;)f.push(Ge.apply(null,$e(g.subarray(0,8192)))),g=g.subarray(8192);return"data:".concat(m,";base64,").concat(btoa(f.join("")))}(n,Pe);var p=function(l){var m=0,f=1,g=1;switch(l){case 2:f=-1;break;case 3:m=-180;break;case 4:g=-1;break;case 5:m=90,g=-1;break;case 6:m=90;break;case 7:m=90,f=-1;break;case 8:m=-90}return{rotate:m,scaleX:f,scaleY:g}}(h);c=p.rotate,o=p.scaleX,d=p.scaleY}r.rotatable&&(s.rotate=c),r.scalable&&(s.scaleX=o,s.scaleY=d),this.clone()}},{key:"clone",value:function(){var n=this.element,r=this.url,s=n.crossOrigin,h=r;this.options.checkCrossOrigin&&Qe(r)&&(s||(s="anonymous"),h=Ze(r)),this.crossOrigin=s,this.crossOriginUrl=h;var c=document.createElement("img");s&&(c.crossOrigin=s),c.src=h||r,c.alt=n.alt||"The image to crop",this.image=c,c.onload=this.start.bind(this),c.onerror=this.stop.bind(this),E(c,Re),n.parentNode.insertBefore(c,n.nextSibling)}},{key:"start",value:function(){var n=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var s=P.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(P.navigator.userAgent),h=function(d,p){O(n.imageData,{naturalWidth:d,naturalHeight:p,aspectRatio:d/p}),n.initialImageData=O({},n.imageData),n.sizing=!1,n.sized=!0,n.build()};if(!r.naturalWidth||s){var c=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=c,c.onload=function(){h(c.width,c.height),s||o.removeChild(c)},c.src=r.src,s||(c.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(c))}else h(r.naturalWidth,r.naturalHeight)}},{key:"stop",value:function(){var n=this.image;n.onload=null,n.onerror=null,n.parentNode.removeChild(n),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var n=this.element,r=this.options,s=this.image,h=n.parentNode,c=document.createElement("div");c.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=c.querySelector(".".concat(B,"-container")),d=o.querySelector(".".concat(B,"-canvas")),p=o.querySelector(".".concat(B,"-drag-box")),l=o.querySelector(".".concat(B,"-crop-box")),m=l.querySelector(".".concat(B,"-face"));this.container=h,this.cropper=o,this.canvas=d,this.dragBox=p,this.cropBox=l,this.viewBox=o.querySelector(".".concat(B,"-view-box")),this.face=m,d.appendChild(s),E(n,W),h.insertBefore(o,n.nextSibling),U(s,Re),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,E(l,W),r.guides||E(l.getElementsByClassName("".concat(B,"-dashed")),W),r.center||E(l.getElementsByClassName("".concat(B,"-center")),W),r.background&&E(o,"".concat(B,"-bg")),r.highlight||E(m,_i),r.cropBoxMovable&&(E(m,Xt),wt(m,bt,Lt)),r.cropBoxResizable||(E(l.getElementsByClassName("".concat(B,"-line")),W),E(l.getElementsByClassName("".concat(B,"-point")),W)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),H(r.ready)&&A(n,Ye,r.ready,{once:!0}),pt(n,Ye)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var n=this.cropper.parentNode;n&&n.removeChild(this.cropper),U(this.element,W)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&Oe(i.prototype,e),a&&Oe(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,e,a}();O(Je.prototype,Vi,$i,qi,Fi,Ki,Qi);const Gi=Ct({name:"Cropper",__name:"Cropper",props:{src:L.string.def(""),alt:L.string.def(""),circled:L.bool.def(!1),realTimePreview:L.bool.def(!0),height:L.string.def("360px"),crossorigin:{type:String,default:void 0},imageStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},emits:["cropend","ready","cropendError"],setup(t,{expose:i,emit:e}){i();const a={aspectRatio:1,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,autoCrop:!0,background:!0,highlight:!0,center:!0,responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,scalable:!0,modal:!0,guides:!0,movable:!0,rotatable:!0},n=t,r=e,s=pi(),h=I(),c=I(),o=I(!1),{getPrefixCls:d}=zt(),p=d("cropper-image"),l=fi(C,80),m=_t(()=>({height:n.height,maxWidth:"100%",...n.imageStyle})),f=_t(()=>[p,s.class,{[`${p}--circled`]:n.circled}]),g=_t(()=>({height:`${n.height}`.replace(/px/,"")+"px"}));async function b(){const u=gi(h);u&&(c.value=new Je(u,{...a,ready:()=>{o.value=!0,C(),r("ready",c.value)},crop(){l()},zoom(){l()},cropmove(){l()},...n.options}))}function C(){n.realTimePreview&&v()}function v(){if(!c.value)return;let u=c.value.getData();(n.circled?y():c.value.getCroppedCanvas()).toBlob(x=>{if(!x)return;let M=new FileReader;M.readAsDataURL(x),M.onloadend=S=>{var _;r("cropend",{imgBase64:((_=S.target)==null?void 0:_.result)??"",imgInfo:u})},M.onerror=()=>{r("cropendError")}},"image/png")}function y(){const u=c.value.getCroppedCanvas(),x=document.createElement("canvas"),M=x.getContext("2d"),S=u.width,_=u.height;return x.width=S,x.height=_,M.imageSmoothingEnabled=!0,M.drawImage(u,0,0,S,_),M.globalCompositeOperation="destination-in",M.beginPath(),M.arc(S/2,_/2,Math.min(S,_)/2,0,2*Math.PI,!0),M.fill(),x}ui(b),mi(()=>{var u;(u=c.value)==null||u.destroy()});const D={defaultOptions:a,props:n,emit:r,attrs:s,imgElRef:h,cropper:c,isReady:o,getPrefixCls:d,prefixCls:p,debounceRealTimeCroppered:l,getImageStyle:m,getClass:f,getWrapperStyle:g,init:b,realTimeCroppered:C,croppered:v,getRoundedCanvas:y};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),Ji=["alt","crossorigin","src"],ta=Mt(Gi,[["render",function(t,i,e,a,n,r){return j(),ot("div",{class:q(a.getClass),style:be(a.getWrapperStyle)},[vi(J("img",{ref:"imgElRef",alt:e.alt,crossorigin:e.crossorigin,src:e.src,style:be(a.getImageStyle)},null,12,Ji),[[bi,a.isReady]])],6)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/Cropper/src/Cropper.vue"]]),ea=Ct({name:"CopperModal",__name:"CopperModal",props:{srcValue:L.string.def(""),circled:L.bool.def(!0)},emits:["uploadSuccess"],setup(t,{expose:i,emit:e}){const a=t,n=e,{t:r}=we.useI18n(),{getPrefixCls:s}=zt(),h=s("cropper-am"),c=I(a.srcValue),o=I(""),d=I(),p=I(!1);let l="",m=1,f=1;function g(){p.value=!0}function b(){p.value=!1}i({openModal:g,closeModal:b});const C={props:a,emit:n,t:r,getPrefixCls:s,prefixCls:h,src:c,previewSource:o,cropper:d,dialogVisible:p,get filename(){return l},set filename(v){l=v},get scaleX(){return m},set scaleX(v){m=v},get scaleY(){return f},set scaleY(v){f=v},handleBeforeUpload:function(v){const y=new FileReader;return y.readAsDataURL(v),c.value="",o.value="",y.onload=function(D){var u;c.value=((u=D.target)==null?void 0:u.result)??"",l=v.name},!1},handleCropend:function({imgBase64:v}){o.value=v},handleReady:function(v){d.value=v},handlerToolbar:function(v,y){var D,u;v==="scaleX"&&(m=y=m===-1?1:-1),v==="scaleY"&&(f=y=f===-1?1:-1),(u=(D=d==null?void 0:d.value)==null?void 0:D[v])==null||u.call(D,y)},handleOk:async function(){const v=(y=>{const D=y.split(","),u=D[0].match(/:(.*?);/)[1],x=window.atob(D[1]);let M=x.length;const S=new Uint8Array(M);for(;M--;)S[M]=x.charCodeAt(M);return new Blob([S],{type:u})})(o.value);n("uploadSuccess",{source:o.value,data:v,filename:l})},openModal:g,closeModal:b,get CropperImage(){return ta}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),ia=["alt","src"],aa=Mt(ea,[["render",function(t,i,e,a,n,r){const s=Ti,h=wi,c=yi,o=Oi,d=Me,p=Ce,l=Bi;return j(),ot("div",null,[k(l,{modelValue:a.dialogVisible,"onUpdate:modelValue":i[7]||(i[7]=m=>a.dialogVisible=m),canFullscreen:!1,title:a.t("cropper.modalTitle"),maxHeight:"380px",width:"800px"},{footer:R(()=>[k(p,{type:"primary",onClick:a.handleOk},{default:R(()=>[ye(xe(a.t("cropper.okText")),1)]),_:1})]),default:R(()=>[J("div",{class:q(a.prefixCls)},[J("div",{class:q(`${a.prefixCls}-left`)},[J("div",{class:q(`${a.prefixCls}-cropper`)},[a.src?(j(),Dt(a.CropperImage,{key:0,circled:e.circled,src:a.src,height:"300px",onCropend:a.handleCropend,onReady:a.handleReady},null,8,["circled","src"])):st("",!0)],2),J("div",{class:q(`${a.prefixCls}-toolbar`)},[k(c,{beforeUpload:a.handleBeforeUpload,fileList:[],accept:"image/*"},{default:R(()=>[k(h,{content:a.t("cropper.selectImage"),placement:"bottom"},{default:R(()=>[k(s,{preIcon:"ant-design:upload-outlined",type:"primary"})]),_:1},8,["content"])]),_:1}),k(o,null,{default:R(()=>[k(h,{content:a.t("cropper.btn_reset"),placement:"bottom"},{default:R(()=>[k(s,{disabled:!a.src,preIcon:"ant-design:reload-outlined",size:"small",type:"primary",onClick:i[0]||(i[0]=m=>a.handlerToolbar("reset"))},null,8,["disabled"])]),_:1},8,["content"]),k(h,{content:a.t("cropper.btn_rotate_left"),placement:"bottom"},{default:R(()=>[k(s,{disabled:!a.src,preIcon:"ant-design:rotate-left-outlined",size:"small",type:"primary",onClick:i[1]||(i[1]=m=>a.handlerToolbar("rotate",-45))},null,8,["disabled"])]),_:1},8,["content"]),k(h,{content:a.t("cropper.btn_rotate_right"),placement:"bottom"},{default:R(()=>[k(s,{disabled:!a.src,preIcon:"ant-design:rotate-right-outlined",size:"small",type:"primary",onClick:i[2]||(i[2]=m=>a.handlerToolbar("rotate",45))},null,8,["disabled"])]),_:1},8,["content"]),k(h,{content:a.t("cropper.btn_scale_x"),placement:"bottom"},{default:R(()=>[k(s,{disabled:!a.src,preIcon:"vaadin:arrows-long-h",size:"small",type:"primary",onClick:i[3]||(i[3]=m=>a.handlerToolbar("scaleX"))},null,8,["disabled"])]),_:1},8,["content"]),k(h,{content:a.t("cropper.btn_scale_y"),placement:"bottom"},{default:R(()=>[k(s,{disabled:!a.src,preIcon:"vaadin:arrows-long-v",size:"small",type:"primary",onClick:i[4]||(i[4]=m=>a.handlerToolbar("scaleY"))},null,8,["disabled"])]),_:1},8,["content"]),k(h,{content:a.t("cropper.btn_zoom_in"),placement:"bottom"},{default:R(()=>[k(s,{disabled:!a.src,preIcon:"ant-design:zoom-in-outlined",size:"small",type:"primary",onClick:i[5]||(i[5]=m=>a.handlerToolbar("zoom",.1))},null,8,["disabled"])]),_:1},8,["content"]),k(h,{content:a.t("cropper.btn_zoom_out"),placement:"bottom"},{default:R(()=>[k(s,{disabled:!a.src,preIcon:"ant-design:zoom-out-outlined",size:"small",type:"primary",onClick:i[6]||(i[6]=m=>a.handlerToolbar("zoom",-.1))},null,8,["disabled"])]),_:1},8,["content"])]),_:1})],2)],2),J("div",{class:q(`${a.prefixCls}-right`)},[J("div",{class:q(`${a.prefixCls}-preview`)},[a.previewSource?(j(),ot("img",{key:0,alt:a.t("cropper.preview"),src:a.previewSource},null,8,ia)):st("",!0)],2),a.previewSource?(j(),ot("div",{key:0,class:q(`${a.prefixCls}-group`)},[k(d,{src:a.previewSource,size:"large"},null,8,["src"]),k(d,{size:48,src:a.previewSource},null,8,["src"]),k(d,{size:64,src:a.previewSource},null,8,["src"]),k(d,{size:80,src:a.previewSource},null,8,["src"])],2)):st("",!0)],2)],2)]),_:1},8,["modelValue","title"])])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/Cropper/src/CopperModal.vue"]]),na=Mt(Ct({name:"CropperAvatar",__name:"CropperAvatar",props:{width:L.string.def("200px"),value:L.string.def(""),showBtn:L.bool.def(!0),btnText:L.string.def("")},emits:["update:value","change"],setup(t,{expose:i,emit:e}){const a=t,n=e,r=I(a.value),{getPrefixCls:s}=zt(),h=s("cropper-avatar"),c=Mi(),{t:o}=we.useI18n(),d=I();function p(){d.value.openModal()}function l(){d.value.closeModal()}xi(()=>{r.value=a.value}),Ci(()=>r.value,f=>{n("update:value",f)}),i({open:p,close:l});const m={props:a,emit:n,sourceValue:r,getPrefixCls:s,prefixCls:h,message:c,t:o,cropperModelRef:d,handleUploadSuccess:function({source:f,data:g,filename:b}){r.value=f,n("change",{source:f,data:g,filename:b}),c.success(o("cropper.uploadSuccess"))},open:p,close:l,CopperModal:aa,get avatar(){return Si}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),[["render",function(t,i,e,a,n,r){const s=Me,h=Ce;return j(),ot("div",{class:"user-info-head",onClick:i[1]||(i[1]=c=>a.open())},[a.sourceValue?(j(),Dt(s,{key:0,src:a.sourceValue,alt:"avatar",class:"img-circle img-lg"},null,8,["src"])):st("",!0),a.sourceValue?st("",!0):(j(),Dt(s,{key:1,src:a.avatar,alt:"avatar",class:"img-circle img-lg"},null,8,["src"])),e.showBtn?(j(),Dt(h,{key:2,class:q(`${a.prefixCls}-upload-btn`),onClick:i[0]||(i[0]=c=>a.open())},{default:R(()=>[ye(xe(e.btnText?e.btnText:a.t("cropper.selectImage")),1)]),_:1},8,["class"])):st("",!0),k(a.CopperModal,{ref:"cropperModelRef",srcValue:a.sourceValue,onUploadSuccess:a.handleUploadSuccess},null,8,["srcValue"])])}],["__scopeId","data-v-34729f3a"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/Cropper/src/CropperAvatar.vue"]]),ra=Ct({name:"UserAvatar",__name:"UserAvatar",props:{img:L.string.def("")},setup(t,{expose:i}){i();const e=Di(),a=I(),n={userStore:e,cropperRef:a,handelUpload:async({data:r})=>{const s=await ki({avatarFile:r});a.value.close(),e.setUserAvatarAction(s.data)},get CropperAvatar(){return na}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),oa={class:"change-avatar"},sa=Mt(ra,[["render",function(t,i,e,a,n,r){return j(),ot("div",oa,[k(a.CropperAvatar,{ref:"cropperRef",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},showBtn:!1,value:e.img,width:"120px",onChange:a.handelUpload},null,8,["value"])])}],["__scopeId","data-v-d3692dbc"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/Profile/components/UserAvatar.vue"]]);export{sa as default};
