import{d as q,u as S,S as F,r as p,f as x,C as N,_ as T,am as U,c as j,k as r,w as o,F as B,o as n,I as X,q as s,j as D,t as b,m as h,ah as V,P as z,N as M,an as L,Q as I,R as O}from"./index-BaY5TDP-.js";import{_ as Q}from"./Dialog-CZSXtzfQ.js";import{_ as R}from"./ContentWrap-DKQn7kZm.js";import{_ as A}from"./index-avjYFQiD.js";import{_ as E}from"./index-BAz6Gqim.js";import{d as G}from"./formatTime-Dr6TiYYc.js";import{M as H}from"./bpmn-embedded-Bxfb97Hp.js";import{g as J,a as K}from"./index-5lnhJJF7.js";import{b as W}from"./formCreate-Dy2BGZHq.js";import"./index-DrSdAlug.js";import"./XTextButton-Cf-hbTFF.js";import"./XButton-BcV39lfk.js";import"./consts-vgsb8q48.js";import"./index-CuAlllbQ.js";import"./utils-DQEYWnsS.js";import"./index-ZFL2ufyC.js";import"./index-BCN8BzfC.js";import"./index-BeYJ8u62.js";import"./el-tree-select-DphqCDCz.js";import"./tree-z7HkrWVC.js";import"./index-C7Vgvn4F.js";import"./index-dK17nfjs.js";import"./index-D-_5jDBN.js";import"./index-RbAZqEQx.js";import"./constants-CEEr2azc.js";import"./index-D-US79ui.js";import"./el-drawer-r3cMvY4i.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";import"./index-l60I0Cke.js";const Y=T(q({name:"BpmProcessDefinition",__name:"index",setup(C,{expose:a}){a();const{push:v}=S(),{query:e}=F(),f=p(!0),k=p(0),c=p([]),i=x({pageNo:1,pageSize:10,key:e.key}),u=async()=>{f.value=!0;try{const l=await J(i);c.value=l.list,k.value=l.total}finally{f.value=!1}},m=p(!1),y=p({rule:[],option:{}}),w=p(!1),d=p("");N(()=>{u()});const g={push:v,query:e,loading:f,total:k,list:c,queryParams:i,getList:u,formDetailVisible:m,formDetailPreview:y,handleFormDetail:async l=>{l.formType==10?(W(y,l.formConf,l.formFields),m.value=!0):await v({path:l.formCustomCreatePath})},bpmnDetailVisible:w,bpmnXml:d,handleBpmnDetail:async l=>{var _;d.value="",w.value=!0,d.value=(_=await K(l.id))==null?void 0:_.bpmnXml},get dateFormatter(){return G},get MyProcessViewer(){return H}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(C,a,v,e,f,k){const c=E,i=z,u=M,m=L,y=I,w=A,d=R,g=U("form-create"),l=Q,_=O;return n(),j(B,null,[r(c,{title:"\u5DE5\u4F5C\u6D41\u624B\u518C",url:"https://doc.iocoder.cn/bpm/"}),r(d,null,{default:o(()=>[X((n(),s(y,{data:e.list},{default:o(()=>[r(i,{label:"\u5B9A\u4E49\u7F16\u53F7",align:"center",prop:"id",width:"400"}),r(i,{label:"\u6D41\u7A0B\u540D\u79F0",align:"center",prop:"name",width:"200"},{default:o(t=>[r(u,{type:"primary",link:"",onClick:P=>e.handleBpmnDetail(t.row)},{default:o(()=>[D("span",null,b(t.row.name),1)]),_:2},1032,["onClick"])]),_:1}),r(i,{label:"\u5B9A\u4E49\u5206\u7C7B",align:"center",prop:"categoryName",width:"100"}),r(i,{label:"\u8868\u5355\u4FE1\u606F",align:"center",prop:"formType",width:"200"},{default:o(t=>[t.row.formType===10?(n(),s(u,{key:0,type:"primary",link:"",onClick:P=>e.handleFormDetail(t.row)},{default:o(()=>[D("span",null,b(t.row.formName),1)]),_:2},1032,["onClick"])):(n(),s(u,{key:1,type:"primary",link:"",onClick:P=>e.handleFormDetail(t.row)},{default:o(()=>[D("span",null,b(t.row.formCustomCreatePath),1)]),_:2},1032,["onClick"]))]),_:1}),r(i,{label:"\u6D41\u7A0B\u7248\u672C",align:"center",prop:"processDefinition.version",width:"80"},{default:o(t=>[t.row?(n(),s(m,{key:0},{default:o(()=>[h("v"+b(t.row.version),1)]),_:2},1024)):(n(),s(m,{key:1,type:"warning"},{default:o(()=>a[4]||(a[4]=[h("\u672A\u90E8\u7F72")])),_:1}))]),_:1}),r(i,{label:"\u72B6\u6001",align:"center",prop:"version",width:"80"},{default:o(t=>[t.row.suspensionState===1?(n(),s(m,{key:0,type:"success"},{default:o(()=>a[5]||(a[5]=[h("\u6FC0\u6D3B")])),_:1})):V("",!0),t.row.suspensionState===2?(n(),s(m,{key:1,type:"warning"},{default:o(()=>a[6]||(a[6]=[h("\u6302\u8D77")])),_:1})):V("",!0)]),_:1}),r(i,{label:"\u90E8\u7F72\u65F6\u95F4",align:"center",prop:"deploymentTime",width:"180",formatter:e.dateFormatter},null,8,["formatter"]),r(i,{label:"\u5B9A\u4E49\u63CF\u8FF0",align:"center",prop:"description",width:"300","show-overflow-tooltip":""})]),_:1},8,["data"])),[[_,e.loading]]),r(w,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":a[0]||(a[0]=t=>e.queryParams.pageNo=t),limit:e.queryParams.pageSize,"onUpdate:limit":a[1]||(a[1]=t=>e.queryParams.pageSize=t),onPagination:e.getList},null,8,["total","page","limit"])]),_:1}),r(l,{title:"\u8868\u5355\u8BE6\u60C5",modelValue:e.formDetailVisible,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formDetailVisible=t),width:"800"},{default:o(()=>[r(g,{rule:e.formDetailPreview.rule,option:e.formDetailPreview.option},null,8,["rule","option"])]),_:1},8,["modelValue"]),r(l,{title:"\u6D41\u7A0B\u56FE",modelValue:e.bpmnDetailVisible,"onUpdate:modelValue":a[3]||(a[3]=t=>e.bpmnDetailVisible=t),width:"800"},{default:o(()=>[r(e.MyProcessViewer,{style:{height:"700px"},key:"designer",xml:e.bpmnXml},null,8,["xml"])]),_:1},8,["modelValue"])],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/bpm/definition/index.vue"]]);export{Y as default};
