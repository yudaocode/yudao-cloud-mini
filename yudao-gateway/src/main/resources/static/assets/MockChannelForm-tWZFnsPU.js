import{d as h,g as C,D as F,r as n,G as O,cP as S,_ as T,o as b,c as V,k as r,w as o,m as k,I as x,q as w,F as I,n as R,t as L,ak as M,al as N,L as U,Z as E,O as P,N as q,R as A}from"./index-BaY5TDP-.js";import{_ as J}from"./Dialog-CZSXtzfQ.js";import{C as Y}from"./constants-CEEr2azc.js";import{g as j,c as B,u as G}from"./index-pf8i-b2A.js";const Z=T(h({name:"MockChannelForm",__name:"MockChannelForm",emits:["success"],setup(D,{expose:t,emit:y}){const{t:a}=C(),d=F(),c=n(!1),f=n(""),l=n(!1),s=n({appId:"",code:"",status:void 0,feeRate:0,remark:"",config:{name:"mock-conf"}}),u=n(),p=async(e,_)=>{c.value=!0,l.value=!0,g(e,_);try{const i=await j(e,_);i&&i.id&&(s.value=i,s.value.config=JSON.parse(i.config)),f.value=s.value.id?"\u7F16\u8F91\u652F\u4ED8\u6E20\u9053":"\u521B\u5EFA\u652F\u4ED8\u6E20\u9053"}finally{l.value=!1}};t({open:p});const m=y,g=(e,_)=>{var i;s.value={appId:e,code:_,status:Y.ENABLE,remark:"",feeRate:0,config:{name:"mock-conf"}},(i=u.value)==null||i.resetFields()},v={t:a,message:d,dialogVisible:c,dialogTitle:f,formLoading:l,formData:s,formRules:{status:[{required:!0,message:"\u6E20\u9053\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},formRef:u,open:p,emit:m,submitForm:async()=>{if(u&&await u.value.validate()){l.value=!0;try{const e={...s.value};e.config=JSON.stringify(s.value.config),e.id?(await G(e),d.success(a("common.updateSuccess"))):(await B(e),d.success(a("common.createSuccess"))),c.value=!1,m("success")}finally{l.value=!1}}},resetForm:g,get DICT_TYPE(){return O},get getDictOptions(){return S}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),[["render",function(D,t,y,a,d,c){const f=M,l=N,s=U,u=E,p=P,m=q,g=J,v=A;return b(),V("div",null,[r(g,{modelValue:a.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>a.dialogVisible=e),title:a.dialogTitle,width:"800px"},{footer:o(()=>[r(m,{disabled:a.formLoading,type:"primary",onClick:a.submitForm},{default:o(()=>t[4]||(t[4]=[k("\u786E \u5B9A")])),_:1},8,["disabled"]),r(m,{onClick:t[2]||(t[2]=e=>a.dialogVisible=!1)},{default:o(()=>t[5]||(t[5]=[k("\u53D6 \u6D88")])),_:1})]),default:o(()=>[x((b(),w(p,{ref:"formRef",model:a.formData,rules:a.formRules,"label-width":"100px"},{default:o(()=>[r(s,{label:"\u6E20\u9053\u72B6\u6001","label-width":"180px",prop:"status"},{default:o(()=>[r(l,{modelValue:a.formData.status,"onUpdate:modelValue":t[0]||(t[0]=e=>a.formData.status=e)},{default:o(()=>[(b(!0),V(I,null,R(a.getDictOptions(a.DICT_TYPE.COMMON_STATUS),e=>(b(),w(f,{key:parseInt(e.value),value:parseInt(e.value)},{default:o(()=>[k(L(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(s,{label:"\u5907\u6CE8","label-width":"180px",prop:"remark"},{default:o(()=>[r(u,{modelValue:a.formData.remark,"onUpdate:modelValue":t[1]||(t[1]=e=>a.formData.remark=e),style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[v,a.formLoading]])]),_:1},8,["modelValue","title"])])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/pay/app/components/channel/MockChannelForm.vue"]]);export{Z as default};
