import{d as k,r as d,f as x,C as E,D as I,G as Y,H as F,_ as M,c as b,k as a,w as s,F as T,o as v,n as O,q as P,m as f,I as U,t as L,J as A,K as V,L as Q,M as z,z as B,N as G,O as H,P as j,Q as J,R as K}from"./index-BaY5TDP-.js";import{_ as W}from"./index-avjYFQiD.js";import{_ as X}from"./DictTag-QtcI9ZjC.js";import{_ as Z}from"./ContentWrap-DKQn7kZm.js";import{_ as $}from"./index-BAz6Gqim.js";import{d as ee}from"./formatTime-Dr6TiYYc.js";import{g as ae,u as N,a as te}from"./index-BBj0sWN0.js";import le from"./MyNotifyMessageDetail-CkF8ZiVW.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./el-descriptions-item-CRF_CO88.js";const re=M(k({name:"SystemMyNotify",__name:"index",setup(C,{expose:r}){r();const y=I(),e=d(!0),w=d(0),S=d([]),m=x({pageNo:1,pageSize:10,readStatus:void 0,createTime:[]}),g=d(),p=d(),o=d([]),i=async()=>{e.value=!0;try{const t=await ae(m);S.value=t.list,w.value=t.total}finally{e.value=!1}},u=()=>{m.pageNo=1,i()},n=d(),_=async t=>{await N(t),await i()};E(()=>{i()});const c={message:y,loading:e,total:w,list:S,queryParams:m,queryFormRef:g,tableRef:p,selectedIds:o,getList:i,handleQuery:u,resetQuery:()=>{g.value.resetFields(),p.value.clearSelection(),u()},detailRef:n,openDetail:t=>{t.readStatus||_(t.id),n.value.open(t)},handleReadOne:_,handleUpdateAll:async()=>{await te(),y.success("\u5168\u90E8\u5DF2\u8BFB\u6210\u529F\uFF01"),p.value.clearSelection(),await i()},handleUpdateList:async()=>{o.value.length!==0&&(await N(o.value),y.success("\u6279\u91CF\u5DF2\u8BFB\u6210\u529F\uFF01"),p.value.clearSelection(),await i())},selectable:t=>!t.readStatus,handleSelectionChange:t=>{o.value=[],t&&t.forEach(h=>o.value.push(h.id))},get DICT_TYPE(){return Y},get getBoolDictOptions(){return F},get dateFormatter(){return ee},MyNotifyMessageDetail:le};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(C,r,y,e,w,S){const m=$,g=A,p=V,o=Q,i=z,u=B,n=G,_=H,c=Z,t=j,h=X,D=J,q=W,R=K;return v(),b(T,null,[a(m,{title:"\u7AD9\u5185\u4FE1\u914D\u7F6E",url:"https://doc.iocoder.cn/notify/"}),a(c,null,{default:s(()=>[a(_,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:s(()=>[a(o,{label:"\u662F\u5426\u5DF2\u8BFB",prop:"readStatus"},{default:s(()=>[a(p,{modelValue:e.queryParams.readStatus,"onUpdate:modelValue":r[0]||(r[0]=l=>e.queryParams.readStatus=l),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"!w-240px"},{default:s(()=>[(v(!0),b(T,null,O(e.getBoolDictOptions(e.DICT_TYPE.INFRA_BOOLEAN_STRING),l=>(v(),P(g,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(o,{label:"\u53D1\u9001\u65F6\u95F4",prop:"createTime"},{default:s(()=>[a(i,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":r[1]||(r[1]=l=>e.queryParams.createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),a(o,null,{default:s(()=>[a(n,{onClick:e.handleQuery},{default:s(()=>[a(u,{icon:"ep:search",class:"mr-5px"}),r[4]||(r[4]=f(" \u641C\u7D22"))]),_:1}),a(n,{onClick:e.resetQuery},{default:s(()=>[a(u,{icon:"ep:refresh",class:"mr-5px"}),r[5]||(r[5]=f(" \u91CD\u7F6E"))]),_:1}),a(n,{onClick:e.handleUpdateList},{default:s(()=>[a(u,{icon:"ep:reading",class:"mr-5px"}),r[6]||(r[6]=f(" \u6807\u8BB0\u5DF2\u8BFB "))]),_:1}),a(n,{onClick:e.handleUpdateAll},{default:s(()=>[a(u,{icon:"ep:reading",class:"mr-5px"}),r[7]||(r[7]=f(" \u5168\u90E8\u5DF2\u8BFB "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(c,null,{default:s(()=>[U((v(),P(D,{data:e.list,ref:"tableRef","row-key":"id",onSelectionChange:e.handleSelectionChange},{default:s(()=>[a(t,{type:"selection",selectable:e.selectable,"reserve-selection":!0}),a(t,{label:"\u53D1\u9001\u4EBA",align:"center",prop:"templateNickname",width:"180"}),a(t,{label:"\u53D1\u9001\u65F6\u95F4",align:"center",prop:"createTime",width:"200",formatter:e.dateFormatter},null,8,["formatter"]),a(t,{label:"\u7C7B\u578B",align:"center",prop:"templateType",width:"180"},{default:s(l=>[a(h,{type:e.DICT_TYPE.SYSTEM_NOTIFY_TEMPLATE_TYPE,value:l.row.templateType},null,8,["type","value"])]),_:1}),a(t,{label:"\u6D88\u606F\u5185\u5BB9",align:"center",prop:"templateContent","show-overflow-tooltip":""}),a(t,{label:"\u662F\u5426\u5DF2\u8BFB",align:"center",prop:"readStatus",width:"160"},{default:s(l=>[a(h,{type:e.DICT_TYPE.INFRA_BOOLEAN_STRING,value:l.row.readStatus},null,8,["type","value"])]),_:1}),a(t,{label:"\u9605\u8BFB\u65F6\u95F4",align:"center",prop:"readTime",width:"200",formatter:e.dateFormatter},null,8,["formatter"]),a(t,{label:"\u64CD\u4F5C",align:"center",width:"160"},{default:s(l=>[a(n,{link:"",type:l.row.readStatus?"primary":"warning",onClick:se=>e.openDetail(l.row)},{default:s(()=>[f(L(l.row.readStatus?"\u8BE6\u60C5":"\u5DF2\u8BFB"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"])),[[R,e.loading]]),a(q,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":r[2]||(r[2]=l=>e.queryParams.pageNo=l),limit:e.queryParams.pageSize,"onUpdate:limit":r[3]||(r[3]=l=>e.queryParams.pageSize=l),onPagination:e.getList},null,8,["total","page","limit"])]),_:1}),a(e.MyNotifyMessageDetail,{ref:"detailRef"},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/system/notify/my/index.vue"]]);export{re as default};
