import{d as w,D as b,r as l,ao as x,_ as h,o as S,c as _,k as p}from"./index-BaY5TDP-.js";import R from"./Left-5lGAF3wx.js";import C from"./Right-DLI08IfQ.js";import{W}from"./index-Dq7IKwyK.js";import{W as E}from"./constants-BXWrMvZH.js";import"./Tag-BfWL5llS.js";import"./fetch-D5K_4anA.js";const k={class:"absolute top-0 left-0 right-0 bottom-0 flex"},y=h(w({__name:"index",setup(d,{expose:o}){o();const n=b(),e=l(""),i=l(!1),a=l(),t=()=>{var r;(r=a.value)==null||r.abort(),i.value=!1},u=l(),m={message:n,writeResult:e,isWriting:i,abortController:a,stopStream:t,rightRef:u,submit:r=>{a.value=new AbortController,e.value="",i.value=!0,W.writeStream({data:r,onMessage:async s=>{var c;const{code:f,data:g,msg:v}=JSON.parse(s.data);if(f!==0)return n.alert(`\u5199\u4F5C\u5F02\u5E38! ${v}`),void t();e.value=e.value+g,await x(),(c=u.value)==null||c.scrollToBottom()},ctrl:a.value,onClose:t,onError:(...s)=>{console.error("\u5199\u4F5C\u5F02\u5E38",...s),t()}})},handleExampleClick:r=>{e.value=E[r].data},reset:()=>{e.value=""},Left:R,Right:C};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),[["render",function(d,o,n,e,i,a){return S(),_("div",k,[p(e.Left,{"is-writing":e.isWriting,class:"h-full",onSubmit:e.submit,onReset:e.reset,onExample:e.handleExampleClick},null,8,["is-writing"]),p(e.Right,{"is-writing":e.isWriting,onStopStream:e.stopStream,ref:"rightRef",class:"flex-grow",content:e.writeResult,"onUpdate:content":o[0]||(o[0]=t=>e.writeResult=t)},null,8,["is-writing","content"])])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/write/index/index.vue"]]);export{y as default};
