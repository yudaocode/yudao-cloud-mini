import{d as M,r as h,f as _,C,ev as x,_ as y,o as b,q as w,w as n,k as r,v as D,E as P,l as O}from"./index-BaY5TDP-.js";import{E as q}from"./el-skeleton-item-BYAIkmCs.js";import{e as A,_ as N}from"./Echart-BQxFkezy.js";import{c as S}from"./china-aeAnb323.js";import{S as R}from"./portrait-CXf55QaH.js";import"./echarts-DpbyC_6K.js";const E=y(M({name:"PortraitCustomerArea",__name:"PortraitCustomerArea",props:{queryParams:{type:null,required:!0}},setup(f,{expose:v}){var g;const c=f;(g=A)==null||g.registerMap("china",S);const o=h(!1),l=h([]),m=_({title:{text:"\u5168\u90E8\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),i=_({title:{text:"\u6210\u4EA4\u5BA2\u6237",left:"center"},tooltip:{trigger:"item",showDelay:0,transitionDuration:.2},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u5BA2\u6237\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),s=async()=>{o.value=!0;const t=await R.getCustomerArea(c.queryParams);l.value=t.map(e=>({...e,areaName:x(e.areaName)})),u(),p(),o.value=!1};v({loadData:s});const u=()=>{let t=0,e=0;m.series[0].data=l.value.map(a=>(t=Math.min(t,a.customerCount||0),e=Math.max(e,a.customerCount||0),{...a,name:a.areaName,value:a.customerCount||0})),m.visualMap.min=t,m.visualMap.max=e},p=()=>{let t=0,e=0;i.series[0].data=l.value.map(a=>(t=Math.min(t,a.dealCount||0),e=Math.max(e,a.dealCount||0),{...a,name:a.areaName,value:a.dealCount||0})),i.visualMap.min=t,i.visualMap.max=e};C(()=>{s()});const d={props:c,loading:o,areaStatisticsList:l,echartsOption:m,echartsOption2:i,loadData:s,buildLeftMap:u,buildRightMap:p};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),[["render",function(f,v,c,o,l,m){const i=N,s=q,u=D,p=P,d=O;return b(),w(d,{shadow:"never"},{default:n(()=>[r(p,{gutter:20},{default:n(()=>[r(u,{span:12},{default:n(()=>[r(s,{loading:o.loading,animated:""},{default:n(()=>[r(i,{height:500,options:o.echartsOption},null,8,["options"])]),_:1},8,["loading"])]),_:1}),r(u,{span:12},{default:n(()=>[r(s,{loading:o.loading,animated:""},{default:n(()=>[r(i,{height:500,options:o.echartsOption2},null,8,["options"])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/statistics/portrait/components/PortraitCustomerArea.vue"]]);export{E as default};
