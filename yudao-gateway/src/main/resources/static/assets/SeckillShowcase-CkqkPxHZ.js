import{d as A,b2 as _,p as b,b as g,r as h,au as V,aD as S,_ as w,o as u,c as m,j as d,F as y,n as x,k as c,w as k,I as T,ag as C,q as R,ah as j,z as U,aK as q}from"./index-BaY5TDP-.js";import{E}from"./el-image-Bg-CwbDE.js";import{e as I}from"./seckillActivity-Cs09fUfF.js";import N from"./SeckillTableSelect-Bq1hLJae.js";import"./Dialog-CZSXtzfQ.js";import"./ContentWrap-DKQn7kZm.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";import"./formatter-DdccBgw4.js";import"./formatTime-Dr6TiYYc.js";const z=A({name:"SeckillShowcase",__name:"SeckillShowcase",props:{modelValue:_([Number,Array]).isRequired,limit:b.number.def(Number.MAX_VALUE),disabled:b.bool.def(!1)},emits:["update:modelValue","change"],setup(r,{expose:p,emit:o}){p();const l=r,v=g(()=>!l.disabled&&(!l.limit||a.value.length<l.limit)),a=h([]);V(()=>l.modelValue,async()=>{const e=S(l.modelValue)?l.modelValue:l.modelValue?[l.modelValue]:[];e.length!==0?(a.value.length===0||a.value.some(f=>!e.includes(f.id)))&&(a.value=await I(e)):a.value=[]},{immediate:!0});const n=h(),t=o,i=()=>{if(l.limit===1){const e=a.value.length>0?a.value[0]:null;t("update:modelValue",(e==null?void 0:e.id)||0),t("change",e)}else t("update:modelValue",a.value.map(e=>e.id)),t("change",a.value)},s={props:l,canAdd:v,Activitys:a,seckillActivityTableSelectRef:n,openSeckillActivityTableSelect:()=>{n.value.open(a.value)},handleActivitySelected:e=>{a.value=S(e)?e:[e],i()},handleRemoveActivity:e=>{a.value.splice(e,1),i()},emit:t,emitActivityChange:i,SeckillTableSelect:N};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),D={class:"flex flex-wrap items-center gap-8px"},F={class:"relative h-full w-full"},K=w(z,[["render",function(r,p,o,l,v,a){const n=E,t=U,i=q;return u(),m(y,null,[d("div",D,[(u(!0),m(y,null,x(l.Activitys,(s,e)=>(u(),m("div",{key:s.id,class:"select-box spu-pic"},[c(i,{content:s.name},{default:k(()=>[d("div",F,[c(n,{src:s.picUrl,class:"h-full w-full"},null,8,["src"]),T(c(t,{class:"del-icon",icon:"ep:circle-close-filled",onClick:f=>l.handleRemoveActivity(e)},null,8,["onClick"]),[[C,!o.disabled]])])]),_:2},1032,["content"])]))),128)),l.canAdd?(u(),R(i,{key:0,content:"\u9009\u62E9\u6D3B\u52A8"},{default:k(()=>[d("div",{class:"select-box",onClick:l.openSeckillActivityTableSelect},[c(t,{icon:"ep:plus"})])]),_:1})):j("",!0)]),c(l.SeckillTableSelect,{ref:"seckillActivityTableSelectRef",multiple:o.limit!=1,onChange:l.handleActivitySelected},null,8,["multiple"])],64)}],["__scopeId","data-v-baf14de1"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/seckill/components/SeckillShowcase.vue"]]);export{K as default};
