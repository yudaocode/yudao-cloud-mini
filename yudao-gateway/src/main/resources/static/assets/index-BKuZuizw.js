import{d as N,u as Y,r as m,f as A,C as L,G as O,U as E,_ as z,o as i,c,k as e,w as r,Y as B,m as p,F as b,n as k,q as I,I as R,t as T,ah as K,Z as H,L as j,z as G,N as J,J as Z,K as W,M as X,dF as $,O as ee,P as ae,b8 as te,Q as le,R as re}from"./index-BaY5TDP-.js";import{_ as oe}from"./index-avjYFQiD.js";import{_ as se}from"./DictTag-QtcI9ZjC.js";import{_ as ne}from"./ContentWrap-DKQn7kZm.js";import{_ as ie}from"./index-BAz6Gqim.js";import{d as ue,a as pe}from"./formatTime-Dr6TiYYc.js";import{h as de}from"./index-ZFL2ufyC.js";import{C as me}from"./index-D7iZxFey.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";const ce={key:0,class:"flex flex-col"},fe=z(N({name:"BpmDoneTask",__name:"index",setup(x,{expose:l}){l();const{push:_}=Y(),a=m(!0),w=m(0),v=m([]),u=A({pageNo:1,pageSize:10,name:"",category:void 0,status:void 0,createTime:[]}),g=m(),s=m([]),h=m(!1),n=async()=>{a.value=!0;try{const d=await de(u);v.value=d.list,w.value=d.total}finally{a.value=!1}},f=()=>{u.pageNo=1,n()};L(async()=>{await n(),s.value=await me.getCategorySimpleList()});const y={push:_,loading:a,total:w,list:v,queryParams:u,queryFormRef:g,categoryList:s,showPopover:h,getList:n,handleQuery:f,resetQuery:()=>{g.value.resetFields(),f()},handleAudit:d=>{_({name:"BpmProcessInstanceDetail",query:{id:d.processInstance.id,taskId:d.id}})},get DICT_TYPE(){return O},get getIntDictOptions(){return E},get dateFormatter(){return ue},get formatPast2(){return pe}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(x,l,_,a,w,v){const u=ie,g=H,s=j,h=G,n=J,f=Z,y=W,d=X,C=$,S=ee,q=ne,o=ae,V=te,D=se,U=le,F=oe,Q=re;return i(),c(b,null,[e(u,{title:"\u5BA1\u6279\u901A\u8FC7\u3001\u4E0D\u901A\u8FC7\u3001\u9A73\u56DE",url:"https://doc.iocoder.cn/bpm/task-todo-done/"}),e(u,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(u,{title:"\u5BA1\u6279\u8F6C\u529E\u3001\u59D4\u6D3E\u3001\u6284\u9001",url:"https://doc.iocoder.cn/bpm/task-delegation-and-cc/"}),e(u,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(q,null,{default:r(()=>[e(S,{ref:"queryFormRef",inline:!0,model:a.queryParams,class:"-mb-15px","label-width":"68px"},{default:r(()=>[e(s,{label:"",prop:"name"},{default:r(()=>[e(g,{modelValue:a.queryParams.name,"onUpdate:modelValue":l[0]||(l[0]=t=>a.queryParams.name=t),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",onKeyup:B(a.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),e(s,null,{default:r(()=>[e(n,{onClick:a.handleQuery},{default:r(()=>[e(h,{class:"mr-5px",icon:"ep:search"}),l[8]||(l[8]=p(" \u641C\u7D22 "))]),_:1})]),_:1}),e(s,{label:"",prop:"category",style:{position:"absolute",right:"300px"}},{default:r(()=>[e(y,{modelValue:a.queryParams.category,"onUpdate:modelValue":l[1]||(l[1]=t=>a.queryParams.category=t),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B",clearable:"",class:"!w-155px",onChange:a.handleQuery},{default:r(()=>[(i(!0),c(b,null,k(a.categoryList,t=>(i(),I(f,{key:t.code,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"",prop:"status",style:{position:"absolute",right:"130px"}},{default:r(()=>[e(y,{modelValue:a.queryParams.status,"onUpdate:modelValue":l[2]||(l[2]=t=>a.queryParams.status=t),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u72B6\u6001",clearable:"",class:"!w-155px",onChange:a.handleQuery},{default:r(()=>[(i(!0),c(b,null,k(a.getIntDictOptions(a.DICT_TYPE.BPM_PROCESS_INSTANCE_STATUS),t=>(i(),I(f,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{style:{position:"absolute",right:"0px"}},{default:r(()=>[e(C,{visible:a.showPopover,persistent:"",width:400,"show-arrow":!1,placement:"bottom-end"},{reference:r(()=>[e(n,{onClick:l[3]||(l[3]=t=>a.showPopover=!a.showPopover)},{default:r(()=>[e(h,{icon:"ep:plus",class:"mr-5px"}),l[9]||(l[9]=p("\u9AD8\u7EA7\u7B5B\u9009 "))]),_:1})]),default:r(()=>[e(s,{label:"\u53D1\u8D77\u65F6\u95F4",class:"bold-label","label-position":"top",prop:"createTime"},{default:r(()=>[e(d,{modelValue:a.queryParams.createTime,"onUpdate:modelValue":l[4]||(l[4]=t=>a.queryParams.createTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(s,{class:"bold-label","label-position":"top"},{default:r(()=>[e(n,{onClick:a.handleQuery},{default:r(()=>l[10]||(l[10]=[p(" \u786E\u8BA4")])),_:1}),e(n,{onClick:l[5]||(l[5]=t=>a.showPopover=!1)},{default:r(()=>l[11]||(l[11]=[p(" \u53D6\u6D88")])),_:1}),e(n,{onClick:a.resetQuery},{default:r(()=>l[12]||(l[12]=[p(" \u6E05\u7A7A")])),_:1})]),_:1})]),_:1},8,["visible"])]),_:1})]),_:1},8,["model"])]),_:1}),e(q,null,{default:r(()=>[R((i(),I(U,{data:a.list},{default:r(()=>[e(o,{align:"center",label:"\u6D41\u7A0B",prop:"processInstance.name",width:"180"}),e(o,{label:"\u6458\u8981",prop:"processInstance.summary","min-width":"180"},{default:r(t=>[t.row.processInstance.summary&&t.row.processInstance.summary.length>0?(i(),c("div",ce,[(i(!0),c(b,null,k(t.row.processInstance.summary,(P,M)=>(i(),c("div",{key:M},[e(V,{type:"info"},{default:r(()=>[p(T(P.key)+" : "+T(P.value),1)]),_:2},1024)]))),128))])):K("",!0)]),_:1}),e(o,{align:"center",label:"\u53D1\u8D77\u4EBA",prop:"processInstance.startUser.nickname",width:"100"}),e(o,{formatter:a.dateFormatter,align:"center",label:"\u53D1\u8D77\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(o,{align:"center",label:"\u5F53\u524D\u4EFB\u52A1",prop:"name",width:"180"}),e(o,{formatter:a.dateFormatter,align:"center",label:"\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(o,{formatter:a.dateFormatter,align:"center",label:"\u4EFB\u52A1\u7ED3\u675F\u65F6\u95F4",prop:"endTime",width:"180"},null,8,["formatter"]),e(o,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status",width:"120"},{default:r(t=>[e(D,{type:a.DICT_TYPE.BPM_TASK_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),e(o,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"180"}),e(o,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis",width:"160"},{default:r(t=>[p(T(a.formatPast2(t.row.durationInMillis)),1)]),_:1}),e(o,{align:"center",label:"\u6D41\u7A0B\u7F16\u53F7",prop:"processInstanceId","show-overflow-tooltip":!0}),e(o,{align:"center",label:"\u4EFB\u52A1\u7F16\u53F7",prop:"id","show-overflow-tooltip":!0}),e(o,{align:"center",label:"\u64CD\u4F5C",fixed:"right",width:"80"},{default:r(t=>[e(n,{link:"",type:"primary",onClick:P=>a.handleAudit(t.row)},{default:r(()=>l[13]||(l[13]=[p("\u5386\u53F2")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Q,a.loading]]),e(F,{limit:a.queryParams.pageSize,"onUpdate:limit":l[6]||(l[6]=t=>a.queryParams.pageSize=t),page:a.queryParams.pageNo,"onUpdate:page":l[7]||(l[7]=t=>a.queryParams.pageNo=t),total:a.total,onPagination:a.getList},null,8,["limit","page","total"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/bpm/task/done/index.vue"]]);export{fe as default};
