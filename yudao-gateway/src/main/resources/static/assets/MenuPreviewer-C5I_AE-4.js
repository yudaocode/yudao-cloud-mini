import{d as C,b as V,_ as f,o as r,c as m,k as p,w as x,j as h,a2 as I,m as E,t as g,ah as b,F as M,z as w}from"./index-BaY5TDP-.js";import{V as S}from"./vuedraggable.umd-CVSuxhJW.js";const D={class:"menu_bottom"},L=["onClick"],P={key:0,class:"submenu"},U={class:"menu_bottom subtitle"},q=["onClick"],N=["onClick"],O=f(C({__name:"MenuPreviewer",props:{modelValue:{type:Array,required:!0},activeIndex:{type:String,required:!0},parentIndex:{type:Number,required:!0},accountId:{type:Number,required:!0}},emits:["update:modelValue","menu-clicked","submenu-clicked"],setup(k,{expose:_,emit:y}){_();const e=k,u=y,c=V({get:()=>e.modelValue,set:n=>u("update:modelValue",n)}),s=(n,a)=>{u("menu-clicked",n,a)},d=(n,a,l)=>{u("submenu-clicked",n,a,l)},t={props:e,emit:u,menuList:c,addMenu:()=>{const n=c.value.length,a={name:"\u83DC\u5355\u540D\u79F0",children:[],reply:{type:"text",accountId:e.accountId}};c.value[n]=a,s(a,n-1)},addSubMenu:(n,a)=>{const l=a.children.length,i={name:"\u5B50\u83DC\u5355\u540D\u79F0",reply:{type:"text",accountId:e.accountId}};a.children[l]=i,d(a.children[l],n,l)},menuClicked:s,subMenuClicked:d,onParentDragEnd:({oldIndex:n,newIndex:a})=>{if(e.activeIndex==="__MENU_NOT_SELECTED__")return;let l=new Array(c.value.length).fill(!1);l[e.parentIndex]=!0;const[i]=l.splice(n,1);l.splice(a,0,i);const o=l.indexOf(!0),v=c.value[o];u("menu-clicked",v,o)},onChildDragEnd:({newIndex:n})=>{var o;const a=e.parentIndex,l=n,i=(o=c.value[a])==null?void 0:o.children;if(i&&(i==null?void 0:i.length)>0){const v=i[l];u("submenu-clicked",v,a,l)}},get draggable(){return S}};return Object.defineProperty(t,"__isScriptSetup",{enumerable:!1,value:!0}),t}}),[["render",function(k,_,y,e,u,c){const s=w;return r(),m(M,null,[p(e.draggable,{modelValue:e.menuList,"onUpdate:modelValue":_[0]||(_[0]=d=>e.menuList=d),"item-key":"id","ghost-class":"draggable-ghost",animation:400,onEnd:e.onParentDragEnd},{item:x(({element:d,index:t})=>[h("div",D,[h("div",{onClick:n=>e.menuClicked(d,t),class:I(["menu_item",{active:e.props.activeIndex===`${t}`}])},[p(s,{icon:"ep:fold",color:"black"}),E(g(d.name),1)],10,L),e.props.parentIndex===t&&d.children?(r(),m("div",P,[p(e.draggable,{modelValue:d.children,"onUpdate:modelValue":n=>d.children=n,"item-key":"id","ghost-class":"draggable-ghost",animation:400,onEnd:e.onChildDragEnd},{item:x(({element:n,index:a})=>[h("div",U,[d.children?(r(),m("div",{key:0,class:I(["menu_subItem",{active:e.props.activeIndex===`${t}-${a}`}]),onClick:l=>e.subMenuClicked(n,t,a)},g(n.name),11,q)):b("",!0)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),!d.children||d.children.length<5?(r(),m("div",{key:0,class:"menu_bottom menu_addicon",onClick:n=>e.addSubMenu(t,d)},[p(s,{icon:"ep:plus",class:"plus"})],8,N)):b("",!0)])):b("",!0)])]),_:1},8,["modelValue"]),e.menuList.length<3?(r(),m("div",{key:0,class:"menu_bottom menu_addicon",onClick:e.addMenu},[p(s,{icon:"ep:plus",class:"plus"})])):b("",!0)],64)}],["__scopeId","data-v-733d6a82"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mp/menu/components/MenuPreviewer.vue"]]);export{O as default};
