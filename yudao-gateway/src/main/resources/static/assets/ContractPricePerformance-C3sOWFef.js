import{d as v,r as f,f as x,C as L,_,o as c,c as D,k as d,w as i,I as M,q as b,F as g,n as w,m as P,t as B,l as A,P as S,Q as Y,R as F}from"./index-BaY5TDP-.js";import{E as I}from"./el-skeleton-item-BYAIkmCs.js";import{_ as U}from"./Echart-BQxFkezy.js";import{S as k}from"./performance-B-2AzE2h.js";import"./echarts-DpbyC_6K.js";const q=_(v({name:"ContractPricePerformance",__name:"ContractPricePerformance",props:{queryParams:{type:null,required:!0}},setup(y,{expose:C}){const m=y,o=f(!1),l=f([]),e=x({grid:{left:20,right:20,bottom:20,containLabel:!0},legend:{},series:[{name:"\u5F53\u6708\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09",type:"line",data:[]},{name:"\u4E0A\u6708\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09",type:"line",data:[]},{name:"\u53BB\u5E74\u540C\u6708\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09",type:"line",data:[]},{name:"\u73AF\u6BD4\u589E\u957F\u7387\uFF08%\uFF09",type:"line",yAxisIndex:1,data:[]},{name:"\u540C\u6BD4\u589E\u957F\u7387\uFF08%\uFF09",type:"line",yAxisIndex:1,data:[]}],toolbox:{feature:{dataZoom:{xAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u5BA2\u6237\u603B\u91CF\u5206\u6790"}}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"\u91D1\u989D\uFF08\u5143\uFF09",axisTick:{show:!1},axisLabel:{color:"#BDBDBD",formatter:"{value}"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!0,lineStyle:{color:"#e6e6e6"}}},{type:"value",name:"",axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD",formatter:"{value}%"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!0,lineStyle:{color:"#e6e6e6"}}}],xAxis:{type:"category",name:"\u65E5\u671F",data:[]}}),r=async()=>{o.value=!0;const a=await k.getContractPricePerformance(m.queryParams);e.xAxis&&e.xAxis.data&&(e.xAxis.data=a.map(t=>t.time)),e.series&&e.series[0]&&e.series[0].data&&(e.series[0].data=a.map(t=>t.currentMonthCount)),e.series&&e.series[1]&&e.series[1].data&&(e.series[1].data=a.map(t=>t.lastMonthCount),e.series[3].data=a.map(t=>t.lastMonthCount!==0?((t.currentMonthCount-t.lastMonthCount)/t.lastMonthCount*100).toFixed(2):"NULL")),e.series&&e.series[2]&&e.series[2].data&&(e.series[2].data=a.map(t=>t.lastYearCount),e.series[4].data=a.map(t=>t.lastYearCount!==0?((t.currentMonthCount-t.lastYearCount)/t.lastYearCount*100).toFixed(2):"NULL")),l.value=a,p(),o.value=!1},n=x([]),s=x([{title:"\u5F53\u6708\u5408\u540C\u91D1\u989D\u7EDF\u8BA1\uFF08\u5143\uFF09"},{title:"\u4E0A\u6708\u5408\u540C\u91D1\u989D\u7EDF\u8BA1\uFF08\u5143\uFF09"},{title:"\u53BB\u5E74\u5F53\u6708\u5408\u540C\u91D1\u989D\u7EDF\u8BA1\uFF08\u5143\uFF09"},{title:"\u73AF\u6BD4\u589E\u957F\u7387\uFF08%\uFF09"},{title:"\u540C\u6BD4\u589E\u957F\u7387\uFF08%\uFF09"}]),p=()=>{n.splice(0,n.length),n.push({label:"\u65E5\u671F",prop:"title"}),l.value.forEach((a,t)=>{const h={label:a.time,prop:"prop"+t};n.push(h),s[0]["prop"+t]=a.currentMonthCount,s[1]["prop"+t]=a.lastMonthCount,s[2]["prop"+t]=a.lastYearCount,s[3]["prop"+t]=a.lastMonthCount!==0?((a.currentMonthCount-a.lastMonthCount)/a.lastMonthCount*100).toFixed(2):"NULL",s[4]["prop"+t]=a.lastYearCount!==0?((a.currentMonthCount-a.lastYearCount)/a.lastYearCount*100).toFixed(2):"NULL"})};C({loadData:r}),L(async()=>{await r()});const u={props:m,loading:o,list:l,echartsOption:e,loadData:r,columnsData:n,tableData:s,convertListData:p};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),[["render",function(y,C,m,o,l,e){const r=U,n=I,s=A,p=S,u=Y,a=F;return c(),D(g,null,[d(s,{shadow:"never"},{default:i(()=>[d(n,{loading:o.loading,animated:""},{default:i(()=>[d(r,{height:500,options:o.echartsOption},null,8,["options"])]),_:1},8,["loading"])]),_:1}),d(s,{shadow:"never",class:"mt-16px"},{default:i(()=>[M((c(),b(u,{data:o.tableData},{default:i(()=>[(c(!0),D(g,null,w(o.columnsData,t=>(c(),b(p,{key:t.prop,label:t.label,prop:t.prop,align:"center"},{default:i(h=>[P(B(h.row[t.prop]),1)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["data"])),[[a,o.loading]])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/statistics/performance/components/ContractPricePerformance.vue"]]);export{q as default};
