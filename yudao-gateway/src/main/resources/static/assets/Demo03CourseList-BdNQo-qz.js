import{d as h,g as k,D as F,r as y,f as D,au as S,_ as q,X as I,o as d,c as N,k as s,w as l,I as _,q as v,m as C,F as x,z as L,N as z,P as R,Q as U,R as j}from"./index-BaY5TDP-.js";import{_ as Q}from"./ContentWrap-DKQn7kZm.js";import{_ as O}from"./index-avjYFQiD.js";import{d as T}from"./formatTime-Dr6TiYYc.js";import{e as X,f as A}from"./index-DmE3xvm5.js";import B from"./Demo03CourseForm-B7c66Gor.js";import"./index-DrSdAlug.js";import"./Dialog-CZSXtzfQ.js";const E=q(h({__name:"Demo03CourseList",props:{studentId:{type:Number,required:!1}},setup(P,{expose:t}){t();const{t:w}=k(),e=F(),m=P,u=y(!1),c=y([]),n=y(0),o=D({pageNo:1,pageSize:10,studentId:void 0});S(()=>m.studentId,a=>{a&&(o.studentId=a,f())},{immediate:!0,deep:!0});const p=async()=>{u.value=!0;try{const a=await X(o);c.value=a.list,n.value=a.total}finally{u.value=!1}},f=()=>{o.pageNo=1,p()},g=y(),i={t:w,message:e,props:m,loading:u,list:c,total:n,queryParams:o,getList:p,handleQuery:f,formRef:g,openForm:(a,r)=>{m.studentId?g.value.open(a,r,m.studentId):e.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")},handleDelete:async a=>{try{await e.delConfirm(),await A(a),e.success(w("common.delSuccess")),await p()}catch{}},get dateFormatter(){return T},Demo03CourseForm:B};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),[["render",function(P,t,w,e,m,u){const c=L,n=z,o=R,p=U,f=O,g=Q,i=I("hasPermi"),a=j;return d(),N(x,null,[s(g,null,{default:l(()=>[_((d(),v(n,{plain:"",type:"primary",onClick:t[0]||(t[0]=r=>e.openForm("create"))},{default:l(()=>[s(c,{class:"mr-5px",icon:"ep:plus"}),t[3]||(t[3]=C(" \u65B0\u589E "))]),_:1})),[[i,["infra:demo03-student:create"]]]),_((d(),v(p,{data:e.list,"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[s(o,{align:"center",label:"\u7F16\u53F7",prop:"id"}),s(o,{align:"center",label:"\u540D\u5B57",prop:"name"}),s(o,{align:"center",label:"\u5206\u6570",prop:"score"}),s(o,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),s(o,{align:"center",label:"\u64CD\u4F5C"},{default:l(r=>[_((d(),v(n,{link:"",type:"primary",onClick:b=>e.openForm("update",r.row.id)},{default:l(()=>t[4]||(t[4]=[C(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[i,["infra:demo03-student:update"]]]),_((d(),v(n,{link:"",type:"danger",onClick:b=>e.handleDelete(r.row.id)},{default:l(()=>t[5]||(t[5]=[C(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[i,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[a,e.loading]]),s(f,{limit:e.queryParams.pageSize,"onUpdate:limit":t[1]||(t[1]=r=>e.queryParams.pageSize=r),page:e.queryParams.pageNo,"onUpdate:page":t[2]||(t[2]=r=>e.queryParams.pageNo=r),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),s(e.Demo03CourseForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/infra/demo/demo03/erp/components/Demo03CourseList.vue"]]);export{E as default};
