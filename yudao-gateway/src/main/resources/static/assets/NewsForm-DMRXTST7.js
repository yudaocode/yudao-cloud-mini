import{D as I,ee as F,df as z,d as O,b4 as E,a as L,b as k,r as P,cn as A,_ as j,o as d,q as f,w as i,k as l,j as u,c as h,F as D,n as M,a2 as U,t as b,ah as p,z as q,N as B,E as T,b1 as R,Z as W,v as Z,e8 as G,b7 as H}from"./index-BaY5TDP-.js";import J from"./CoverSelect-BEYWDxQp.js";const V=I(),K=(N,o)=>({MENU_CONF:{uploadImage:{server:N,maxFileSize:5242880,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{accountId:o,type:"image"},metaWithUrl:!0,headers:{Accept:"*",Authorization:"Bearer "+F(),"tenant-id":z()},withCredentials:!0,timeout:5e3,fieldName:"file",onBeforeUpload:a=>(console.log(a),a),onProgress(a){console.log("progress",a)},onSuccess(a,e){console.log("onSuccess",a,e)},onFailed(a,e){V.alertError(e.message),console.log("onFailed",a,e)},onError(a,e,g){V.alertError(e.message),console.error("onError",a,e,g)},customInsert(a,e){e(a.data.url,"image",a.data.url)}}}}),Q=()=>({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),X=O({name:"NewsForm",__name:"NewsForm",props:{isCreating:{type:Boolean,required:!0},modelValue:{type:[Array,null],required:!0}},emits:["update:modelValue"],setup(N,{expose:o,emit:a}){o();const e=I(),g=N,_=E("accountId"),m="http://localhost:48080/admin-api/mp/material/upload-permanent",v=K(m,L(_)),w=a,n=k({get:()=>g.modelValue===null?[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}]:g.modelValue,set(s){w("update:modelValue",s)}}),c=P(0),C=k(()=>n.value[c.value]),y={message:e,props:g,accountId:_,UPLOAD_URL:m,editorConfig:v,emit:w,newsList:n,activeNewsIndex:c,activeNewsItem:C,moveDownNews:s=>{const t=n.value[s];n.value[s]=n.value[s+1],n.value[s+1]=t,c.value=s+1},moveUpNews:s=>{const t=n.value[s];n.value[s]=n.value[s-1],n.value[s-1]=t,c.value=s-1},removeNews:async s=>{try{await e.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6587\u5417?"),n.value.splice(s,1),c.value===s&&(c.value=0)}catch{}},plusNews:()=>{n.value.push({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),c.value=n.value.length-1},get Editor(){return A},CoverSelect:J};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),Y={class:"select-item"},$=["onClick"],ee={class:"news-content"},le=["src"],te={class:"news-content-title"},ae={key:0,class:"child"},oe=["onClick"],se={class:"news-content-item"},ne={class:"news-content-item-title"},ie={class:"news-content-item-img"},re=["src"],ce={class:"child"},de={key:0},S=j(X,[["render",function(N,o,a,e,g,_){const m=q,v=B,w=T,n=R,c=W,C=Z,y=G,s=H;return d(),f(s,null,{default:i(()=>[l(n,{width:"40%"},{default:i(()=>[u("div",Y,[(d(!0),h(D,null,M(e.newsList,(t,r)=>(d(),h("div",{key:r},[r===0?(d(),h("div",{key:0,class:U(["news-main father",{activeAddNews:e.activeNewsIndex===r}]),onClick:x=>e.activeNewsIndex=r},[u("div",ee,[u("img",{class:"material-img",src:t.thumbUrl},null,8,le),u("div",te,b(t.title),1)]),e.newsList.length>1?(d(),h("div",ae,[l(v,{type:"info",circle:"",size:"small",onClick:()=>e.moveDownNews(r)},{default:i(()=>[l(m,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"]),a.isCreating?(d(),f(v,{key:0,type:"danger",circle:"",size:"small",onClick:()=>e.removeNews(r)},{default:i(()=>[l(m,{icon:"ep:delete"})]),_:2},1032,["onClick"])):p("",!0)])):p("",!0)],10,$)):p("",!0),r>0?(d(),h("div",{key:1,class:U(["news-main-item father",{activeAddNews:e.activeNewsIndex===r}]),onClick:x=>e.activeNewsIndex=r},[u("div",se,[u("div",ne,b(t.title),1),u("div",ie,[u("img",{class:"material-img",src:t.thumbUrl,width:"100%"},null,8,re)])]),u("div",ce,[e.newsList.length>r+1?(d(),f(v,{key:0,circle:"",type:"info",size:"small",onClick:()=>e.moveDownNews(r)},{default:i(()=>[l(m,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"])):p("",!0),r>0?(d(),f(v,{key:1,type:"info",circle:"",size:"small",onClick:()=>e.moveUpNews(r)},{default:i(()=>[l(m,{icon:"ep:arrow-up-bold"})]),_:2},1032,["onClick"])):p("",!0),a.isCreating?(d(),f(v,{key:2,type:"danger",size:"small",circle:"",onClick:()=>e.removeNews(r)},{default:i(()=>[l(m,{icon:"ep:delete"})]),_:2},1032,["onClick"])):p("",!0)])],10,oe)):p("",!0)]))),128)),l(w,{justify:"center",class:"ope-row"},{default:i(()=>[e.newsList.length<8&&a.isCreating?(d(),f(v,{key:0,type:"primary",circle:"",onClick:e.plusNews},{default:i(()=>[l(m,{icon:"ep:plus"})]),_:1})):p("",!0)]),_:1})])]),_:1}),l(y,null,{default:i(()=>[e.newsList.length>0?(d(),h("div",de,[l(w,{gutter:20},{default:i(()=>[l(c,{modelValue:e.activeNewsItem.title,"onUpdate:modelValue":o[0]||(o[0]=t=>e.activeNewsItem.title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF08\u5FC5\u586B\uFF09"},null,8,["modelValue"]),l(c,{modelValue:e.activeNewsItem.author,"onUpdate:modelValue":o[1]||(o[1]=t=>e.activeNewsItem.author=t),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",style:{"margin-top":"5px"}},null,8,["modelValue"]),l(c,{modelValue:e.activeNewsItem.contentSourceUrl,"onUpdate:modelValue":o[2]||(o[2]=t=>e.activeNewsItem.contentSourceUrl=t),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587\u5730\u5740",style:{"margin-top":"5px"}},null,8,["modelValue"])]),_:1}),l(w,{gutter:20},{default:i(()=>[l(C,{span:12},{default:i(()=>[l(e.CoverSelect,{modelValue:e.activeNewsItem,"onUpdate:modelValue":o[3]||(o[3]=t=>e.activeNewsItem=t),"is-first":e.activeNewsIndex===0},null,8,["modelValue","is-first"])]),_:1}),l(C,{span:12},{default:i(()=>[o[6]||(o[6]=u("p",null,"\u6458\u8981:",-1)),l(c,{rows:8,type:"textarea",modelValue:e.activeNewsItem.digest,"onUpdate:modelValue":o[4]||(o[4]=t=>e.activeNewsItem.digest=t),placeholder:"\u8BF7\u8F93\u5165\u6458\u8981",class:"digest",maxlength:"120"},null,8,["modelValue"])]),_:1})]),_:1}),l(w,null,{default:i(()=>[l(e.Editor,{modelValue:e.activeNewsItem.content,"onUpdate:modelValue":o[5]||(o[5]=t=>e.activeNewsItem.content=t),"editor-config":e.editorConfig},null,8,["modelValue","editor-config"])]),_:1})])):p("",!0)]),_:1})]),_:1})}],["__scopeId","data-v-3b275aea"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mp/draft/components/NewsForm.vue"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}));export{S as N,ue as a,Q as c};
