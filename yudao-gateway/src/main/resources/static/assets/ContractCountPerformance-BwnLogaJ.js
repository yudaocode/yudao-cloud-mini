import{d as v,r as f,f as x,C as L,_,o as d,c as D,k as c,w as l,I as M,q as b,F as g,n as w,m as B,t as A,l as P,P as S,Q as Y,R as F}from"./index-BaY5TDP-.js";import{E as I}from"./el-skeleton-item-BYAIkmCs.js";import{_ as U}from"./Echart-BQxFkezy.js";import{S as k}from"./performance-B-2AzE2h.js";import"./echarts-DpbyC_6K.js";const q=_(v({name:"ContractCountPerformance",__name:"ContractCountPerformance",props:{queryParams:{type:null,required:!0}},setup(C,{expose:y}){const m=C,o=f(!1),i=f([]),e=x({grid:{left:20,right:20,bottom:20,containLabel:!0},legend:{},series:[{name:"\u5F53\u6708\u5408\u540C\u6570\u91CF\uFF08\u4E2A\uFF09",type:"line",data:[]},{name:"\u4E0A\u6708\u5408\u540C\u6570\u91CF\uFF08\u4E2A\uFF09",type:"line",data:[]},{name:"\u53BB\u5E74\u540C\u6708\u5408\u540C\u6570\u91CF\uFF08\u4E2A\uFF09",type:"line",data:[]},{name:"\u73AF\u6BD4\u589E\u957F\u7387\uFF08%\uFF09",type:"line",yAxisIndex:1,data:[]},{name:"\u540C\u6BD4\u589E\u957F\u7387\uFF08%\uFF09",type:"line",yAxisIndex:1,data:[]}],toolbox:{feature:{dataZoom:{xAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u5BA2\u6237\u603B\u91CF\u5206\u6790"}}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"\u6570\u91CF\uFF08\u4E2A\uFF09",axisTick:{show:!1},axisLabel:{color:"#BDBDBD",formatter:"{value}"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!0,lineStyle:{color:"#e6e6e6"}}},{type:"value",name:"",axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD",formatter:"{value}%"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!0,lineStyle:{color:"#e6e6e6"}}}],xAxis:{type:"category",name:"\u65E5\u671F",data:[]}}),r=async()=>{o.value=!0;const t=await k.getContractCountPerformance(m.queryParams);e.xAxis&&e.xAxis.data&&(e.xAxis.data=t.map(a=>a.time)),e.series&&e.series[0]&&e.series[0].data&&(e.series[0].data=t.map(a=>a.currentMonthCount)),e.series&&e.series[1]&&e.series[1].data&&(e.series[1].data=t.map(a=>a.lastMonthCount),e.series[3].data=t.map(a=>a.lastMonthCount!==0?((a.currentMonthCount-a.lastMonthCount)/a.lastMonthCount*100).toFixed(2):"NULL")),e.series&&e.series[2]&&e.series[2].data&&(e.series[2].data=t.map(a=>a.lastYearCount),e.series[4].data=t.map(a=>a.lastYearCount!==0?((a.currentMonthCount-a.lastYearCount)/a.lastYearCount*100).toFixed(2):"NULL")),i.value=t,p(),o.value=!1},n=x([]),s=x([{title:"\u5F53\u6708\u5408\u540C\u6570\u91CF\u7EDF\u8BA1\uFF08\u4E2A\uFF09"},{title:"\u4E0A\u6708\u5408\u540C\u6570\u91CF\u7EDF\u8BA1\uFF08\u4E2A\uFF09"},{title:"\u53BB\u5E74\u5F53\u6708\u5408\u540C\u6570\u91CF\u7EDF\u8BA1\uFF08\u4E2A\uFF09"},{title:"\u73AF\u6BD4\u589E\u957F\u7387\uFF08%\uFF09"},{title:"\u540C\u6BD4\u589E\u957F\u7387\uFF08%\uFF09"}]),p=()=>{n.splice(0,n.length),n.push({label:"\u65E5\u671F",prop:"title"}),i.value.forEach((t,a)=>{const h={label:t.time,prop:"prop"+a};n.push(h),s[0]["prop"+a]=t.currentMonthCount,s[1]["prop"+a]=t.lastMonthCount,s[2]["prop"+a]=t.lastYearCount,s[3]["prop"+a]=t.lastMonthCount!==0?((t.currentMonthCount-t.lastMonthCount)/t.lastMonthCount*100).toFixed(2):"NULL",s[4]["prop"+a]=t.lastYearCount!==0?((t.currentMonthCount-t.lastYearCount)/t.lastYearCount*100).toFixed(2):"NULL"})};y({loadData:r}),L(async()=>{await r()});const u={props:m,loading:o,list:i,echartsOption:e,loadData:r,columnsData:n,tableData:s,convertListData:p};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),[["render",function(C,y,m,o,i,e){const r=U,n=I,s=P,p=S,u=Y,t=F;return d(),D(g,null,[c(s,{shadow:"never"},{default:l(()=>[c(n,{loading:o.loading,animated:""},{default:l(()=>[c(r,{height:500,options:o.echartsOption},null,8,["options"])]),_:1},8,["loading"])]),_:1}),c(s,{shadow:"never",class:"mt-16px"},{default:l(()=>[M((d(),b(u,{data:o.tableData},{default:l(()=>[(d(!0),D(g,null,w(o.columnsData,a=>(d(),b(p,{key:a.prop,label:a.label,prop:a.prop,align:"center"},{default:l(h=>[B(A(h.row[a.prop]),1)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["data"])),[[t,o.loading]])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/statistics/performance/components/ContractCountPerformance.vue"]]);export{q as default};
