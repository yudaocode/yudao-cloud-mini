import{bz as i,d as x,g as R,D as j,r as c,f as I,b as L,_ as N,o as w,q as C,w as l,m as D,ah as O,k as o,I as q,Z as P,L as z,v as M,M as A,cq as B,E,O as Z,A as G,B as H,N as J,R as K}from"./index-BaY5TDP-.js";import{_ as Q}from"./Dialog-CZSXtzfQ.js";import{_ as W}from"./ContentWrap-DKQn7kZm.js";import X from"./StockCheckItemForm-rKOAByHI.js";const g={getStockCheckPage:async s=>await i.get({url:"/erp/stock-check/page",params:s}),getStockCheck:async s=>await i.get({url:"/erp/stock-check/get?id="+s}),createStockCheck:async s=>await i.post({url:"/erp/stock-check/create",data:s}),updateStockCheck:async s=>await i.put({url:"/erp/stock-check/update",data:s}),updateStockCheckStatus:async(s,a)=>await i.put({url:"/erp/stock-check/update-status",params:{id:s,status:a}}),deleteStockCheck:async s=>await i.delete({url:"/erp/stock-check/delete",params:{ids:s.join(",")}}),exportStockCheck:async s=>await i.download({url:"/erp/stock-check/export-excel",params:s})},F=N(x({name:"StockCheckForm",__name:"StockCheckForm",emits:["success"],setup(s,{expose:a,emit:T}){const{t:e}=R(),f=j(),k=c(!1),u=c(""),r=c(!1),d=c(""),m=c({id:void 0,customerId:void 0,checkTime:void 0,remark:void 0,fileUrl:"",items:[]}),y=I({checkTime:[{required:!0,message:"\u76D8\u70B9\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),S=L(()=>d.value==="detail"),p=c(),V=c("item"),b=c(),h=async(t,U)=>{if(k.value=!0,u.value=e("action."+t),d.value=t,v(),U){r.value=!0;try{m.value=await g.getStockCheck(U)}finally{r.value=!1}}};a({open:h});const n=T,v=()=>{var t;m.value={id:void 0,customerId:void 0,checkTime:void 0,remark:void 0,fileUrl:void 0,items:[]},(t=p.value)==null||t.resetFields()},_={t:e,message:f,dialogVisible:k,dialogTitle:u,formLoading:r,formType:d,formData:m,formRules:y,disabled:S,formRef:p,subTabsName:V,itemFormRef:b,open:h,emit:n,submitForm:async()=>{await p.value.validate(),await b.value.validate(),r.value=!0;try{const t=m.value;d.value==="create"?(await g.createStockCheck(t),f.success(e("common.createSuccess"))):(await g.updateStockCheck(t),f.success(e("common.updateSuccess"))),k.value=!1,n("success")}finally{r.value=!1}},resetForm:v,StockCheckItemForm:X};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),[["render",function(s,a,T,e,f,k){const u=P,r=z,d=M,m=A,y=B,S=E,p=Z,V=G,b=H,h=W,n=J,v=Q,_=K;return w(),C(v,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=t=>e.dialogVisible=t),width:"1080"},{footer:l(()=>[e.disabled?O("",!0):(w(),C(n,{key:0,onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:l(()=>a[7]||(a[7]=[D(" \u786E \u5B9A ")])),_:1},8,["disabled"])),o(n,{onClick:a[5]||(a[5]=t=>e.dialogVisible=!1)},{default:l(()=>a[8]||(a[8]=[D("\u53D6 \u6D88")])),_:1})]),default:l(()=>[q((w(),C(p,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px",disabled:e.disabled},{default:l(()=>[o(S,{gutter:20},{default:l(()=>[o(d,{span:8},{default:l(()=>[o(r,{label:"\u76D8\u70B9\u5355\u53F7",prop:"no"},{default:l(()=>[o(u,{disabled:"",modelValue:e.formData.no,"onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.no=t),placeholder:"\u4FDD\u5B58\u65F6\u81EA\u52A8\u751F\u6210"},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{span:8},{default:l(()=>[o(r,{label:"\u76D8\u70B9\u65F6\u95F4",prop:"checkTime"},{default:l(()=>[o(m,{modelValue:e.formData.checkTime,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.checkTime=t),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u76D8\u70B9\u65F6\u95F4",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{span:16},{default:l(()=>[o(r,{label:"\u5907\u6CE8",prop:"remark"},{default:l(()=>[o(u,{type:"textarea",modelValue:e.formData.remark,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.remark=t),rows:1,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{span:8},{default:l(()=>[o(r,{label:"\u9644\u4EF6",prop:"fileUrl"},{default:l(()=>[o(y,{"is-show-tip":!1,modelValue:e.formData.fileUrl,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.fileUrl=t),limit:1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","disabled"])),[[_,e.formLoading]]),o(h,null,{default:l(()=>[o(b,{modelValue:e.subTabsName,"onUpdate:modelValue":a[4]||(a[4]=t=>e.subTabsName=t),class:"-mt-15px -mb-10px"},{default:l(()=>[o(V,{label:"\u76D8\u70B9\u4EA7\u54C1\u6E05\u5355",name:"item"},{default:l(()=>[o(e.StockCheckItemForm,{ref:"itemFormRef",items:e.formData.items,disabled:e.disabled},null,8,["items","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/stock/check/StockCheckForm.vue"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{g as S,F as a,Y as b};
