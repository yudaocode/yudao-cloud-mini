import{d as D,D as E,g as L,r as m,f as I,u as Q,C as M,G as O,_ as Y,X as z,o as y,c as K,k as e,w as t,Y as S,m as d,I as b,q as w,t as A,F as j,Z as B,L as G,J,K as X,z as Z,N as W,O as H,A as $,B as ee,y as ae,P as le,Q as re,R as te}from"./index-BaY5TDP-.js";import{_ as oe}from"./index-avjYFQiD.js";import{_ as ne}from"./DictTag-QtcI9ZjC.js";import{_ as ie}from"./ContentWrap-DKQn7kZm.js";import{_ as pe}from"./index-BAz6Gqim.js";import{d as se}from"./formatTime-Dr6TiYYc.js";import{d as ue}from"./download-oWiM5xVU.js";import{b as me,e as de,f as ce}from"./index-C4zjco0X.js";import fe from"./ClueForm-D-Y0X_TT.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./index-Qzz5HSIB.js";import"./tree-z7HkrWVC.js";import"./index-CuAlllbQ.js";const ye=Y(D({name:"CrmClue",__name:"index",setup(U,{expose:l}){l();const h=E(),{t:a}=L(),C=m(!0),P=m(0),_=m([]),p=I({pageNo:1,pageSize:10,sceneType:"1",name:null,telephone:null,mobile:null,transformStatus:!1}),u=m(),c=m(!1),T=m("1"),s=async()=>{C.value=!0;try{const n=await me(p);_.value=n.list,P.value=n.total}finally{C.value=!1}},i=()=>{p.pageNo=1,s()},{push:x}=Q(),g=m();M(()=>{s()});const f={message:h,t:a,loading:C,total:P,list:_,queryParams:p,queryFormRef:u,exportLoading:c,activeName:T,getList:s,handleQuery:i,resetQuery:()=>{u.value.resetFields(),i()},handleTabClick:n=>{p.sceneType=n.paneName,i()},push:x,openDetail:n=>{x({name:"CrmClueDetail",params:{id:n}})},formRef:g,openForm:(n,k)=>{g.value.open(n,k)},handleDelete:async n=>{try{await h.delConfirm(),await de(n),h.success(a("common.delSuccess")),await s()}catch{}},handleExport:async()=>{try{await h.exportConfirm(),c.value=!0;const n=await ce(p);ue.excel(n,"\u7EBF\u7D22.xls")}catch{}finally{c.value=!1}},get DICT_TYPE(){return O},get dateFormatter(){return se},ClueForm:fe};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),[["render",function(U,l,h,a,C,P){const _=pe,p=B,u=G,c=J,T=X,s=Z,i=W,x=H,g=ie,f=$,n=ee,k=ae,o=le,q=ne,F=re,N=oe,v=z("hasPermi"),R=te;return y(),K(j,null,[e(_,{title:"\u3010\u7EBF\u7D22\u3011\u7EBF\u7D22\u7BA1\u7406",url:"https://doc.iocoder.cn/crm/clue/"}),e(_,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),e(g,null,{default:t(()=>[e(x,{class:"-mb-15px",model:a.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:t(()=>[e(u,{label:"\u7EBF\u7D22\u540D\u79F0",prop:"name"},{default:t(()=>[e(p,{modelValue:a.queryParams.name,"onUpdate:modelValue":l[0]||(l[0]=r=>a.queryParams.name=r),placeholder:"\u8BF7\u8F93\u5165\u7EBF\u7D22\u540D\u79F0",clearable:"",onKeyup:S(a.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(u,{label:"\u8F6C\u5316\u72B6\u6001",prop:"transformStatus"},{default:t(()=>[e(T,{modelValue:a.queryParams.transformStatus,"onUpdate:modelValue":l[1]||(l[1]=r=>a.queryParams.transformStatus=r),class:"!w-240px"},{default:t(()=>[e(c,{value:!1,label:"\u672A\u8F6C\u5316"}),e(c,{value:!0,label:"\u5DF2\u8F6C\u5316"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"\u624B\u673A\u53F7",prop:"mobile"},{default:t(()=>[e(p,{modelValue:a.queryParams.mobile,"onUpdate:modelValue":l[2]||(l[2]=r=>a.queryParams.mobile=r),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",clearable:"",onKeyup:S(a.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(u,{label:"\u7535\u8BDD",prop:"telephone"},{default:t(()=>[e(p,{modelValue:a.queryParams.telephone,"onUpdate:modelValue":l[3]||(l[3]=r=>a.queryParams.telephone=r),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD",clearable:"",onKeyup:S(a.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(i,{onClick:a.handleQuery},{default:t(()=>[e(s,{icon:"ep:search",class:"mr-5px"}),l[8]||(l[8]=d(" \u641C\u7D22"))]),_:1}),e(i,{onClick:a.resetQuery},{default:t(()=>[e(s,{icon:"ep:refresh",class:"mr-5px"}),l[9]||(l[9]=d(" \u91CD\u7F6E"))]),_:1}),b((y(),w(i,{type:"primary",onClick:l[4]||(l[4]=r=>a.openForm("create"))},{default:t(()=>[e(s,{icon:"ep:plus",class:"mr-5px"}),l[10]||(l[10]=d(" \u65B0\u589E "))]),_:1})),[[v,["crm:clue:create"]]]),b((y(),w(i,{type:"success",plain:"",onClick:a.handleExport,loading:a.exportLoading},{default:t(()=>[e(s,{icon:"ep:download",class:"mr-5px"}),l[11]||(l[11]=d(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[v,["crm:clue:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),e(g,null,{default:t(()=>[e(n,{modelValue:a.activeName,"onUpdate:modelValue":l[5]||(l[5]=r=>a.activeName=r),onTabClick:a.handleTabClick},{default:t(()=>[e(f,{label:"\u6211\u8D1F\u8D23\u7684",name:"1"}),e(f,{label:"\u6211\u53C2\u4E0E\u7684",name:"2"}),e(f,{label:"\u4E0B\u5C5E\u8D1F\u8D23\u7684",name:"3"})]),_:1},8,["modelValue"]),b((y(),w(F,{data:a.list,stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[e(o,{label:"\u7EBF\u7D22\u540D\u79F0",align:"center",prop:"name",fixed:"left",width:"160"},{default:t(r=>[e(k,{underline:!1,type:"primary",onClick:V=>a.openDetail(r.row.id)},{default:t(()=>[d(A(r.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(o,{label:"\u7EBF\u7D22\u6765\u6E90",align:"center",prop:"source",width:"100"},{default:t(r=>[e(q,{type:a.DICT_TYPE.CRM_CUSTOMER_SOURCE,value:r.row.source},null,8,["type","value"])]),_:1}),e(o,{label:"\u624B\u673A",align:"center",prop:"mobile",width:"120"}),e(o,{label:"\u7535\u8BDD",align:"center",prop:"telephone",width:"130"}),e(o,{label:"\u90AE\u7BB1",align:"center",prop:"email",width:"180"}),e(o,{label:"\u5730\u5740",align:"center",prop:"detailAddress",width:"180"}),e(o,{align:"center",label:"\u5BA2\u6237\u884C\u4E1A",prop:"industryId",width:"100"},{default:t(r=>[e(q,{type:a.DICT_TYPE.CRM_CUSTOMER_INDUSTRY,value:r.row.industryId},null,8,["type","value"])]),_:1}),e(o,{align:"center",label:"\u5BA2\u6237\u7EA7\u522B",prop:"level",width:"135"},{default:t(r=>[e(q,{type:a.DICT_TYPE.CRM_CUSTOMER_LEVEL,value:r.row.level},null,8,["type","value"])]),_:1}),e(o,{formatter:a.dateFormatter,align:"center",label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime",width:"180px"},null,8,["formatter"]),e(o,{align:"center",label:"\u5907\u6CE8",prop:"remark",width:"200"}),e(o,{label:"\u6700\u540E\u8DDF\u8FDB\u65F6\u95F4",align:"center",prop:"contactLastTime",formatter:a.dateFormatter,width:"180px"},null,8,["formatter"]),e(o,{align:"center",label:"\u6700\u540E\u8DDF\u8FDB\u8BB0\u5F55",prop:"contactLastContent",width:"200"}),e(o,{align:"center",label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserName",width:"100px"}),e(o,{align:"center",label:"\u6240\u5C5E\u90E8\u95E8",prop:"ownerUserDeptName",width:"100"}),e(o,{label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"updateTime",formatter:a.dateFormatter,width:"180px"},null,8,["formatter"]),e(o,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:a.dateFormatter,width:"180px"},null,8,["formatter"]),e(o,{align:"center",label:"\u521B\u5EFA\u4EBA",prop:"creatorName",width:"100px"}),e(o,{label:"\u64CD\u4F5C",align:"center","min-width":"110",fixed:"right"},{default:t(r=>[b((y(),w(i,{link:"",type:"primary",onClick:V=>a.openForm("update",r.row.id)},{default:t(()=>l[12]||(l[12]=[d(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[v,["crm:clue:update"]]]),b((y(),w(i,{link:"",type:"danger",onClick:V=>a.handleDelete(r.row.id)},{default:t(()=>l[13]||(l[13]=[d(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[v,["crm:clue:delete"]]])]),_:1})]),_:1},8,["data"])),[[R,a.loading]]),e(N,{total:a.total,page:a.queryParams.pageNo,"onUpdate:page":l[6]||(l[6]=r=>a.queryParams.pageNo=r),limit:a.queryParams.pageSize,"onUpdate:limit":l[7]||(l[7]=r=>a.queryParams.pageSize=r),onPagination:a.getList},null,8,["total","page","limit"])]),_:1}),e(a.ClueForm,{ref:"formRef",onSuccess:a.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/clue/index.vue"]]);export{ye as default};
