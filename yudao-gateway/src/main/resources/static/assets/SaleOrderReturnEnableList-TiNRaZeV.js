import{d as R,r as n,f as S,ao as x,Q as L,ez as N,e2 as U,_ as k,o as C,q as h,w as r,k as a,m as c,Y as E,c as O,F as Q,n as z,I,Z as Y,L as D,J as M,K as j,M as H,z as K,N as B,O as J,ak as Z,P as A,R as G}from"./index-BaY5TDP-.js";import{_ as W}from"./Dialog-CZSXtzfQ.js";import{_ as X}from"./index-avjYFQiD.js";import{_ as $}from"./ContentWrap-DKQn7kZm.js";import{S as ee}from"./index-DoNPyGwW.js";import{b as ae}from"./formatTime-Dr6TiYYc.js";import{P as le}from"./index-CJwxK5Qx.js";import"./index-DrSdAlug.js";const te=k(R({name:"SaleOrderReturnEnableList",__name:"SaleOrderReturnEnableList",emits:["success"],setup(F,{expose:l,emit:V}){const e=n([]),P=n(0),f=n(!1),m=n(!1),u=S({pageNo:1,pageSize:10,no:void 0,productId:void 0,orderTime:[],returnEnable:!0}),b=n(),g=n([]),y=n(void 0),i=n(void 0),s=async()=>{m.value=!0,await x(),await _(),g.value=await le.getProductSimpleList()};l({open:s});const v=V,p=async()=>{f.value=!0;try{const d=await ee.getSaleOrderPage(u);e.value=d.list,P.value=d.total}finally{f.value=!1}},_=()=>{b.value.resetFields(),o()},o=()=>{u.pageNo=1,y.value=void 0,i.value=void 0,p()},w={list:e,total:P,loading:f,dialogVisible:m,queryParams:u,queryFormRef:b,productList:g,currentRowValue:y,currentRow:i,handleCurrentChange:d=>{i.value=d},open:s,emits:v,submitForm:()=>{try{v("success",i.value)}finally{m.value=!1}},getList:p,resetQuery:_,handleQuery:o,get ElTable(){return L},get dateFormatter2(){return ae},get erpCountTableColumnFormatter(){return N},get erpPriceTableColumnFormatter(){return U}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),[["render",function(F,l,V,e,P,f){const m=Y,u=D,b=M,g=j,y=H,i=K,s=B,v=J,p=$,_=Z,o=A,w=X,d=W,T=G;return C(),h(d,{title:"\u9009\u62E9\u9500\u552E\u8BA2\u5355\uFF08\u4EC5\u5C55\u793A\u53EF\u9000\u8D27\uFF09",modelValue:e.dialogVisible,"onUpdate:modelValue":l[7]||(l[7]=t=>e.dialogVisible=t),appendToBody:!0,scroll:!0,width:"1080"},{footer:r(()=>[a(s,{disabled:!e.currentRow,type:"primary",onClick:e.submitForm},{default:r(()=>l[11]||(l[11]=[c("\u786E \u5B9A")])),_:1},8,["disabled"]),a(s,{onClick:l[6]||(l[6]=t=>e.dialogVisible=!1)},{default:r(()=>l[12]||(l[12]=[c("\u53D6 \u6D88")])),_:1})]),default:r(()=>[a(p,null,{default:r(()=>[a(v,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:r(()=>[a(u,{label:"\u8BA2\u5355\u5355\u53F7",prop:"no"},{default:r(()=>[a(m,{modelValue:e.queryParams.no,"onUpdate:modelValue":l[0]||(l[0]=t=>e.queryParams.no=t),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5355\u53F7",clearable:"",onKeyup:E(e.handleQuery,["enter"]),class:"!w-160px"},null,8,["modelValue"])]),_:1}),a(u,{label:"\u4EA7\u54C1",prop:"productId"},{default:r(()=>[a(g,{modelValue:e.queryParams.productId,"onUpdate:modelValue":l[1]||(l[1]=t=>e.queryParams.productId=t),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1",class:"!w-160px"},{default:r(()=>[(C(!0),O(Q,null,z(e.productList,t=>(C(),h(b,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(u,{label:"\u8BA2\u5355\u65F6\u95F4",prop:"orderTime"},{default:r(()=>[a(y,{modelValue:e.queryParams.orderTime,"onUpdate:modelValue":l[2]||(l[2]=t=>e.queryParams.orderTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-160px"},null,8,["modelValue","default-time"])]),_:1}),a(u,null,{default:r(()=>[a(s,{onClick:e.handleQuery},{default:r(()=>[a(i,{icon:"ep:search",class:"mr-5px"}),l[8]||(l[8]=c(" \u641C\u7D22"))]),_:1}),a(s,{onClick:e.resetQuery},{default:r(()=>[a(i,{icon:"ep:refresh",class:"mr-5px"}),l[9]||(l[9]=c(" \u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(p,null,{default:r(()=>[I((C(),h(e.ElTable,{data:e.list,"show-overflow-tooltip":!0,stripe:!0},{default:r(()=>[a(o,{align:"center",width:"65"},{default:r(t=>[a(_,{value:t.row.id,modelValue:e.currentRowValue,"onUpdate:modelValue":l[3]||(l[3]=q=>e.currentRowValue=q),onChange:q=>e.handleCurrentChange(t.row)},{default:r(()=>l[10]||(l[10]=[c(" \xA0 ")])),_:2},1032,["value","modelValue","onChange"])]),_:1}),a(o,{"min-width":"180",label:"\u8BA2\u5355\u5355\u53F7",align:"center",prop:"no"}),a(o,{label:"\u5BA2\u6237",align:"center",prop:"customerName"}),a(o,{label:"\u4EA7\u54C1\u4FE1\u606F",align:"center",prop:"productNames","min-width":"200"}),a(o,{label:"\u8BA2\u5355\u65F6\u95F4",align:"center",prop:"orderTime",formatter:e.dateFormatter2,width:"120px"},null,8,["formatter"]),a(o,{label:"\u521B\u5EFA\u4EBA",align:"center",prop:"creatorName"}),a(o,{label:"\u603B\u6570\u91CF",align:"center",prop:"totalCount",formatter:e.erpCountTableColumnFormatter},null,8,["formatter"]),a(o,{label:"\u51FA\u5E93\u6570\u91CF",align:"center",prop:"outCount",formatter:e.erpCountTableColumnFormatter},null,8,["formatter"]),a(o,{label:"\u9000\u8D27\u6570\u91CF",align:"center",prop:"returnCount",formatter:e.erpCountTableColumnFormatter},null,8,["formatter"]),a(o,{label:"\u91D1\u989D\u5408\u8BA1",align:"center",prop:"totalProductPrice",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),a(o,{label:"\u542B\u7A0E\u91D1\u989D",align:"center",prop:"totalPrice",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"])]),_:1},8,["data"])),[[T,e.loading]]),a(w,{limit:e.queryParams.pageSize,"onUpdate:limit":l[4]||(l[4]=t=>e.queryParams.pageSize=t),page:e.queryParams.pageNo,"onUpdate:page":l[5]||(l[5]=t=>e.queryParams.pageNo=t),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1})]),_:1},8,["modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/sale/order/components/SaleOrderReturnEnableList.vue"]]);export{te as default};
