import{d as F,f as Y,e as L,r as u,b as U,au as z,C as Q,_ as T,o as I,c as D,k as a,w as t,F as R,n as B,q as S,m as V,M as j,L as O,J as A,K as E,z as J,N as K,O as M,A as N,B as G,v as H}from"./index-BaY5TDP-.js";import{_ as W}from"./ContentWrap-DKQn7kZm.js";import{E as X}from"./el-tree-select-DphqCDCz.js";import{g as Z}from"./index-dK17nfjs.js";import{g as $}from"./index-CuAlllbQ.js";import{f as _,e as h,g}from"./formatTime-Dr6TiYYc.js";import{h as x,d as ee}from"./tree-z7HkrWVC.js";import ae from"./ContractCountPerformance-BwnLogaJ.js";import re from"./ContractPricePerformance-C3sOWFef.js";import le from"./ReceivablePricePerformance-C2aqP2YB.js";import"./el-skeleton-item-BYAIkmCs.js";import"./Echart-BQxFkezy.js";import"./echarts-DpbyC_6K.js";import"./performance-B-2AzE2h.js";const te=T(F({name:"CrmStatisticsCustomer",__name:"index",setup(k,{expose:r}){r();const o=Y({deptId:L().getUser.deptId,userId:void 0,times:[_(h(new Date(new Date().getFullYear(),0,1))),_(g(new Date(new Date().getFullYear(),11,31)))]}),e=u(),q=u([]),p=u([]),w=U(()=>o.deptId?p.value.filter(n=>n.deptId===o.deptId):[]),s=u("ContractCountPerformance"),P=u(),y=u(),v=u(),m=()=>{var c,d,i,C,l,b;const n=parseInt(o.times[0]);switch(o.times[0]=_(h(new Date(n,0,1))),o.times[1]=_(g(new Date(n,11,31))),s.value){case"ContractCountPerformance":(d=(c=P.value)==null?void 0:c.loadData)==null||d.call(c);break;case"ContractPricePerformance":(C=(i=y.value)==null?void 0:i.loadData)==null||C.call(i);break;case"ReceivablePricePerformance":(b=(l=v.value)==null?void 0:l.loadData)==null||b.call(l)}};z(s,()=>{m()}),Q(async()=>{q.value=x(await Z()),p.value=x(await $())});const f={queryParams:o,queryFormRef:e,deptList:q,userList:p,userListByDeptId:w,activeTab:s,ContractCountPerformanceRef:P,ContractPricePerformanceRef:y,ReceivablePricePerformanceRef:v,handleQuery:m,resetQuery:()=>{e.value.resetFields(),m()},get defaultProps(){return ee},ContractCountPerformance:ae,ContractPricePerformance:re,ReceivablePricePerformance:le};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),[["render",function(k,r,o,e,q,p){const w=j,s=O,P=X,y=A,v=E,m=J,f=K,n=M,c=W,d=N,i=G,C=H;return I(),D(R,null,[a(c,null,{default:t(()=>[a(n,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:t(()=>[a(s,{label:"\u9009\u62E9\u5E74\u4EFD",prop:"orderDate"},{default:t(()=>[a(w,{modelValue:e.queryParams.times[0],"onUpdate:modelValue":r[0]||(r[0]=l=>e.queryParams.times[0]=l),class:"!w-240px",type:"year","value-format":"YYYY","default-time":[new Date().getFullYear()]},null,8,["modelValue","default-time"])]),_:1}),a(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:t(()=>[a(P,{modelValue:e.queryParams.deptId,"onUpdate:modelValue":r[1]||(r[1]=l=>e.queryParams.deptId=l),class:"!w-240px",data:e.deptList,props:e.defaultProps,"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8",onChange:r[2]||(r[2]=l=>e.queryParams.userId=void 0)},null,8,["modelValue","data","props"])]),_:1}),a(s,{label:"\u5458\u5DE5",prop:"userId"},{default:t(()=>[a(v,{modelValue:e.queryParams.userId,"onUpdate:modelValue":r[3]||(r[3]=l=>e.queryParams.userId=l),class:"!w-240px",placeholder:"\u5458\u5DE5",clearable:""},{default:t(()=>[(I(!0),D(R,null,B(e.userListByDeptId,(l,b)=>(I(),S(y,{label:l.nickname,value:l.id,key:b},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,null,{default:t(()=>[a(f,{onClick:e.handleQuery},{default:t(()=>[a(m,{icon:"ep:search",class:"mr-5px"}),r[5]||(r[5]=V(" \u641C\u7D22 "))]),_:1}),a(f,{onClick:e.resetQuery},{default:t(()=>[a(m,{icon:"ep:refresh",class:"mr-5px"}),r[6]||(r[6]=V(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(C,null,{default:t(()=>[a(i,{modelValue:e.activeTab,"onUpdate:modelValue":r[4]||(r[4]=l=>e.activeTab=l)},{default:t(()=>[a(d,{label:"\u5458\u5DE5\u5408\u540C\u6570\u91CF\u7EDF\u8BA1",name:"ContractCountPerformance",lazy:""},{default:t(()=>[a(e.ContractCountPerformance,{"query-params":e.queryParams,ref:"ContractCountPerformanceRef"},null,8,["query-params"])]),_:1}),a(d,{label:"\u5458\u5DE5\u5408\u540C\u91D1\u989D\u7EDF\u8BA1",name:"ContractPricePerformance",lazy:""},{default:t(()=>[a(e.ContractPricePerformance,{"query-params":e.queryParams,ref:"ContractPricePerformanceRef"},null,8,["query-params"])]),_:1}),a(d,{label:"\u5458\u5DE5\u56DE\u6B3E\u91D1\u989D\u7EDF\u8BA1",name:"ReceivablePricePerformance",lazy:""},{default:t(()=>[a(e.ReceivablePricePerformance,{"query-params":e.queryParams,ref:"ReceivablePricePerformanceRef"},null,8,["query-params"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/statistics/performance/index.vue"]]);export{te as default};
