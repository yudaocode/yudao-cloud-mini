import{d as S,r as n,f as x,ao as O,Q as L,ez as N,e2 as R,_ as U,o as P,q as C,w as r,k as l,m as c,Y as k,c as E,F as Q,n as z,I,Z as Y,L as D,J as M,K as j,M as H,z as K,N as B,O as J,ak as Z,P as A,R as G}from"./index-BaY5TDP-.js";import{_ as W}from"./Dialog-CZSXtzfQ.js";import{_ as X}from"./index-avjYFQiD.js";import{_ as $}from"./ContentWrap-DKQn7kZm.js";import{S as ee}from"./index-DoNPyGwW.js";import{b as ae}from"./formatTime-Dr6TiYYc.js";import{P as le}from"./index-CJwxK5Qx.js";import"./index-DrSdAlug.js";const te=U(S({name:"ErpSaleOrderOutEnableList",__name:"SaleOrderOutEnableList",emits:["success"],setup(F,{expose:a,emit:V}){const e=n([]),h=n(0),f=n(!1),m=n(!1),u=x({pageNo:1,pageSize:10,no:void 0,productId:void 0,orderTime:[],outEnable:!0}),b=n(),g=n([]),y=n(void 0),i=n(void 0),s=async()=>{m.value=!0,await O(),await _(),g.value=await le.getProductSimpleList()};a({open:s});const v=V,p=async()=>{f.value=!0;try{const d=await ee.getSaleOrderPage(u);e.value=d.list,h.value=d.total}finally{f.value=!1}},_=()=>{b.value.resetFields(),o()},o=()=>{u.pageNo=1,y.value=void 0,i.value=void 0,p()},w={list:e,total:h,loading:f,dialogVisible:m,queryParams:u,queryFormRef:b,productList:g,currentRowValue:y,currentRow:i,handleCurrentChange:d=>{i.value=d},open:s,emits:v,submitForm:()=>{try{v("success",i.value)}finally{m.value=!1}},getList:p,resetQuery:_,handleQuery:o,get ElTable(){return L},get dateFormatter2(){return ae},get erpCountTableColumnFormatter(){return N},get erpPriceTableColumnFormatter(){return R}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),[["render",function(F,a,V,e,h,f){const m=Y,u=D,b=M,g=j,y=H,i=K,s=B,v=J,p=$,_=Z,o=A,w=X,d=W,T=G;return P(),C(d,{title:"\u9009\u62E9\u9500\u552E\u8BA2\u5355\uFF08\u4EC5\u5C55\u793A\u53EF\u51FA\u5E93\uFF09",modelValue:e.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=t=>e.dialogVisible=t),appendToBody:!0,scroll:!0,width:"1080"},{footer:r(()=>[l(s,{disabled:!e.currentRow,type:"primary",onClick:e.submitForm},{default:r(()=>a[11]||(a[11]=[c("\u786E \u5B9A")])),_:1},8,["disabled"]),l(s,{onClick:a[6]||(a[6]=t=>e.dialogVisible=!1)},{default:r(()=>a[12]||(a[12]=[c("\u53D6 \u6D88")])),_:1})]),default:r(()=>[l(p,null,{default:r(()=>[l(v,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:r(()=>[l(u,{label:"\u8BA2\u5355\u5355\u53F7",prop:"no"},{default:r(()=>[l(m,{modelValue:e.queryParams.no,"onUpdate:modelValue":a[0]||(a[0]=t=>e.queryParams.no=t),placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u5355\u53F7",clearable:"",onKeyup:k(e.handleQuery,["enter"]),class:"!w-160px"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u4EA7\u54C1",prop:"productId"},{default:r(()=>[l(g,{modelValue:e.queryParams.productId,"onUpdate:modelValue":a[1]||(a[1]=t=>e.queryParams.productId=t),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1",class:"!w-160px"},{default:r(()=>[(P(!0),E(Q,null,z(e.productList,t=>(P(),C(b,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u8BA2\u5355\u65F6\u95F4",prop:"orderTime"},{default:r(()=>[l(y,{modelValue:e.queryParams.orderTime,"onUpdate:modelValue":a[2]||(a[2]=t=>e.queryParams.orderTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-160px"},null,8,["modelValue","default-time"])]),_:1}),l(u,null,{default:r(()=>[l(s,{onClick:e.handleQuery},{default:r(()=>[l(i,{icon:"ep:search",class:"mr-5px"}),a[8]||(a[8]=c(" \u641C\u7D22"))]),_:1}),l(s,{onClick:e.resetQuery},{default:r(()=>[l(i,{icon:"ep:refresh",class:"mr-5px"}),a[9]||(a[9]=c(" \u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(p,null,{default:r(()=>[I((P(),C(e.ElTable,{data:e.list,"show-overflow-tooltip":!0,stripe:!0},{default:r(()=>[l(o,{align:"center",width:"65"},{default:r(t=>[l(_,{value:t.row.id,modelValue:e.currentRowValue,"onUpdate:modelValue":a[3]||(a[3]=q=>e.currentRowValue=q),onChange:q=>e.handleCurrentChange(t.row)},{default:r(()=>a[10]||(a[10]=[c(" \xA0 ")])),_:2},1032,["value","modelValue","onChange"])]),_:1}),l(o,{"min-width":"180",label:"\u8BA2\u5355\u5355\u53F7",align:"center",prop:"no"}),l(o,{label:"\u5BA2\u6237",align:"center",prop:"customerName"}),l(o,{label:"\u4EA7\u54C1\u4FE1\u606F",align:"center",prop:"productNames","min-width":"200"}),l(o,{label:"\u8BA2\u5355\u65F6\u95F4",align:"center",prop:"orderTime",formatter:e.dateFormatter2,width:"120px"},null,8,["formatter"]),l(o,{label:"\u521B\u5EFA\u4EBA",align:"center",prop:"creatorName"}),l(o,{label:"\u603B\u6570\u91CF",align:"center",prop:"totalCount",formatter:e.erpCountTableColumnFormatter},null,8,["formatter"]),l(o,{label:"\u51FA\u5E93\u6570\u91CF",align:"center",prop:"outCount",formatter:e.erpCountTableColumnFormatter},null,8,["formatter"]),l(o,{label:"\u91D1\u989D\u5408\u8BA1",align:"center",prop:"totalProductPrice",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),l(o,{label:"\u542B\u7A0E\u91D1\u989D",align:"center",prop:"totalPrice",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"])]),_:1},8,["data"])),[[T,e.loading]]),l(w,{limit:e.queryParams.pageSize,"onUpdate:limit":a[4]||(a[4]=t=>e.queryParams.pageSize=t),page:e.queryParams.pageNo,"onUpdate:page":a[5]||(a[5]=t=>e.queryParams.pageNo=t),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1})]),_:1},8,["modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/sale/order/components/SaleOrderOutEnableList.vue"]]);export{te as default};
