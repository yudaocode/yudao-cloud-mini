import{d as _,r as a,D as C,C as x,ao as h,_ as R,o as E,c as M,k as c}from"./index-BaY5TDP-.js";import w from"./Left-LOr0GKb5.js";import y from"./Right-gTJcBVQq.js";import{A}from"./index-iSUselB1.js";import{i as j}from"./constants-BXWrMvZH.js";import"./index-BiCwg61_.js";import"./download-oWiM5xVU.js";import"./fetch-D5K_4anA.js";const D={class:"absolute top-0 left-0 right-0 bottom-0 flex"},L=R(_({name:"AiMindMap",__name:"index",setup(p,{expose:u}){u();const s=a(),e=a(!1),o=a(!1),r=a(!0),d=C(),t=a(""),m=a(),v=a(),l=()=>{var i;e.value=!1,o.value=!1,(i=s.value)==null||i.abort()};x(()=>{t.value=j});const f={ctrl:s,isGenerating:e,isStart:o,isEnd:r,message:d,generatedContent:t,leftRef:m,rightRef:v,directGenerate:i=>{r.value=!1,t.value=i,r.value=!0},stopStream:l,submit:i=>{e.value=!0,o.value=!0,r.value=!1,s.value=new AbortController,t.value="",A.generateMindMap({data:i,onMessage:async n=>{var g;const{code:b,data:G,msg:S}=JSON.parse(n.data);if(b!==0)return d.alert(`\u751F\u6210\u601D\u7EF4\u5BFC\u56FE\u5F02\u5E38! ${S}`),void l();t.value=t.value+G,await h(),(g=v.value)==null||g.scrollBottom()},onClose(){var n;r.value=!0,(n=m.value)==null||n.setGeneratedContent(t.value),l()},onError(n){console.error("\u751F\u6210\u601D\u7EF4\u5BFC\u56FE\u5931\u8D25",n),l()},ctrl:s.value})},Left:w,Right:y};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),[["render",function(p,u,s,e,o,r){return E(),M("div",D,[c(e.Left,{ref:"leftRef","is-generating":e.isGenerating,onSubmit:e.submit,onDirectGenerate:e.directGenerate},null,8,["is-generating"]),c(e.Right,{ref:"rightRef",generatedContent:e.generatedContent,isEnd:e.isEnd,isGenerating:e.isGenerating,isStart:e.isStart},null,8,["generatedContent","isEnd","isGenerating","isStart"])])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/mindmap/index/index.vue"]]);export{L as default};
