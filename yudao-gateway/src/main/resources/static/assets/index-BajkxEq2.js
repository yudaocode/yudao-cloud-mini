import{bz as g,d as U,D as z,g as R,r as v,f as S,C as j,_ as q,X as L,o as c,c as b,k as l,w as t,I as D,q as _,j as N,m as r,ah as E,F as P,N as O,ak as T,al as F,L as I,cf as X,l as A,O as B,R as G}from"./index-BaY5TDP-.js";import{_ as H}from"./ContentWrap-DKQn7kZm.js";import{_ as J}from"./index-BAz6Gqim.js";import{C as K}from"./CardTitle-Z2xLAPly.js";const M={class:"flex items-center justify-between"},Q={key:0},W={key:0},Y=q(U({name:"CrmCustomerPoolConfig",__name:"index",setup(x,{expose:a}){a();const p=z(),{t:e}=R(),i=v(!1),o=v({enabled:!1,contactExpireDays:void 0,dealExpireDays:void 0,notifyEnabled:!1,notifyDays:void 0}),y=S({enabled:[{required:!0,message:"\u662F\u5426\u542F\u7528\u5BA2\u6237\u516C\u6D77\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=v(),u=async()=>{try{i.value=!0;const s=await(async()=>await g.get({url:"/crm/customer-pool-config/get"}))();if(s===null)return;o.value=s}finally{i.value=!1}};j(()=>{u()});const m={message:p,t:e,formLoading:i,formData:o,formRules:y,formRef:d,getConfig:u,onSubmit:async()=>{if(d&&await d.value.validate()){i.value=!0;try{const s=o.value;await(async f=>await g.put({url:"/crm/customer-pool-config/save",data:f}))(s),p.success(e("common.updateSuccess")),await u(),i.value=!1}finally{i.value=!1}}},changeEnable:()=>{o.value.enabled||(o.value.contactExpireDays=void 0,o.value.dealExpireDays=void 0,o.value.notifyEnabled=!1,o.value.notifyDays=void 0)},changeNotifyEnable:()=>{o.value.notifyEnabled||(o.value.notifyDays=void 0)},get CardTitle(){return K}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),[["render",function(x,a,p,e,i,o){const y=J,d=O,u=T,m=F,s=I,f=X,V=A,h=B,C=H,w=L("hasPermi"),k=G;return c(),b(P,null,[l(y,{title:"\u3010\u5BA2\u6237\u3011\u5BA2\u6237\u7BA1\u7406\u3001\u516C\u6D77\u5BA2\u6237",url:"https://doc.iocoder.cn/crm/customer/"}),l(y,{title:"\u3010\u901A\u7528\u3011\u6570\u636E\u6743\u9650",url:"https://doc.iocoder.cn/crm/permission/"}),l(C,null,{default:t(()=>[D((c(),_(h,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"160px"},{default:t(()=>[l(V,{shadow:"never"},{header:t(()=>[N("div",M,[l(e.CardTitle,{title:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E"}),D((c(),_(d,{type:"primary",onClick:e.onSubmit},{default:t(()=>a[5]||(a[5]=[r(" \u4FDD\u5B58 ")])),_:1})),[[w,["crm:customer-pool-config:update"]]])])]),default:t(()=>[l(s,{label:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E",prop:"enabled"},{default:t(()=>[l(m,{modelValue:e.formData.enabled,"onUpdate:modelValue":a[0]||(a[0]=n=>e.formData.enabled=n),onChange:e.changeEnable,class:"ml-4"},{default:t(()=>[l(u,{value:!1,size:"large"},{default:t(()=>a[6]||(a[6]=[r("\u4E0D\u542F\u7528")])),_:1}),l(u,{value:!0,size:"large"},{default:t(()=>a[7]||(a[7]=[r("\u542F\u7528")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e.formData.enabled?(c(),b("div",Q,[l(s,null,{default:t(()=>[l(f,{class:"mr-2",modelValue:e.formData.contactExpireDays,"onUpdate:modelValue":a[1]||(a[1]=n=>e.formData.contactExpireDays=n)},null,8,["modelValue"]),a[8]||(a[8]=r(" \u5929\u4E0D\u8DDF\u8FDB\u6216 ")),l(f,{class:"mx-2",modelValue:e.formData.dealExpireDays,"onUpdate:modelValue":a[2]||(a[2]=n=>e.formData.dealExpireDays=n)},null,8,["modelValue"]),a[9]||(a[9]=r(" \u5929\u672A\u6210\u4EA4 "))]),_:1}),l(s,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:t(()=>[l(m,{modelValue:e.formData.notifyEnabled,"onUpdate:modelValue":a[3]||(a[3]=n=>e.formData.notifyEnabled=n),onChange:e.changeNotifyEnable,class:"ml-4"},{default:t(()=>[l(u,{value:!1,size:"large"},{default:t(()=>a[10]||(a[10]=[r("\u4E0D\u63D0\u9192")])),_:1}),l(u,{value:!0,size:"large"},{default:t(()=>a[11]||(a[11]=[r("\u63D0\u9192")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e.formData.notifyEnabled?(c(),b("div",W,[l(s,null,{default:t(()=>[a[12]||(a[12]=r(" \u63D0\u524D ")),l(f,{class:"mx-2",modelValue:e.formData.notifyDays,"onUpdate:modelValue":a[4]||(a[4]=n=>e.formData.notifyDays=n)},null,8,["modelValue"]),a[13]||(a[13]=r(" \u5929\u63D0\u9192 "))]),_:1})])):E("",!0)])):E("",!0)]),_:1})]),_:1},8,["model","rules"])),[[k,e.formLoading]])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/customer/poolConfig/index.vue"]]);export{Y as default};
