import{d as E,b3 as F,p as k,r as y,au as V,_ as U,o as d,c as h,j as $,F as _,n as w,a2 as q,aF as I,k as j,ah as B,m as O,t as P,z as R}from"./index-BaY5TDP-.js";const D=(f,m)=>{const[c,e]=[f.x,m.x].sort(),[a,r]=[f.y,m.y].sort(),i=e+1,l=r+1;return{left:c,right:i,top:a,bottom:l,height:l-a,width:i-c}},G=E({name:"MagicCubeEditor",__name:"index",props:{modelValue:F().isRequired,rows:k.number.def(4),cols:k.number.def(4),cubeSize:k.number.def(75)},emits:["update:modelValue","hotAreaSelected"],setup(f,{expose:m,emit:c}){m();const e=f,a=y([]);V(()=>[e.rows,e.cols],()=>{if(a.value=[],e.rows&&e.cols)for(let o=0;o<e.rows;o++){a.value[o]=[];for(let t=0;t<e.cols;t++)a.value[o].push({x:t,y:o,active:!1})}},{immediate:!0});const r=y([]);V(()=>e.modelValue,()=>r.value=e.modelValue||[],{immediate:!0});const i=y(),l=()=>!!i.value,u=c,v=()=>u("update:modelValue",r),b=y(0),g=(o,t)=>{b.value=t,u("hotAreaSelected",o,t)};function C(){A((o,t,s)=>{s.active&&(s.active=!1)}),i.value=void 0}const A=o=>{for(let t=0;t<a.value.length;t++)for(let s=0;s<a.value[t].length;s++)o(t,s,a.value[t][s])},H={props:e,cubes:a,hotAreas:r,hotAreaBeginCube:i,isHotAreaSelectMode:l,handleCubeClick:(o,t)=>{const s=a.value[o][t];if(!l())return i.value=s,void(i.value.active=!0);r.value.push(D(i.value,s)),C();let n=r.value.length-1;g(r.value[n],n),v()},handleCellHover:(o,t)=>{if(!l())return;const s=D(i.value,a.value[o][t]);for(const M of r.value)if(p=s,(n=M).left<p.left+p.width&&n.left+n.width>p.left&&n.top<p.top+p.height&&n.height+n.top>p.top)return void C();var n,p;A((M,W,z)=>{var x,S;z.active=(x=s,(S=z).x>=x.left&&S.x<x.right&&S.y>=x.top&&S.y<x.bottom)})},handleDeleteHotArea:o=>{r.value.splice(o,1),C(),v()},emit:u,emitUpdateModelValue:v,selectedHotAreaIndex:b,handleHotAreaSelected:g,exitHotAreaSelectMode:C,eachCube:A};return Object.defineProperty(H,"__isScriptSetup",{enumerable:!1,value:!0}),H}}),J={class:"relative"},K={class:"cube-table"},L=["onClick","onMouseenter"],N=["onClick"],Q=["onClick"],T=U(G,[["render",function(f,m,c,e,a,r){const i=R;return d(),h("div",J,[$("table",K,[$("tbody",null,[(d(!0),h(_,null,w(e.cubes,(l,u)=>(d(),h("tr",{key:u},[(d(!0),h(_,null,w(l,(v,b)=>(d(),h("td",{key:b,class:q(["cube",{active:v.active}]),style:I({width:`${c.cubeSize}px`,height:`${c.cubeSize}px`}),onClick:g=>e.handleCubeClick(u,b),onMouseenter:g=>e.handleCellHover(u,b)},[j(i,{icon:"ep-plus"})],46,L))),128))]))),128))]),(d(!0),h(_,null,w(e.hotAreas,(l,u)=>(d(),h("div",{key:u,class:"hot-area",style:I({top:c.cubeSize*l.top+"px",left:c.cubeSize*l.left+"px",height:c.cubeSize*l.height+"px",width:c.cubeSize*l.width+"px"}),onClick:v=>e.handleHotAreaSelected(l,u),onMouseover:e.exitHotAreaSelectMode},[e.selectedHotAreaIndex===u?(d(),h("div",{key:0,class:"btn-delete",onClick:v=>e.handleDeleteHotArea(u)},[j(i,{icon:"ep:circle-close-filled"})],8,Q)):B("",!0),O(" "+P(`${l.width}\xD7${l.height}`),1)],44,N))),128))])])}],["__scopeId","data-v-d5b18453"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/MagicCubeEditor/index.vue"]]);export{T as _};
