import{d as L,g as R,D as S,r as i,f as w,U as C,G as E,d$ as P,_ as h,o as m,q as b,w as o,k as r,m as V,I as k,c as T,F as U,n as O,t as q,J as N,K as x,L as M,Z as Y,ak as B,al as j,O as G,N as J,R as Z}from"./index-BaY5TDP-.js";import{_ as $}from"./Dialog-CZSXtzfQ.js";import{A as D}from"./index-B3VhXi0r.js";import{C as F}from"./constants-CEEr2azc.js";const z=h(L({name:"ApiKeyForm",__name:"ApiKeyForm",emits:["success"],setup(I,{expose:l,emit:A}){const{t:a}=R(),n=S(),f=i(!1),c=i(""),t=i(!1),u=i(""),s=i({id:void 0,name:void 0,apiKey:void 0,platform:void 0,url:void 0,status:F.ENABLE}),y=w({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],apiKey:[{required:!0,message:"\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],platform:[{required:!0,message:"\u5E73\u53F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=i(),v=async(e,K)=>{if(f.value=!0,c.value=a("action."+e),u.value=e,g(),K){t.value=!0;try{s.value=await D.getApiKey(K)}finally{t.value=!1}}};l({open:v});const p=A,g=()=>{var e;s.value={id:void 0,name:void 0,apiKey:void 0,platform:void 0,url:void 0,status:F.ENABLE},(e=d.value)==null||e.resetFields()},_={t:a,message:n,dialogVisible:f,dialogTitle:c,formLoading:t,formType:u,formData:s,formRules:y,formRef:d,open:v,emit:p,submitForm:async()=>{await d.value.validate(),t.value=!0;try{const e=s.value;u.value==="create"?(await D.createApiKey(e),n.success(a("common.createSuccess"))):(await D.updateApiKey(e),n.success(a("common.updateSuccess"))),f.value=!1,p("success")}finally{t.value=!1}},resetForm:g,get getIntDictOptions(){return C},get DICT_TYPE(){return E},get getStrDictOptions(){return P}};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),[["render",function(I,l,A,a,n,f){const c=N,t=x,u=M,s=Y,y=B,d=j,v=G,p=J,g=$,_=Z;return m(),b(g,{title:a.dialogTitle,modelValue:a.dialogVisible,"onUpdate:modelValue":l[6]||(l[6]=e=>a.dialogVisible=e)},{footer:o(()=>[r(p,{onClick:a.submitForm,type:"primary",disabled:a.formLoading},{default:o(()=>l[7]||(l[7]=[V("\u786E \u5B9A")])),_:1},8,["disabled"]),r(p,{onClick:l[5]||(l[5]=e=>a.dialogVisible=!1)},{default:o(()=>l[8]||(l[8]=[V("\u53D6 \u6D88")])),_:1})]),default:o(()=>[k((m(),b(v,{ref:"formRef",model:a.formData,rules:a.formRules,"label-width":"120px"},{default:o(()=>[r(u,{label:"\u6240\u5C5E\u5E73\u53F0",prop:"platform"},{default:o(()=>[r(t,{modelValue:a.formData.platform,"onUpdate:modelValue":l[0]||(l[0]=e=>a.formData.platform=e),placeholder:"\u8BF7\u8F93\u5165\u5E73\u53F0",clearable:""},{default:o(()=>[(m(!0),T(U,null,O(a.getStrDictOptions(a.DICT_TYPE.AI_PLATFORM),e=>(m(),b(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(u,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[r(s,{modelValue:a.formData.name,"onUpdate:modelValue":l[1]||(l[1]=e=>a.formData.name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),r(u,{label:"\u5BC6\u94A5",prop:"apiKey"},{default:o(()=>[r(s,{modelValue:a.formData.apiKey,"onUpdate:modelValue":l[2]||(l[2]=e=>a.formData.apiKey=e),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u94A5"},null,8,["modelValue"])]),_:1}),r(u,{label:"\u81EA\u5B9A\u4E49 API URL",prop:"url"},{default:o(()=>[r(s,{modelValue:a.formData.url,"onUpdate:modelValue":l[3]||(l[3]=e=>a.formData.url=e),placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49 API URL"},null,8,["modelValue"])]),_:1}),r(u,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[r(d,{modelValue:a.formData.status,"onUpdate:modelValue":l[4]||(l[4]=e=>a.formData.status=e)},{default:o(()=>[(m(!0),T(U,null,O(a.getIntDictOptions(a.DICT_TYPE.COMMON_STATUS),e=>(m(),b(y,{key:e.value,value:e.value},{default:o(()=>[V(q(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[_,a.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/model/apiKey/ApiKeyForm.vue"]]);export{z as default};
