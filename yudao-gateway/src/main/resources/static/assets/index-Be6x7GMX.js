import{d as f,aY as v,aw as b,k as p,r as a,au as C,C as T,_ as j,o as u,q as _,w as $,j as r,aF as i,c as d,F as k,n as P,t as D,aq as Y}from"./index-BaY5TDP-.js";import{e as I}from"./couponTemplate-C5oFUT2R.js";import{i as h,j as E}from"./constants-CEEr2azc.js";import{f as w}from"./formatTime-Dr6TiYYc.js";const W=f({name:"CouponDiscount",props:{coupon:v()},setup(s){const n=s.coupon;let e=n.discountPercent+"",o=" \u6298";return n.discountType===h.PRICE.type&&(e=b(n.discountPrice),o=" \u5143"),()=>p("div",null,[p("span",{class:"text-20px font-bold"},[e]),p("span",null,[o])])}}),R=f({name:"CouponDiscountDesc",props:{coupon:v()},setup(s){const n=s.coupon,e=n.usePrice>0?`\u6EE1${b(n.usePrice)}\u5143\uFF0C`:"",o=n.discountType===h.PRICE.type?`\u51CF${b(n.discountPrice)}\u5143`:`\u6253${n.discountPercent}\u6298`;return()=>p("div",null,[p("span",null,[e]),p("span",null,[o])])}}),M=f({name:"CouponValidTerm",props:{coupon:v()},setup(s){const n=s.coupon,e=n.validityType===E.DATE.type?`\u6709\u6548\u671F\uFF1A${w(n.validStartTime,"YYYY-MM-DD")} \u81F3 ${w(n.validEndTime,"YYYY-MM-DD")}`:`\u9886\u53D6\u540E\u7B2C ${n.fixedStartTerm} - ${n.fixedEndTerm} \u5929\u5185\u53EF\u7528`;return()=>p("div",null,[e])}}),S={key:0,class:"m-l-16px flex flex-row justify-between p-8px"},q={class:"flex flex-col justify-evenly gap-4px"},V={class:"flex flex-col justify-evenly"},F={key:1,class:"m-l-16px flex flex-row justify-between p-8px"},L={class:"flex flex-col justify-evenly gap-4px"},O={class:"flex flex-col"},z={key:2,class:"flex flex-col items-center justify-around gap-4px p-4px"},A=j(f({name:"CouponCard",__name:"index",props:{property:{type:Object,required:!0}},setup(s,{expose:n}){n();const e=s,o=a([]);C(()=>e.property.couponIds,async()=>{var c;((c=e.property.couponIds)==null?void 0:c.length)>0&&(o.value=await I(e.property.couponIds))},{immediate:!0,deep:!0});const l=a(375),m=a(),x=a("100%"),t=a(375);C(()=>[e.property,l,o.value.length],()=>{t.value=(.95*l.value-e.property.space*(e.property.columns-1))/e.property.columns,x.value=t.value*o.value.length+e.property.space*(o.value.length-1)+"px"},{immediate:!0,deep:!0}),T(()=>{var c,g;l.value=((g=(c=m.value)==null?void 0:c.wrapRef)==null?void 0:g.offsetWidth)||375});const y={props:e,couponList:o,phoneWidth:l,containerRef:m,scrollbarWidth:x,couponWidth:t,get CouponDiscount(){return W},get CouponDiscountDesc(){return R},get CouponValidTerm(){return M}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(s,n,e,o,l,m){const x=Y;return u(),_(x,{class:"z-1 min-h-30px","wrap-class":"w-full",ref:"containerRef"},{default:$(()=>[r("div",{class:"flex flex-row text-12px",style:i({gap:`${e.property.space}px`,width:o.scrollbarWidth})},[(u(!0),d(k,null,P(o.couponList,(t,y)=>(u(),d("div",{class:"box-content",style:i({background:e.property.bgImg?`url(${e.property.bgImg}) 100% center / 100% 100% no-repeat`:"#fff",width:`${o.couponWidth}px`,color:e.property.textColor}),key:y},[e.property.columns===1?(u(),d("div",S,[r("div",q,[p(o.CouponDiscount,{coupon:t},null,8,["coupon"]),p(o.CouponDiscountDesc,{coupon:t},null,8,["coupon"]),p(o.CouponValidTerm,{coupon:t},null,8,["coupon"])]),r("div",V,[r("div",{class:"rounded-20px p-x-8px p-y-2px",style:i({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):e.property.columns===2?(u(),d("div",F,[r("div",L,[p(o.CouponDiscount,{coupon:t},null,8,["coupon"]),r("div",null,D(t.name),1)]),r("div",O,[r("div",{class:"h-full w-20px rounded-20px p-x-2px p-y-8px text-center",style:i({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):(u(),d("div",z,[p(o.CouponDiscount,{coupon:t},null,8,["coupon"]),r("div",null,D(t.name),1),r("div",{class:"rounded-20px p-x-8px p-y-2px",style:i({color:e.property.button.color,background:e.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)]))],4))),128))],4)]),_:1},512)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/DiyEditor/components/mobile/CouponCard/index.vue"]]);export{A as default};
