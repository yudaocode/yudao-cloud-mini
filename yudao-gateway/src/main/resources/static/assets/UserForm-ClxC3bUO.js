import{d as F,g as T,D as R,r as m,f as C,G as P,U as q,_ as O,o as i,q as c,w as o,k as a,m as w,I as j,ah as I,c as U,F as L,n as x,Z as N,L as Y,v as A,E as B,J as G,K as J,O as K,N as M,R as X}from"./index-BaY5TDP-.js";import{_ as Z}from"./Dialog-CZSXtzfQ.js";import{E as $}from"./el-tree-select-DphqCDCz.js";import{C as E}from"./constants-CEEr2azc.js";import{h as z,d as H}from"./tree-z7HkrWVC.js";import{g as Q}from"./index-D-_5jDBN.js";import{g as W}from"./index-dK17nfjs.js";import{b as ee,c as ae,u as le}from"./index-CuAlllbQ.js";const oe=O(F({name:"SystemUserForm",__name:"UserForm",emits:["success"],setup(S,{expose:s,emit:k}){const{t:e}=T(),g=R(),v=m(!1),u=m(""),r=m(!1),d=m(""),f=m({nickname:"",deptId:"",mobile:"",email:"",id:void 0,username:"",password:"",sex:void 0,postIds:[],remark:"",status:E.ENABLE,roleIds:[]}),n=C({username:[{required:!0,message:"\u7528\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nickname:[{required:!0,message:"\u7528\u6237\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u7528\u6237\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],email:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740",trigger:["blur","change"]}],mobile:[{pattern:/^(?:(?:\+|00)86)?1(?:3[\d]|4[5-79]|5[0-35-9]|6[5-7]|7[0-8]|8[\d]|9[189])\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}]}),p=m(),_=m([]),V=m([]),b=async(t,h)=>{if(v.value=!0,u.value=e("action."+t),d.value=t,y(),h){r.value=!0;try{f.value=await ee(h)}finally{r.value=!1}}_.value=z(await W()),V.value=await Q()};s({open:b});const D=k,y=()=>{var t;f.value={nickname:"",deptId:"",mobile:"",email:"",id:void 0,username:"",password:"",sex:void 0,postIds:[],remark:"",status:E.ENABLE,roleIds:[]},(t=p.value)==null||t.resetFields()},l={t:e,message:g,dialogVisible:v,dialogTitle:u,formLoading:r,formType:d,formData:f,formRules:n,formRef:p,deptList:_,postList:V,open:b,emit:D,submitForm:async()=>{if(p&&await p.value.validate()){r.value=!0;try{const t=f.value;d.value==="create"?(await ae(t),g.success(e("common.createSuccess"))):(await le(t),g.success(e("common.updateSuccess"))),v.value=!1,D("success")}finally{r.value=!1}}},resetForm:y,get DICT_TYPE(){return P},get getIntDictOptions(){return q},get defaultProps(){return H}};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),[["render",function(S,s,k,e,g,v){const u=N,r=Y,d=A,f=$,n=B,p=G,_=J,V=K,b=M,D=Z,y=X;return i(),c(D,{modelValue:e.dialogVisible,"onUpdate:modelValue":s[10]||(s[10]=l=>e.dialogVisible=l),title:e.dialogTitle},{footer:o(()=>[a(b,{disabled:e.formLoading,type:"primary",onClick:e.submitForm},{default:o(()=>s[11]||(s[11]=[w("\u786E \u5B9A")])),_:1},8,["disabled"]),a(b,{onClick:s[9]||(s[9]=l=>e.dialogVisible=!1)},{default:o(()=>s[12]||(s[12]=[w("\u53D6 \u6D88")])),_:1})]),default:o(()=>[j((i(),c(V,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"80px"},{default:o(()=>[a(n,null,{default:o(()=>[a(d,{span:12},{default:o(()=>[a(r,{label:"\u7528\u6237\u6635\u79F0",prop:"nickname"},{default:o(()=>[a(u,{modelValue:e.formData.nickname,"onUpdate:modelValue":s[0]||(s[0]=l=>e.formData.nickname=l),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),a(d,{span:12},{default:o(()=>[a(r,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:o(()=>[a(f,{modelValue:e.formData.deptId,"onUpdate:modelValue":s[1]||(s[1]=l=>e.formData.deptId=l),data:e.deptList,props:e.defaultProps,"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8"},null,8,["modelValue","data","props"])]),_:1})]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,{span:12},{default:o(()=>[a(r,{label:"\u624B\u673A\u53F7\u7801",prop:"mobile"},{default:o(()=>[a(u,{modelValue:e.formData.mobile,"onUpdate:modelValue":s[2]||(s[2]=l=>e.formData.mobile=l),maxlength:"11",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),a(d,{span:12},{default:o(()=>[a(r,{label:"\u90AE\u7BB1",prop:"email"},{default:o(()=>[a(u,{modelValue:e.formData.email,"onUpdate:modelValue":s[3]||(s[3]=l=>e.formData.email=l),maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,{span:12},{default:o(()=>[e.formData.id===void 0?(i(),c(r,{key:0,label:"\u7528\u6237\u540D\u79F0",prop:"username"},{default:o(()=>[a(u,{modelValue:e.formData.username,"onUpdate:modelValue":s[4]||(s[4]=l=>e.formData.username=l),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1})):I("",!0)]),_:1}),a(d,{span:12},{default:o(()=>[e.formData.id===void 0?(i(),c(r,{key:0,label:"\u7528\u6237\u5BC6\u7801",prop:"password"},{default:o(()=>[a(u,{modelValue:e.formData.password,"onUpdate:modelValue":s[5]||(s[5]=l=>e.formData.password=l),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u5BC6\u7801","show-password":"",type:"password"},null,8,["modelValue"])]),_:1})):I("",!0)]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,{span:12},{default:o(()=>[a(r,{label:"\u7528\u6237\u6027\u522B"},{default:o(()=>[a(_,{modelValue:e.formData.sex,"onUpdate:modelValue":s[6]||(s[6]=l=>e.formData.sex=l),placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(i(!0),U(L,null,x(e.getIntDictOptions(e.DICT_TYPE.SYSTEM_USER_SEX),l=>(i(),c(p,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(d,{span:12},{default:o(()=>[a(r,{label:"\u5C97\u4F4D"},{default:o(()=>[a(_,{modelValue:e.formData.postIds,"onUpdate:modelValue":s[7]||(s[7]=l=>e.formData.postIds=l),multiple:"",placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(i(!0),U(L,null,x(e.postList,l=>(i(),c(p,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(n,null,{default:o(()=>[a(d,{span:24},{default:o(()=>[a(r,{label:"\u5907\u6CE8"},{default:o(()=>[a(u,{modelValue:e.formData.remark,"onUpdate:modelValue":s[8]||(s[8]=l=>e.formData.remark=l),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[y,e.formLoading]])]),_:1},8,["modelValue","title"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/system/user/UserForm.vue"]]);export{oe as default};
