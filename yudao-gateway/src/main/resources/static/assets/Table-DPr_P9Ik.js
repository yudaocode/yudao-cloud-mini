import{d as M,p as r,r as v,C as N,a,b as k,au as P,I as V,R as X,k as s,Q as Y,bk as z,s as Z,P as x,_ as ee}from"./index-BaY5TDP-.js";import{g as m}from"./tsxHelper-B5zJ1wt3.js";import{E as ne}from"./index-DrSdAlug.js";const ae=ee(M({name:"Table",props:{pageSize:r.number.def(10),currentPage:r.number.def(1),selection:r.bool.def(!1),showOverflowTooltip:r.bool.def(!0),columns:{type:Array,default:()=>[]},expand:r.bool.def(!1),pagination:{type:Object,default:()=>{}},reserveSelection:r.bool.def(!1),loading:r.bool.def(!1),reserveIndex:r.bool.def(!1),align:r.string.validate(i=>["left","center","right"].includes(i)).def("center"),headerAlign:r.string.validate(i=>["left","center","right"].includes(i)).def("center"),data:{type:Array,default:()=>[]}},emits:["update:pageSize","update:currentPage","register"],setup(i,{attrs:W,slots:g,emit:O,expose:q}){const T=v();N(()=>{const e=a(T);O("register",e==null?void 0:e.$parent,T)});const w=v(i.pageSize),S=v(i.currentPage),B=v({}),_=v({}),t=k(()=>{const e={...i};return Object.assign(e,a(_)),e}),C=(e,c)=>{var o;const{columns:u}=a(t);for(const p of c||u)for(const f of e)p.field===f.field?Z(p,f.path,f.value):(o=p.children)!=null&&o.length&&C(e,p.children)},U=v([]),D=e=>{U.value=e};q({setProps:(e={})=>{_.value=Object.assign(a(_),e),B.value=e},setColumn:C,selections:U});const F=k(()=>Object.assign({small:!1,background:!0,pagerCount:document.body.clientWidth<992?5:7,layout:"total, sizes, prev, pager, next, jumper",pageSizes:[10,20,30,50,100],disabled:!1,hideOnSinglePage:!1,total:10},a(t).pagination));P(()=>a(t).pageSize,e=>{w.value=e}),P(()=>a(t).currentPage,e=>{S.value=e}),P(()=>w.value,e=>{O("update:pageSize",e)}),P(()=>S.value,e=>{O("update:currentPage",e)});const G=k(()=>{const e={...W,...i};return delete e.columns,delete e.data,e}),H=()=>{const{selection:e,reserveSelection:c,align:u,headerAlign:o}=a(t);return e?s(x,{type:"selection",reserveSelection:c,align:u,headerAlign:o,width:"50"},null):void 0},J=()=>{const{align:e,headerAlign:c,expand:u}=a(t);return u?s(x,{type:"expand",align:e,headerAlign:c},{default:o=>m(g,"expand",o)}):void 0},E=e=>{const{columns:c,reserveIndex:u,pageSize:o,currentPage:p,align:f,headerAlign:Q,showOverflowTooltip:K}=a(t);return[J(),H()].concat((e||c).map(n=>{if(n.type==="index")return s(x,{type:"index",index:n.index?n.index:b=>((d,A,j,$)=>{const y=A+1;return d?j*($-1)+y:y})(u,b,o,p),align:n.align||f,headerAlign:n.headerAlign||Q,label:n.label,width:"65px"},null);{const b={...n};return b.children&&delete b.children,s(x,z({showOverflowTooltip:K,align:f,headerAlign:Q},b,{prop:n.field}),{default:d=>{var A;return n.children&&n.children.length?(j=>{const{align:$,headerAlign:y,showOverflowTooltip:L}=a(t);return j.map(l=>{const I={...l};return I.children&&delete I.children,s(x,z({showOverflowTooltip:L,align:$,headerAlign:y},I,{prop:l.field}),{default:h=>{var R;return l.children&&l.children.length?E(l.children):m(g,l.field,h)||((R=l==null?void 0:l.formatter)==null?void 0:R.call(l,h.row,h.column,h.row[l.field],h.$index))||h.row[l.field]},header:m(g,`${l.field}-header`)})})})(n.children):m(g,n.field,d)||((A=n==null?void 0:n.formatter)==null?void 0:A.call(n,d.row,d.column,d.row[n.field],d.$index))||d.row[n.field]},header:()=>m(g,`${n.field}-header`)||n.label})}}))};return()=>V(s("div",null,[s(Y,z({ref:T,data:a(t).data,"onSelection-change":D},a(G)),{default:()=>E(),append:()=>m(g,"append")}),a(t).pagination?s(ne,z({pageSize:w.value,"onUpdate:pageSize":e=>w.value=e,currentPage:S.value,"onUpdate:currentPage":e=>S.value=e,class:"float-right mb-15px mt-15px"},a(F)),null):void 0]),[[X,a(t).loading]])}}),[["__scopeId","data-v-b4105caf"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/Table/src/Table.vue"]]);export{ae as _};
