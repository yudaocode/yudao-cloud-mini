import{d as T,g as F,D as S,r as i,f as q,G as E,U as O,_ as R,o as p,q as P,w as r,k as a,m as w,I as N,c as k,F as C,n as L,t as A,Z as M,L as Y,v as j,J as B,K as G,ak as J,al as K,cf as Z,E as z,O as H,N as Q,R as W}from"./index-BaY5TDP-.js";import{_ as X}from"./Dialog-CZSXtzfQ.js";import{E as $}from"./el-tree-select-DphqCDCz.js";import{P as I}from"./index-CJwxK5Qx.js";import{P as ee}from"./index-B2KWfNxB.js";import{P as ae}from"./index-CRTwLgwp.js";import{C as le}from"./constants-CEEr2azc.js";import{h as te,d as re}from"./tree-z7HkrWVC.js";const de=R(T({name:"ProductForm",__name:"ProductForm",emits:["success"],setup(x,{expose:t,emit:U}){const{t:e}=F(),v=S(),g=i(!1),m=i(""),d=i(!1),o=i(""),n=i({id:void 0,name:void 0,barCode:void 0,categoryId:void 0,unitId:void 0,status:void 0,standard:void 0,remark:void 0,expiryDay:void 0,weight:void 0,purchasePrice:void 0,salePrice:void 0,minPrice:void 0}),h=q({name:[{required:!0,message:"\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],barCode:[{required:!0,message:"\u4EA7\u54C1\u6761\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],categoryId:[{required:!0,message:"\u4EA7\u54C1\u5206\u7C7B\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],unitId:[{required:!0,message:"\u5355\u4F4D\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u4EA7\u54C1\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=i(),_=i([]),V=i([]),s=async(u,y)=>{if(g.value=!0,m.value=e("action."+u),o.value=u,D(),y){d.value=!0;try{n.value=await I.getProduct(y)}finally{d.value=!1}}const l=await ee.getProductCategorySimpleList();_.value=te(l,"id","parentId"),V.value=await ae.getProductUnitSimpleList()};t({open:s});const b=U,D=()=>{var u;n.value={id:void 0,name:void 0,barCode:void 0,categoryId:void 0,unitId:void 0,status:le.ENABLE,standard:void 0,remark:void 0,expiryDay:void 0,weight:void 0,purchasePrice:void 0,salePrice:void 0,minPrice:void 0},(u=c.value)==null||u.resetFields()},f={t:e,message:v,dialogVisible:g,dialogTitle:m,formLoading:d,formType:o,formData:n,formRules:h,formRef:c,categoryList:_,unitList:V,open:s,emit:b,submitForm:async()=>{await c.value.validate(),d.value=!0;try{const u=n.value;o.value==="create"?(await I.createProduct(u),v.success(e("common.createSuccess"))):(await I.updateProduct(u),v.success(e("common.updateSuccess"))),g.value=!1,b("success")}finally{d.value=!1}},resetForm:D,get defaultProps(){return re},get DICT_TYPE(){return E},get getIntDictOptions(){return O}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),[["render",function(x,t,U,e,v,g){const m=M,d=Y,o=j,n=$,h=B,c=G,_=J,V=K,s=Z,b=z,D=H,f=Q,u=X,y=W;return p(),P(u,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":t[13]||(t[13]=l=>e.dialogVisible=l)},{footer:r(()=>[a(f,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:r(()=>t[14]||(t[14]=[w("\u786E \u5B9A")])),_:1},8,["disabled"]),a(f,{onClick:t[12]||(t[12]=l=>e.dialogVisible=!1)},{default:r(()=>t[15]||(t[15]=[w("\u53D6 \u6D88")])),_:1})]),default:r(()=>[N((p(),P(D,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px"},{default:r(()=>[a(b,{gutter:20},{default:r(()=>[a(o,{span:12},{default:r(()=>[a(d,{label:"\u540D\u79F0",prop:"name"},{default:r(()=>[a(m,{modelValue:e.formData.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.formData.name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u6761\u7801",prop:"barCode"},{default:r(()=>[a(m,{modelValue:e.formData.barCode,"onUpdate:modelValue":t[1]||(t[1]=l=>e.formData.barCode=l),placeholder:"\u8BF7\u8F93\u5165\u6761\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u5206\u7C7B",prop:"categoryId"},{default:r(()=>[a(n,{modelValue:e.formData.categoryId,"onUpdate:modelValue":t[2]||(t[2]=l=>e.formData.categoryId=l),data:e.categoryList,props:e.defaultProps,"check-strictly":"","default-expand-all":"",placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",class:"w-1/1"},null,8,["modelValue","data","props"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u5355\u4F4D",prop:"unitId"},{default:r(()=>[a(c,{modelValue:e.formData.unitId,"onUpdate:modelValue":t[3]||(t[3]=l=>e.formData.unitId=l),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D",class:"w-1/1"},{default:r(()=>[(p(!0),k(C,null,L(e.unitList,l=>(p(),P(h,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u72B6\u6001",prop:"status"},{default:r(()=>[a(V,{modelValue:e.formData.status,"onUpdate:modelValue":t[4]||(t[4]=l=>e.formData.status=l)},{default:r(()=>[(p(!0),k(C,null,L(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),l=>(p(),P(_,{key:l.value,value:l.value},{default:r(()=>[w(A(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u89C4\u683C",prop:"standard"},{default:r(()=>[a(m,{modelValue:e.formData.standard,"onUpdate:modelValue":t[5]||(t[5]=l=>e.formData.standard=l),placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u4FDD\u8D28\u671F\u5929\u6570",prop:"expiryDay"},{default:r(()=>[a(s,{modelValue:e.formData.expiryDay,"onUpdate:modelValue":t[6]||(t[6]=l=>e.formData.expiryDay=l),placeholder:"\u8BF7\u8F93\u5165\u4FDD\u8D28\u671F\u5929\u6570",min:0,precision:0,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u91CD\u91CF\uFF08kg\uFF09",prop:"weight"},{default:r(()=>[a(s,{modelValue:e.formData.weight,"onUpdate:modelValue":t[7]||(t[7]=l=>e.formData.weight=l),placeholder:"\u8BF7\u8F93\u5165\u91CD\u91CF\uFF08kg\uFF09",min:0,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u91C7\u8D2D\u4EF7\u683C",prop:"purchasePrice"},{default:r(()=>[a(s,{modelValue:e.formData.purchasePrice,"onUpdate:modelValue":t[8]||(t[8]=l=>e.formData.purchasePrice=l),placeholder:"\u8BF7\u8F93\u5165\u91C7\u8D2D\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u9500\u552E\u4EF7\u683C",prop:"salePrice"},{default:r(()=>[a(s,{modelValue:e.formData.salePrice,"onUpdate:modelValue":t[9]||(t[9]=l=>e.formData.salePrice=l),placeholder:"\u8BF7\u8F93\u5165\u9500\u552E\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:12},{default:r(()=>[a(d,{label:"\u6700\u4F4E\u4EF7\u683C",prop:"minPrice"},{default:r(()=>[a(s,{modelValue:e.formData.minPrice,"onUpdate:modelValue":t[10]||(t[10]=l=>e.formData.minPrice=l),placeholder:"\u8BF7\u8F93\u5165\u6700\u4F4E\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),a(o,{span:24},{default:r(()=>[a(d,{label:"\u5907\u6CE8",prop:"remark"},{default:r(()=>[a(m,{type:"textarea",modelValue:e.formData.remark,"onUpdate:modelValue":t[11]||(t[11]=l=>e.formData.remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[y,e.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/product/product/ProductForm.vue"]]);export{de as default};
