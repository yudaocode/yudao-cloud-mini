import{d as q,r as f,f as D,u as L,ba as S,C as U,G as V,e4 as Y,e2 as A,_ as z,X as B,o as n,c as h,k as a,w as t,j as M,F as R,n as Q,q as p,I as F,m,t as u,J as j,K as O,L as G,O as J,y as K,P as X,b8 as H,N as W,Q as Z,R as $}from"./index-BaY5TDP-.js";import{_ as ee}from"./index-avjYFQiD.js";import{_ as re}from"./DictTag-QtcI9ZjC.js";import{_ as ae}from"./ContentWrap-DKQn7kZm.js";import{d as te,b as le}from"./formatTime-Dr6TiYYc.js";import{e as ie}from"./index-ndAUlMgd.js";import{R as oe}from"./common-BQQO87UM.js";import ne from"./ReceivableForm-C0pIMqYw.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./index-DcQDDeHJ.js";import"./index-CuAlllbQ.js";import"./index-h6ObHKtQ.js";import"./index-B97LdofC.js";const pe=z(q({name:"ReceivablePlanRemindList",__name:"ReceivablePlanRemindList",setup(C,{expose:i}){i();const b=f(!0),e=f(0),v=f([]),g=D({pageNo:1,pageSize:10,remindType:1}),P=f(),s=async()=>{b.value=!0;try{const o=await ie(g);v.value=o.list,e.value=o.total}finally{b.value=!1}},_=f(),{push:d}=L();S(async()=>{await s()}),U(async()=>{await s()});const c={loading:b,total:e,list:v,queryParams:g,queryFormRef:P,getList:s,handleQuery:()=>{g.pageNo=1,s()},receivableFormRef:_,openReceivableForm:o=>{_.value.open("create",void 0,o)},push:d,openDetail:o=>{d({name:"CrmReceivablePlanDetail",params:{id:o}})},openCustomerDetail:o=>{d({name:"CrmCustomerDetail",params:{id:o}})},get DICT_TYPE(){return V},get dateFormatter(){return te},get dateFormatter2(){return le},get RECEIVABLE_REMIND_TYPE(){return oe},get erpPriceInputFormatter(){return Y},get erpPriceTableColumnFormatter(){return A},ReceivableForm:ne};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(C,i,b,e,v,g){const P=j,s=O,_=G,d=J,c=ae,o=K,l=X,T=re,w=H,x=W,E=Z,k=ee,I=B("hasPermi"),N=$;return n(),h(R,null,[a(c,null,{default:t(()=>[i[3]||(i[3]=M("div",{class:"pb-5 text-xl"},"\u5F85\u56DE\u6B3E\u63D0\u9192",-1)),a(d,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"68px"},{default:t(()=>[a(_,{label:"\u5408\u540C\u72B6\u6001",prop:"remindType"},{default:t(()=>[a(s,{modelValue:e.queryParams.remindType,"onUpdate:modelValue":i[0]||(i[0]=r=>e.queryParams.remindType=r),class:"!w-240px",placeholder:"\u72B6\u6001",onChange:e.handleQuery},{default:t(()=>[(n(!0),h(R,null,Q(e.RECEIVABLE_REMIND_TYPE,(r,y)=>(n(),p(P,{label:r.label,value:r.value,key:y},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(c,null,{default:t(()=>[F((n(),p(E,{data:e.list,stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[a(l,{align:"center",fixed:"left",label:"\u5BA2\u6237\u540D\u79F0",prop:"customerName",width:"150"},{default:t(r=>[a(o,{underline:!1,type:"primary",onClick:y=>e.openCustomerDetail(r.row.customerId)},{default:t(()=>[m(u(r.row.customerName),1)]),_:2},1032,["onClick"])]),_:1}),a(l,{align:"center",label:"\u5408\u540C\u7F16\u53F7",prop:"contractNo",width:"200px"}),a(l,{align:"center",label:"\u671F\u6570",prop:"period"},{default:t(r=>[a(o,{underline:!1,type:"primary",onClick:y=>e.openDetail(r.row.id)},{default:t(()=>[m(u(r.row.period),1)]),_:2},1032,["onClick"])]),_:1}),a(l,{align:"center",label:"\u8BA1\u5212\u56DE\u6B3E\u91D1\u989D\uFF08\u5143\uFF09",prop:"price",width:"160",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),a(l,{formatter:e.dateFormatter2,align:"center",label:"\u8BA1\u5212\u56DE\u6B3E\u65E5\u671F",prop:"returnTime",width:"180px"},null,8,["formatter"]),a(l,{align:"center",label:"\u63D0\u524D\u51E0\u5929\u63D0\u9192",prop:"remindDays",width:"150"}),a(l,{align:"center",label:"\u63D0\u9192\u65E5\u671F",prop:"remindTime",width:"180px",formatter:e.dateFormatter2},null,8,["formatter"]),a(l,{align:"center",label:"\u56DE\u6B3E\u65B9\u5F0F",prop:"returnType",width:"130px"},{default:t(r=>[a(T,{type:e.DICT_TYPE.CRM_RECEIVABLE_RETURN_TYPE,value:r.row.returnType},null,8,["type","value"])]),_:1}),a(l,{align:"center",label:"\u5907\u6CE8",prop:"remark"}),a(l,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserName",width:"120"}),a(l,{align:"center",label:"\u5B9E\u9645\u56DE\u6B3E\u91D1\u989D\uFF08\u5143\uFF09",prop:"receivable.price",width:"160"},{default:t(r=>[r.row.receivable?(n(),p(w,{key:0},{default:t(()=>[m(u(e.erpPriceInputFormatter(r.row.receivable.price)),1)]),_:2},1024)):(n(),p(w,{key:1},{default:t(()=>[m(u(e.erpPriceInputFormatter(0)),1)]),_:1}))]),_:1}),a(l,{align:"center",label:"\u5B9E\u9645\u56DE\u6B3E\u65E5\u671F",prop:"receivable.returnTime",width:"180px",formatter:e.dateFormatter2},null,8,["formatter"]),a(l,{align:"center",label:"\u5B9E\u9645\u56DE\u6B3E\u91D1\u989D\uFF08\u5143\uFF09",prop:"receivable.price",width:"160"},{default:t(r=>[r.row.receivable?(n(),p(w,{key:0},{default:t(()=>[m(u(e.erpPriceInputFormatter(r.row.price-r.row.receivable.price)),1)]),_:2},1024)):(n(),p(w,{key:1},{default:t(()=>[m(u(e.erpPriceInputFormatter(r.row.price)),1)]),_:2},1024))]),_:1}),a(l,{formatter:e.dateFormatter,align:"center",label:"\u66F4\u65B0\u65F6\u95F4",prop:"updateTime",width:"180px"},null,8,["formatter"]),a(l,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(l,{align:"center",label:"\u521B\u5EFA\u4EBA",prop:"creatorName",width:"100px"}),a(l,{align:"center",fixed:"right",label:"\u64CD\u4F5C",width:"180px"},{default:t(r=>[F((n(),p(x,{link:"",type:"success",onClick:y=>e.openReceivableForm(r.row),disabled:r.row.receivableId},{default:t(()=>i[4]||(i[4]=[m(" \u521B\u5EFA\u56DE\u6B3E ")])),_:2},1032,["onClick","disabled"])),[[I,["crm:receivable:create"]]])]),_:1})]),_:1},8,["data"])),[[N,e.loading]]),a(k,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":i[1]||(i[1]=r=>e.queryParams.pageNo=r),limit:e.queryParams.pageSize,"onUpdate:limit":i[2]||(i[2]=r=>e.queryParams.pageSize=r),onPagination:e.getList},null,8,["total","page","limit"])]),_:1}),a(e.ReceivableForm,{ref:"receivableFormRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/backlog/components/ReceivablePlanRemindList.vue"]]);export{pe as default};
