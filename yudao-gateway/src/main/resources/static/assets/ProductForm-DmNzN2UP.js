import{d as L,g as k,D as q,r as i,e as O,f as R,C as S,G as E,U as x,_ as N,o as n,q as v,w as r,k as l,m as P,I as Y,c as U,F as w,n as T,Z as j,L as M,v as A,J as G,K as J,cg as K,cf as Z,E as z,O as B,N as H,R as Q}from"./index-BaY5TDP-.js";import{_ as W}from"./Dialog-CZSXtzfQ.js";import{a as X,c as $,u as ee}from"./index-D4G-Yxr7.js";import{g as ae}from"./index-kC15peaN.js";import{h as le,d as te}from"./tree-z7HkrWVC.js";import{g as re}from"./index-CuAlllbQ.js";const se=N(L({name:"CrmProductForm",__name:"ProductForm",emits:["success"],setup(F,{expose:t,emit:C}){const{t:e}=k(),g=q(),_=i(!1),m=i(""),s=i(!1),o=i(""),p=O().getUser.id,d=i({id:void 0,name:void 0,no:void 0,unit:void 0,price:NaN,status:void 0,categoryId:void 0,description:void 0,ownerUserId:-1}),y=R({name:[{required:!0,message:"\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],no:[{required:!0,message:"\u4EA7\u54C1\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],categoryId:[{required:!0,message:"\u4EA7\u54C1\u5206\u7C7BID\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],price:[{required:!0,message:"\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=i(),b=async(u,h)=>{if(_.value=!0,m.value=e("action."+u),o.value=u,f(),h){s.value=!0;try{d.value=await X(h)}finally{s.value=!1}}else d.value.ownerUserId=p};t({open:b});const V=C,f=()=>{var u;d.value={id:void 0,name:void 0,no:void 0,unit:void 0,price:NaN,status:void 0,categoryId:void 0,description:void 0,ownerUserId:-1},(u=c.value)==null||u.resetFields()},D=i([]),I=i([]);S(async()=>{const u=await ae({});D.value=le(u,"id","parentId"),I.value=await re()});const a={t:e,message:g,dialogVisible:_,dialogTitle:m,formLoading:s,formType:o,userId:p,formData:d,formRules:y,formRef:c,open:b,emit:V,submitForm:async()=>{if(c&&await c.value.validate()){s.value=!0;try{const u=d.value;o.value==="create"?(await $(u),g.success(e("common.createSuccess"))):(await ee(u),g.success(e("common.updateSuccess"))),_.value=!1,V("success")}finally{s.value=!1}}},resetForm:f,productCategoryList:D,userList:I,get DICT_TYPE(){return E},get getIntDictOptions(){return x},get defaultProps(){return te}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),[["render",function(F,t,C,e,g,_){const m=j,s=M,o=A,p=G,d=J,y=K,c=Z,b=z,V=B,f=H,D=W,I=Q;return n(),v(D,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":t[9]||(t[9]=a=>e.dialogVisible=a)},{footer:r(()=>[l(f,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:r(()=>t[10]||(t[10]=[P("\u786E \u5B9A")])),_:1},8,["disabled"]),l(f,{onClick:t[8]||(t[8]=a=>e.dialogVisible=!1)},{default:r(()=>t[11]||(t[11]=[P("\u53D6 \u6D88")])),_:1})]),default:r(()=>[Y((n(),v(V,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px"},{default:r(()=>[l(b,null,{default:r(()=>[l(o,{span:12},{default:r(()=>[l(s,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"name"},{default:r(()=>[l(m,{modelValue:e.formData.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.formData.name=a),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:r(()=>[l(s,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:r(()=>[l(d,{modelValue:e.formData.ownerUserId,"onUpdate:modelValue":t[1]||(t[1]=a=>e.formData.ownerUserId=a),placeholder:"\u8BF7\u9009\u62E9\u8D1F\u8D23\u4EBA",disabled:e.formData.id,class:"w-1/1"},{default:r(()=>[(n(!0),U(w,null,T(e.userList,a=>(n(),v(p,{key:a.id,label:a.nickname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(o,{span:12},{default:r(()=>[l(s,{label:"\u4EA7\u54C1\u7C7B\u578B",prop:"categoryId"},{default:r(()=>[l(y,{modelValue:e.formData.categoryId,"onUpdate:modelValue":t[2]||(t[2]=a=>e.formData.categoryId=a),options:e.productCategoryList,props:e.defaultProps,class:"w-1/1",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u7C7B\u578B",filterable:""},null,8,["modelValue","options","props"])]),_:1})]),_:1}),l(o,{span:12},{default:r(()=>[l(s,{label:"\u4EA7\u54C1\u5355\u4F4D",prop:"unit"},{default:r(()=>[l(d,{modelValue:e.formData.unit,"onUpdate:modelValue":t[3]||(t[3]=a=>e.formData.unit=a),class:"w-1/1",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D"},{default:r(()=>[(n(!0),U(w,null,T(e.getIntDictOptions(e.DICT_TYPE.CRM_PRODUCT_UNIT),a=>(n(),v(p,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:r(()=>[l(s,{label:"\u4EA7\u54C1\u7F16\u7801",prop:"no"},{default:r(()=>[l(m,{modelValue:e.formData.no,"onUpdate:modelValue":t[4]||(t[4]=a=>e.formData.no=a),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u7F16\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:r(()=>[l(s,{label:"\u4EF7\u683C",prop:"price"},{default:r(()=>[l(c,{modelValue:e.formData.price,"onUpdate:modelValue":t[5]||(t[5]=a=>e.formData.price=a),placeholder:"\u8BF7\u8F93\u5165\u4EF7\u683C",min:0,precision:2,step:.1,class:"w-full!"},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:r(()=>[l(s,{label:"\u4EA7\u54C1\u63CF\u8FF0",prop:"description"},{default:r(()=>[l(m,{modelValue:e.formData.description,"onUpdate:modelValue":t[6]||(t[6]=a=>e.formData.description=a),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:r(()=>[l(s,{label:"\u4E0A\u67B6\u72B6\u6001",prop:"status"},{default:r(()=>[l(d,{modelValue:e.formData.status,"onUpdate:modelValue":t[7]||(t[7]=a=>e.formData.status=a),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",class:"w-1/1"},{default:r(()=>[(n(!0),U(w,null,T(e.getIntDictOptions(e.DICT_TYPE.CRM_PRODUCT_STATUS),a=>(n(),v(p,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[I,e.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/product/ProductForm.vue"]]);export{se as default};
