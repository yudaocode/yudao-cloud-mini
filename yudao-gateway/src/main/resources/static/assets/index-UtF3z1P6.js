import{d as I,S as z,r as s,u as B,C as F,D as x,a as P,_ as S,c as T,I as V,q as E,w as t,k as i,F as h,v as j,R as k,o as _,m as A,ah as q,N as H,A as M,B as N}from"./index-BaY5TDP-.js";import{g as O,_ as Q}from"./index-fxekK-Kb.js";import{u as U}from"./tagsView-lnAkwTv2.js";import{a as W}from"./index-DcQDDeHJ.js";import G from"./ReceivableDetailsHeader-V5ew6nNA.js";import J from"./ReceivableDetailsInfo-72A3UdN1.js";import K from"./PermissionList-CbQig5nT.js";import{B as C}from"./index-BlslFSYd.js";import X from"./ReceivableForm-C0pIMqYw.js";import"./el-timeline-item-BFYwlQ-d.js";import"./formatTime-Dr6TiYYc.js";import"./ContentWrap-DKQn7kZm.js";import"./el-descriptions-item-CRF_CO88.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";import"./PermissionForm-jo-CjsNU.js";import"./Dialog-CZSXtzfQ.js";import"./index-CuAlllbQ.js";import"./index-ndAUlMgd.js";import"./index-h6ObHKtQ.js";import"./index-B97LdofC.js";const Y=S(I({name:"CrmReceivablePlanDetail",__name:"index",props:{id:{type:Number,required:!1}},setup(g,{expose:r}){r();const d=g,e=z(),v=x(),n=s(0),m=s(!0),l=s({}),b=s(),u=async a=>{m.value=!0;try{l.value=await W(a),await o(a)}finally{m.value=!1}},p=s(),c=s([]),o=async a=>{if(!a)return;const R=await O({bizType:C.CRM_RECEIVABLE,bizId:a});c.value=R.list},{delView:f}=U(),{currentRoute:y}=B(),w=()=>{f(P(y))},{params:D}=z();F(async()=>{const a=d.id||e.params.id;if(!a)return v.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u56DE\u6B3E\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void w();n.value=a,await u(n.value)});const L={props:d,route:e,message:v,receivableId:n,loading:m,receivable:l,permissionListRef:b,getReceivable:u,formRef:p,openForm:(a,R)=>{p.value.open(a,R)},logList:c,getOperateLog:o,delView:f,currentRoute:y,close:w,params:D,ReceivableDetailsHeader:G,ReceivableDetailsInfo:J,PermissionList:K,get BizTypeEnum(){return C},ReceivableForm:X};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}}),[["render",function(g,r,d,e,v,n){const m=H,l=M,b=Q,u=N,p=j,c=k;return _(),T(h,null,[V((_(),E(e.ReceivableDetailsHeader,{receivable:e.receivable},{default:t(()=>{var o;return[(o=e.permissionListRef)!=null&&o.validateWrite?(_(),E(m,{key:0,onClick:r[0]||(r[0]=f=>e.openForm("update",e.receivable.id))},{default:t(()=>r[2]||(r[2]=[A(" \u7F16\u8F91 ")])),_:1})):q("",!0)]}),_:1},8,["receivable"])),[[c,e.loading]]),i(p,null,{default:t(()=>[i(u,null,{default:t(()=>[i(l,{label:"\u8BE6\u7EC6\u8D44\u6599"},{default:t(()=>[i(e.ReceivableDetailsInfo,{receivable:e.receivable},null,8,["receivable"])]),_:1}),i(l,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:t(()=>[i(b,{"log-list":e.logList},null,8,["log-list"])]),_:1}),i(l,{label:"\u56E2\u961F\u6210\u5458"},{default:t(()=>[i(e.PermissionList,{ref:"permissionListRef","biz-id":e.receivable.id,"biz-type":e.BizTypeEnum.CRM_RECEIVABLE,"show-action":!0,onQuitTeam:e.close},null,8,["biz-id","biz-type"])]),_:1})]),_:1})]),_:1}),i(e.ReceivableForm,{ref:"formRef",onSuccess:r[1]||(r[1]=o=>e.getReceivable(e.receivable.id))},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/receivable/detail/index.vue"]]);export{Y as default};
