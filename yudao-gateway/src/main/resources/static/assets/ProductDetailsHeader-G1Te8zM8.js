import{_ as C}from"./ContentWrap-DKQn7kZm.js";import{d as w,D as F,u as T,r as S,_ as j,X as D,o as m,c as q,j as l,k as s,w as r,t as y,I as h,q as v,m as o,ah as b,F as E,E as I,v as K,N as U}from"./index-BaY5TDP-.js";import{E as z,a as H}from"./el-descriptions-item-CRF_CO88.js";import M from"./ProductForm-Bm2tQo_i.js";import{P as k}from"./index-DK5ShDMH.js";import"./Dialog-CZSXtzfQ.js";const O={class:"flex items-start justify-between"},R={class:"text-xl font-bold"},N=j(w({__name:"ProductDetailsHeader",props:{product:{type:Object,required:!0}},emits:["refresh"],setup(g,{expose:e,emit:u}){e();const a=F(),{push:f}=T(),n=u,c=S(),p={message:a,copyToClipboard:t=>{navigator.clipboard.writeText(t).then(()=>{a.success("\u590D\u5236\u6210\u529F")})},push:f,goToManagement:t=>{f({name:"IoTDevice",query:{productId:t}})},emit:n,formRef:c,openForm:(t,d)=>{c.value.open(t,d)},confirmPublish:async t=>{try{await k.updateProductStatus(t,1),a.success("\u53D1\u5E03\u6210\u529F"),c.value.close(),n("refresh")}catch{a.error("\u53D1\u5E03\u5931\u8D25")}},confirmUnpublish:async t=>{try{await k.updateProductStatus(t,0),a.success("\u64A4\u9500\u53D1\u5E03\u6210\u529F"),c.value.close(),n("refresh")}catch{a.error("\u64A4\u9500\u53D1\u5E03\u5931\u8D25")}},ProductForm:M};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(g,e,u,a,f,n){const c=I,p=K,t=U,d=z,P=H,x=C,_=D("hasPermi");return m(),q(E,null,[l("div",null,[l("div",O,[l("div",null,[s(p,null,{default:r(()=>[s(c,null,{default:r(()=>[l("span",R,y(u.product.name),1)]),_:1})]),_:1})]),l("div",null,[u.product.status===0?h((m(),v(t,{key:0,onClick:e[0]||(e[0]=i=>a.openForm("update",u.product.id))},{default:r(()=>e[6]||(e[6]=[o(" \u7F16\u8F91 ")])),_:1})),[[_,["iot:product:update"]]]):b("",!0),u.product.status===0?h((m(),v(t,{key:1,type:"primary",onClick:e[1]||(e[1]=i=>a.confirmPublish(u.product.id))},{default:r(()=>e[7]||(e[7]=[o(" \u53D1\u5E03 ")])),_:1})),[[_,["iot:product:update"]]]):b("",!0),u.product.status===1?h((m(),v(t,{key:2,type:"danger",onClick:e[2]||(e[2]=i=>a.confirmUnpublish(u.product.id))},{default:r(()=>e[8]||(e[8]=[o(" \u64A4\u9500\u53D1\u5E03 ")])),_:1})),[[_,["iot:product:update"]]]):b("",!0)])])]),s(x,{class:"mt-10px"},{default:r(()=>[s(P,{column:5,direction:"horizontal"},{default:r(()=>[s(d,{label:"ProductKey"},{default:r(()=>[o(y(u.product.productKey)+" ",1),s(t,{onClick:e[3]||(e[3]=i=>a.copyToClipboard(u.product.productKey))},{default:r(()=>e[9]||(e[9]=[o("\u590D\u5236")])),_:1})]),_:1})]),_:1}),s(P,{column:5,direction:"horizontal"},{default:r(()=>[s(d,{label:"\u8BBE\u5907\u6570"},{default:r(()=>[o(y(u.product.deviceCount)+" ",1),s(t,{onClick:e[4]||(e[4]=i=>a.goToManagement(u.product.id))},{default:r(()=>e[10]||(e[10]=[o("\u524D\u5F80\u7BA1\u7406")])),_:1})]),_:1})]),_:1})]),_:1}),s(a.ProductForm,{ref:"formRef",onSuccess:e[5]||(e[5]=i=>a.emit("refresh"))},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/iot/product/detail/ProductDetailsHeader.vue"]]);export{N as default};
