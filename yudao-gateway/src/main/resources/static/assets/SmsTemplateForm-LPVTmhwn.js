import{d as L,g as C,D as P,r as i,f as q,G as w,aB as O,U as A,_ as F,o as m,q as f,w as t,k as o,m as T,I as M,c as y,F as I,n as h,t as Y,J as N,K as R,L as x,Z as B,ak as j,al as G,O as H,N as J,R as K}from"./index-BaY5TDP-.js";import{_ as Z}from"./Dialog-CZSXtzfQ.js";import{g as $,c as z,u as Q}from"./index-_sd8Fi6u.js";import{b as W}from"./index-CGsMoCqV.js";import{C as U}from"./constants-CEEr2azc.js";const X=F(L({name:"SystemSmsTemplateForm",__name:"SmsTemplateForm",emits:["success"],setup(k,{expose:l,emit:S}){const{t:e}=C(),g=P(),v=i(!1),p=i(""),s=i(!1),r=i(""),u=i({id:void 0,type:void 0,status:U.ENABLE,code:"",name:"",content:"",remark:"",apiTemplateId:"",channelId:void 0}),D=q({type:[{required:!0,message:"\u77ED\u4FE1\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],code:[{required:!0,message:"\u6A21\u677F\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u6A21\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u6A21\u677F\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],apiTemplateId:[{required:!0,message:"\u77ED\u4FE1 API \u7684\u6A21\u677F\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],channelId:[{required:!0,message:"\u77ED\u4FE1\u6E20\u9053\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),n=i(),_=i([]),c=async(d,E)=>{if(v.value=!0,p.value=e("action."+d),r.value=d,V(),E){s.value=!0;try{u.value=await $(E)}finally{s.value=!1}}_.value=await W()};l({open:c});const b=S,V=()=>{var d;u.value={id:void 0,type:void 0,status:U.ENABLE,code:"",name:"",content:"",remark:"",apiTemplateId:"",channelId:void 0},(d=n.value)==null||d.resetFields()},a={t:e,message:g,dialogVisible:v,dialogTitle:p,formLoading:s,formType:r,formData:u,formRules:D,formRef:n,channelList:_,open:c,emit:b,submitForm:async()=>{if(n&&await n.value.validate()){s.value=!0;try{const d=u.value;r.value==="create"?(await z(d),g.success(e("common.createSuccess"))):(await Q(d),g.success(e("common.updateSuccess"))),v.value=!1,b("success")}finally{s.value=!1}}},resetForm:V,get DICT_TYPE(){return w},get getDictLabel(){return O},get getIntDictOptions(){return A}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),[["render",function(k,l,S,e,g,v){const p=N,s=R,r=x,u=B,D=j,n=G,_=H,c=J,b=Z,V=K;return m(),f(b,{modelValue:e.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=a=>e.dialogVisible=a),title:e.dialogTitle},{footer:t(()=>[o(c,{disabled:e.formLoading,type:"primary",onClick:e.submitForm},{default:t(()=>l[10]||(l[10]=[T("\u786E \u5B9A")])),_:1},8,["disabled"]),o(c,{onClick:l[8]||(l[8]=a=>e.dialogVisible=!1)},{default:t(()=>l[11]||(l[11]=[T("\u53D6 \u6D88")])),_:1})]),default:t(()=>[M((m(),f(_,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"140px"},{default:t(()=>[o(r,{label:"\u77ED\u4FE1\u6E20\u9053\u7F16\u53F7",prop:"channelId"},{default:t(()=>[o(s,{modelValue:e.formData.channelId,"onUpdate:modelValue":l[0]||(l[0]=a=>e.formData.channelId=a),placeholder:"\u8BF7\u9009\u62E9\u77ED\u4FE1\u6E20\u9053\u7F16\u53F7"},{default:t(()=>[(m(!0),y(I,null,h(e.channelList,a=>(m(),f(p,{key:a.id,label:a.signature+`\u3010 ${e.getDictLabel(e.DICT_TYPE.SYSTEM_SMS_CHANNEL_CODE,a.code)}\u3011`,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u77ED\u4FE1\u7C7B\u578B",prop:"type"},{default:t(()=>[o(s,{modelValue:e.formData.type,"onUpdate:modelValue":l[1]||(l[1]=a=>e.formData.type=a),placeholder:"\u8BF7\u9009\u62E9\u77ED\u4FE1\u7C7B\u578B"},{default:t(()=>[(m(!0),y(I,null,h(e.getIntDictOptions(e.DICT_TYPE.SYSTEM_SMS_TEMPLATE_TYPE),a=>(m(),f(p,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u6A21\u677F\u7F16\u53F7",prop:"code"},{default:t(()=>[o(u,{modelValue:e.formData.code,"onUpdate:modelValue":l[2]||(l[2]=a=>e.formData.code=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u6A21\u677F\u540D\u79F0",prop:"name"},{default:t(()=>[o(u,{modelValue:e.formData.name,"onUpdate:modelValue":l[3]||(l[3]=a=>e.formData.name=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u6A21\u677F\u5185\u5BB9",prop:"content"},{default:t(()=>[o(u,{modelValue:e.formData.content,"onUpdate:modelValue":l[4]||(l[4]=a=>e.formData.content=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u5185\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:t(()=>[o(n,{modelValue:e.formData.status,"onUpdate:modelValue":l[5]||(l[5]=a=>e.formData.status=a)},{default:t(()=>[(m(!0),y(I,null,h(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),a=>(m(),f(D,{key:a.value,value:a.value},{default:t(()=>[T(Y(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"\u77ED\u4FE1 API \u6A21\u677F\u7F16\u53F7",prop:"apiTemplateId"},{default:t(()=>[o(u,{modelValue:e.formData.apiTemplateId,"onUpdate:modelValue":l[6]||(l[6]=a=>e.formData.apiTemplateId=a),placeholder:"\u8BF7\u8F93\u5165\u77ED\u4FE1 API \u7684\u6A21\u677F\u7F16\u53F7"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[o(u,{modelValue:e.formData.remark,"onUpdate:modelValue":l[7]||(l[7]=a=>e.formData.remark=a),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[V,e.formLoading]])]),_:1},8,["modelValue","title"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/system/sms/template/SmsTemplateForm.vue"]]);export{X as default};
