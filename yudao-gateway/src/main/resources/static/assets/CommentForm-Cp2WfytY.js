import{d as w,g as x,D as C,r,f as q,a as F,_ as N,o as c,c as D,k as l,w as s,m as U,I as R,q as I,j as T,ah as A,F as L,L as j,z as O,co as z,Z as E,ck as P,cp as Z,O as B,N as G,R as H}from"./index-BaY5TDP-.js";import{_ as J}from"./Dialog-CZSXtzfQ.js";import{E as K}from"./el-image-Bg-CwbDE.js";import{g as M,c as Q}from"./comment-6jOh5UFr.js";import W from"./SpuShowcase-DyUON5OE.js";import X from"./SkuTableSelect-CcEU9PPU.js";import"./spu-BVX48OKx.js";import"./SpuTableSelect-CD92PVLd.js";import"./ContentWrap-DKQn7kZm.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./el-tree-select-DphqCDCz.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";const Y={key:0},$={key:1,class:"select-box"},ee=N(w({__name:"CommentForm",emits:["success"],setup(y,{expose:a,emit:_}){const{t:e}=x(),V=C(),f=r(!1),t=r(""),i=r(!1),n=r(""),d=r({id:void 0,userId:void 0,userNickname:void 0,userAvatar:void 0,spuId:0,skuId:void 0,descriptionScores:5,benefitScores:5,content:void 0,picUrls:[]}),v=q({spuId:[{required:!0,message:"\u5546\u54C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],skuId:[{required:!0,message:"\u89C4\u683C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],userAvatar:[{required:!0,message:"\u7528\u6237\u5934\u50CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],userNickname:[{required:!0,message:"\u7528\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u8BC4\u8BBA\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],descriptionScores:[{required:!0,message:"\u63CF\u8FF0\u661F\u7EA7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],benefitScores:[{required:!0,message:"\u670D\u52A1\u661F\u7EA7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),m=r(),b=r({id:-1,name:"",picUrl:""}),g=async(u,h)=>{if(f.value=!0,t.value=e("action."+u),n.value=u,k(),h){i.value=!0;try{d.value=await M(h)}finally{i.value=!1}}};a({open:g});const p=_,k=()=>{var u;d.value={id:void 0,userId:void 0,userNickname:void 0,userAvatar:void 0,spuId:0,skuId:void 0,descriptionScores:5,benefitScores:5,content:void 0,picUrls:[]},(u=m.value)==null||u.resetFields()},S=r(),o={t:e,message:V,dialogVisible:f,dialogTitle:t,formLoading:i,formType:n,formData:d,formRules:v,formRef:m,skuData:b,open:g,emit:p,submitForm:async()=>{if(m&&await m.value.validate()){i.value=!0;try{n.value==="create"&&(await Q(F(d.value)),V.success(e("common.createSuccess"))),f.value=!1,p("success")}finally{i.value=!1}}},resetForm:k,skuTableSelectRef:S,handleSelectSku:()=>{S.value.open()},handleSkuChange:u=>{b.value=u,d.value.skuId=u.id},SpuShowcase:W,SkuTableSelect:X};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),[["render",function(y,a,_,e,V,f){const t=j,i=K,n=O,d=z,v=E,m=P,b=Z,g=B,p=G,k=J,S=H;return c(),D(L,null,[l(k,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[8]||(a[8]=o=>e.dialogVisible=o),title:"\u6DFB\u52A0\u865A\u62DF\u8BC4\u8BBA"},{footer:s(()=>[l(p,{disabled:e.formLoading,type:"primary",onClick:e.submitForm},{default:s(()=>a[9]||(a[9]=[U("\u786E \u5B9A")])),_:1},8,["disabled"]),l(p,{onClick:a[7]||(a[7]=o=>e.dialogVisible=!1)},{default:s(()=>a[10]||(a[10]=[U("\u53D6 \u6D88")])),_:1})]),default:s(()=>[R((c(),I(g,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px"},{default:s(()=>[l(t,{label:"\u5546\u54C1",prop:"spuId"},{default:s(()=>[l(e.SpuShowcase,{modelValue:e.formData.spuId,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.spuId=o),limit:1},null,8,["modelValue"])]),_:1}),e.formData.spuId?(c(),I(t,{key:0,label:"\u5546\u54C1\u89C4\u683C",prop:"skuId"},{default:s(()=>[T("div",{class:"h-60px w-60px",onClick:e.handleSelectSku},[e.skuData&&e.skuData.picUrl?(c(),D("div",Y,[l(i,{src:e.skuData.picUrl},null,8,["src"])])):(c(),D("div",$,[l(n,{icon:"ep:plus"})]))])]),_:1})):A("",!0),l(t,{label:"\u7528\u6237\u5934\u50CF",prop:"userAvatar"},{default:s(()=>[l(d,{modelValue:e.formData.userAvatar,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.userAvatar=o),height:"60px",width:"60px"},null,8,["modelValue"])]),_:1}),l(t,{label:"\u7528\u6237\u540D\u79F0",prop:"userNickname"},{default:s(()=>[l(v,{modelValue:e.formData.userNickname,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.userNickname=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(t,{label:"\u8BC4\u8BBA\u5185\u5BB9",prop:"content"},{default:s(()=>[l(v,{modelValue:e.formData.content,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.content=o),type:"textarea"},null,8,["modelValue"])]),_:1}),l(t,{label:"\u63CF\u8FF0\u661F\u7EA7",prop:"descriptionScores"},{default:s(()=>[l(m,{modelValue:e.formData.descriptionScores,"onUpdate:modelValue":a[4]||(a[4]=o=>e.formData.descriptionScores=o)},null,8,["modelValue"])]),_:1}),l(t,{label:"\u670D\u52A1\u661F\u7EA7",prop:"benefitScores"},{default:s(()=>[l(m,{modelValue:e.formData.benefitScores,"onUpdate:modelValue":a[5]||(a[5]=o=>e.formData.benefitScores=o)},null,8,["modelValue"])]),_:1}),l(t,{label:"\u8BC4\u8BBA\u56FE\u7247",prop:"picUrls"},{default:s(()=>[l(b,{modelValue:e.formData.picUrls,"onUpdate:modelValue":a[6]||(a[6]=o=>e.formData.picUrls=o),limit:9,height:"60px",width:"60px"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[S,e.formLoading]])]),_:1},8,["modelValue"]),l(e.SkuTableSelect,{ref:"skuTableSelectRef","spu-id":e.formData.spuId,onChange:e.handleSkuChange},null,8,["spu-id"])],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/product/comment/CommentForm.vue"]]);export{ee as default};
