import{d as N,D as I,g as L,r as c,f as O,u as V,ba as E,C as Q,G as Y,U as z,e2 as M,_ as A,X as K,o as i,c as k,k as a,w as o,Y as j,F,n as G,q as f,m as p,I as h,t as J,Z as W,L as X,J as Z,K as B,z as H,N as $,O as ee,y as ae,P as te,Q as le,R as re}from"./index-BaY5TDP-.js";import{_ as oe}from"./index-avjYFQiD.js";import{_ as ne}from"./DictTag-QtcI9ZjC.js";import{_ as ie}from"./ContentWrap-DKQn7kZm.js";import{_ as se}from"./index-BAz6Gqim.js";import{d as ue}from"./formatTime-Dr6TiYYc.js";import{d as pe}from"./download-oWiM5xVU.js";import{b as me,d as de,e as ce}from"./index-D4G-Yxr7.js";import fe from"./ProductForm-DmNzN2UP.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./index-kC15peaN.js";import"./tree-z7HkrWVC.js";import"./index-CuAlllbQ.js";const ge=A(N({name:"CrmProduct",__name:"index",setup(q,{expose:t}){t();const g=I(),{t:e}=L(),w=c(!0),x=c(0),b=c([]),m=O({pageNo:1,pageSize:10,name:void 0,status:void 0}),d=c(),y=c(!1),s=async()=>{w.value=!0;try{const l=await me(m);b.value=l.list,x.value=l.total}finally{w.value=!1}},u=()=>{m.pageNo=1,s()},n=c(),{currentRoute:T,push:_}=V();E(()=>{s()}),Q(()=>{s()});const C={message:g,t:e,loading:w,total:x,list:b,queryParams:m,queryFormRef:d,exportLoading:y,getList:s,handleQuery:u,resetQuery:()=>{d.value.resetFields(),u()},formRef:n,openForm:(l,P)=>{n.value.open(l,P)},currentRoute:T,push:_,openDetail:l=>{_({name:"CrmProductDetail",params:{id:l}})},handleDelete:async l=>{try{await g.delConfirm(),await de(l),g.success(e("common.delSuccess")),await s()}catch{}},handleExport:async()=>{try{await g.exportConfirm(),y.value=!0;const l=await ce(m);pe.excel(l,"\u4EA7\u54C1.xls")}catch{}finally{y.value=!1}},get DICT_TYPE(){return Y},get getIntDictOptions(){return z},get dateFormatter(){return ue},ProductForm:fe,get erpPriceTableColumnFormatter(){return M}};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}}),[["render",function(q,t,g,e,w,x){const b=se,m=W,d=X,y=Z,s=B,u=H,n=$,T=ee,_=ie,C=ae,l=te,P=ne,R=le,U=oe,v=K("hasPermi"),S=re;return i(),k(F,null,[a(b,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u7BA1\u7406\u3001\u4EA7\u54C1\u5206\u7C7B",url:"https://doc.iocoder.cn/crm/product/"}),a(_,null,{default:o(()=>[a(T,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:o(()=>[a(d,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"name"},{default:o(()=>[a(m,{modelValue:e.queryParams.name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.queryParams.name=r),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0",clearable:"",onKeyup:j(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(d,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[a(s,{modelValue:e.queryParams.status,"onUpdate:modelValue":t[1]||(t[1]=r=>e.queryParams.status=r),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",clearable:"",class:"!w-240px"},{default:o(()=>[(i(!0),k(F,null,G(e.getIntDictOptions(e.DICT_TYPE.CRM_PRODUCT_STATUS),r=>(i(),f(y,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(d,null,{default:o(()=>[a(n,{onClick:e.handleQuery},{default:o(()=>[a(u,{icon:"ep:search",class:"mr-5px"}),t[5]||(t[5]=p(" \u641C\u7D22 "))]),_:1}),a(n,{onClick:e.resetQuery},{default:o(()=>[a(u,{icon:"ep:refresh",class:"mr-5px"}),t[6]||(t[6]=p(" \u91CD\u7F6E "))]),_:1}),h((i(),f(n,{type:"primary",onClick:t[2]||(t[2]=r=>e.openForm("create"))},{default:o(()=>[a(u,{icon:"ep:plus",class:"mr-5px"}),t[7]||(t[7]=p(" \u65B0\u589E "))]),_:1})),[[v,["crm:product:create"]]]),h((i(),f(n,{type:"success",plain:"",onClick:e.handleExport,loading:e.exportLoading},{default:o(()=>[a(u,{icon:"ep:download",class:"mr-5px"}),t[8]||(t[8]=p(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[v,["crm:product:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(_,null,{default:o(()=>[h((i(),f(R,{data:e.list,stripe:!0,"show-overflow-tooltip":!0},{default:o(()=>[a(l,{label:"\u4EA7\u54C1\u540D\u79F0",align:"center",prop:"name",width:"160"},{default:o(r=>[a(C,{underline:!1,type:"primary",onClick:D=>e.openDetail(r.row.id)},{default:o(()=>[p(J(r.row.name),1)]),_:2},1032,["onClick"])]),_:1}),a(l,{label:"\u4EA7\u54C1\u7C7B\u578B",align:"center",prop:"categoryName",width:"160"}),a(l,{label:"\u4EA7\u54C1\u5355\u4F4D",align:"center",prop:"unit"},{default:o(r=>[a(P,{type:e.DICT_TYPE.CRM_PRODUCT_UNIT,value:r.row.unit},null,8,["type","value"])]),_:1}),a(l,{label:"\u4EA7\u54C1\u7F16\u7801",align:"center",prop:"no"}),a(l,{label:"\u4EF7\u683C\uFF08\u5143\uFF09",align:"center",prop:"price",formatter:e.erpPriceTableColumnFormatter,width:"100"},null,8,["formatter"]),a(l,{label:"\u4EA7\u54C1\u63CF\u8FF0",align:"center",prop:"description",width:"150"}),a(l,{label:"\u4E0A\u67B6\u72B6\u6001",align:"center",prop:"status",width:"120"},{default:o(r=>[a(P,{type:e.DICT_TYPE.CRM_PRODUCT_STATUS,value:r.row.status},null,8,["type","value"])]),_:1}),a(l,{label:"\u8D1F\u8D23\u4EBA",align:"center",prop:"ownerUserName",width:"120"}),a(l,{label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"updateTime",formatter:e.dateFormatter,width:"180px"},null,8,["formatter"]),a(l,{label:"\u521B\u5EFA\u4EBA",align:"center",prop:"creatorName",width:"120"}),a(l,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e.dateFormatter,width:"180px"},null,8,["formatter"]),a(l,{label:"\u64CD\u4F5C",align:"center",fixed:"right",width:"160"},{default:o(r=>[h((i(),f(n,{link:"",type:"primary",onClick:D=>e.openForm("update",r.row.id)},{default:o(()=>t[9]||(t[9]=[p(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[v,["crm:product:update"]]]),h((i(),f(n,{link:"",type:"danger",onClick:D=>e.handleDelete(r.row.id)},{default:o(()=>t[10]||(t[10]=[p(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[v,["crm:product:delete"]]])]),_:1})]),_:1},8,["data"])),[[S,e.loading]]),a(U,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":t[3]||(t[3]=r=>e.queryParams.pageNo=r),limit:e.queryParams.pageSize,"onUpdate:limit":t[4]||(t[4]=r=>e.queryParams.pageSize=r),onPagination:e.getList},null,8,["total","page","limit"])]),_:1}),a(e.ProductForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/product/index.vue"]]);export{ge as default};
