import{d as E,D as I,g as L,r as c,f as N,C as Q,G as V,U as R,_ as z,X as M,o as n,c as U,k as t,w as o,Y,F as q,n as A,q as f,m as y,I as P,Z as K,L as j,J as G,K as J,z as X,N as Z,O as B,P as H,Q as W,R as $}from"./index-BaY5TDP-.js";import{_ as ee}from"./index-avjYFQiD.js";import{_ as ae}from"./DictTag-QtcI9ZjC.js";import{_ as te}from"./ContentWrap-DKQn7kZm.js";import{_ as re}from"./index-BAz6Gqim.js";import{d as oe}from"./formatTime-Dr6TiYYc.js";import{d as le}from"./download-oWiM5xVU.js";import{P as C}from"./index-CRTwLgwp.js";import se from"./ProductUnitForm-BkvkiqiO.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./constants-CEEr2azc.js";const ne=z(E({name:"ErpProductUnit",__name:"index",setup(k,{expose:a}){a();const g=I(),{t:e}=L(),v=c(!0),b=c([]),x=c(0),i=N({pageNo:1,pageSize:10,name:void 0,status:void 0}),p=c(),_=c(!1),d=async()=>{v.value=!0;try{const l=await C.getProductUnitPage(i);b.value=l.list,x.value=l.total}finally{v.value=!1}},u=()=>{i.pageNo=1,d()},s=c();Q(()=>{d()});const h={message:g,t:e,loading:v,list:b,total:x,queryParams:i,queryFormRef:p,exportLoading:_,getList:d,handleQuery:u,resetQuery:()=>{p.value.resetFields(),u()},formRef:s,openForm:(l,m)=>{s.value.open(l,m)},handleDelete:async l=>{try{await g.delConfirm(),await C.deleteProductUnit(l),g.success(e("common.delSuccess")),await d()}catch{}},handleExport:async()=>{try{await g.exportConfirm(),_.value=!0;const l=await C.exportProductUnit(i);le.excel(l,"\u4EA7\u54C1\u5355\u4F4D.xls")}catch{}finally{_.value=!1}},get dateFormatter(){return oe},ProductUnitForm:se,get DICT_TYPE(){return V},get getIntDictOptions(){return R}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),[["render",function(k,a,g,e,v,b){const x=re,i=K,p=j,_=G,d=J,u=X,s=Z,h=B,l=te,m=H,F=ae,S=W,T=ee,w=M("hasPermi"),O=$;return n(),U(q,null,[t(x,{title:"\u3010\u4EA7\u54C1\u3011\u4EA7\u54C1\u4FE1\u606F\u3001\u5206\u7C7B\u3001\u5355\u4F4D",url:"https://doc.iocoder.cn/erp/product/"}),t(l,null,{default:o(()=>[t(h,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:o(()=>[t(p,{label:"\u5355\u4F4D\u540D\u5B57",prop:"name"},{default:o(()=>[t(i,{modelValue:e.queryParams.name,"onUpdate:modelValue":a[0]||(a[0]=r=>e.queryParams.name=r),placeholder:"\u8BF7\u8F93\u5165\u5355\u4F4D\u540D\u5B57",clearable:"",onKeyup:Y(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5355\u4F4D\u72B6\u6001",prop:"status"},{default:o(()=>[t(d,{modelValue:e.queryParams.status,"onUpdate:modelValue":a[1]||(a[1]=r=>e.queryParams.status=r),placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D\u72B6\u6001",clearable:"",class:"!w-240px"},{default:o(()=>[(n(!0),U(q,null,A(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),r=>(n(),f(_,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:o(()=>[t(s,{onClick:e.handleQuery},{default:o(()=>[t(u,{icon:"ep:search",class:"mr-5px"}),a[5]||(a[5]=y(" \u641C\u7D22"))]),_:1}),t(s,{onClick:e.resetQuery},{default:o(()=>[t(u,{icon:"ep:refresh",class:"mr-5px"}),a[6]||(a[6]=y(" \u91CD\u7F6E"))]),_:1}),P((n(),f(s,{type:"primary",plain:"",onClick:a[2]||(a[2]=r=>e.openForm("create"))},{default:o(()=>[t(u,{icon:"ep:plus",class:"mr-5px"}),a[7]||(a[7]=y(" \u65B0\u589E "))]),_:1})),[[w,["erp:product-unit:create"]]]),P((n(),f(s,{type:"success",plain:"",onClick:e.handleExport,loading:e.exportLoading},{default:o(()=>[t(u,{icon:"ep:download",class:"mr-5px"}),a[8]||(a[8]=y(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[w,["erp:product-unit:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(l,null,{default:o(()=>[P((n(),f(S,{data:e.list,stripe:!0,"show-overflow-tooltip":!0},{default:o(()=>[t(m,{label:"\u540D\u5B57",align:"center",prop:"name"}),t(m,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:o(r=>[t(F,{type:e.DICT_TYPE.COMMON_STATUS,value:r.row.status},null,8,["type","value"])]),_:1}),t(m,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e.dateFormatter,width:"180px"},null,8,["formatter"]),t(m,{label:"\u64CD\u4F5C",align:"center"},{default:o(r=>[P((n(),f(s,{link:"",type:"primary",onClick:D=>e.openForm("update",r.row.id)},{default:o(()=>a[9]||(a[9]=[y(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[w,["erp:product-unit:update"]]]),P((n(),f(s,{link:"",type:"danger",onClick:D=>e.handleDelete(r.row.id)},{default:o(()=>a[10]||(a[10]=[y(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[w,["erp:product-unit:delete"]]])]),_:1})]),_:1},8,["data"])),[[O,e.loading]]),t(T,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":a[3]||(a[3]=r=>e.queryParams.pageNo=r),limit:e.queryParams.pageSize,"onUpdate:limit":a[4]||(a[4]=r=>e.queryParams.pageSize=r),onPagination:e.getList},null,8,["total","page","limit"])]),_:1}),t(e.ProductUnitForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/product/unit/index.vue"]]);export{ne as default};
