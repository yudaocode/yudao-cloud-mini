import{d as _,b2 as g,p as b,b as V,r as h,au as w,aD as y,_ as P,o as u,c as d,j as m,F as A,n as k,k as s,w as S,I as x,ag as T,q as C,ah as R,z as j,aK as L}from"./index-BaY5TDP-.js";import{E as I}from"./el-image-Bg-CwbDE.js";import U from"./PointTableSelect-DUQ1_b53.js";import{P as q}from"./index-PmeLzyKc.js";import"./Dialog-CZSXtzfQ.js";import"./ContentWrap-DKQn7kZm.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./DictTag-QtcI9ZjC.js";import"./color-BN7ZL7BD.js";import"./formatter-DdccBgw4.js";import"./formatTime-Dr6TiYYc.js";const E=_({name:"PointShowcase",__name:"PointShowcase",props:{modelValue:g([Number,Array]).isRequired,limit:b.number.def(Number.MAX_VALUE),disabled:b.bool.def(!1)},emits:["update:modelValue","change"],setup(p,{expose:r,emit:n}){r();const l=p,v=V(()=>!l.disabled&&(!l.limit||t.value.length<l.limit)),t=h([]);w(()=>l.modelValue,async()=>{const e=y(l.modelValue)?l.modelValue:l.modelValue?[l.modelValue]:[];e.length!==0?(t.value.length===0||t.value.some(f=>!e.includes(f.id)))&&(t.value=await q.getPointActivityListByIds(e)):t.value=[]},{immediate:!0});const c=h(),i=n,a=()=>{if(l.limit===1){const e=t.value.length>0?t.value[0]:null;i("update:modelValue",(e==null?void 0:e.id)||0),i("change",e)}else i("update:modelValue",t.value.map(e=>e.id)),i("change",t.value)},o={props:l,canAdd:v,pointActivityList:t,pointActivityTableSelectRef:c,openSeckillActivityTableSelect:()=>{c.value.open(t.value)},handleActivitySelected:e=>{t.value=y(e)?e:[e],a()},handleRemoveActivity:e=>{t.value.splice(e,1),a()},emit:i,emitActivityChange:a,PointTableSelect:U};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),N={class:"flex flex-wrap items-center gap-8px"},z={class:"relative h-full w-full"},B=P(E,[["render",function(p,r,n,l,v,t){const c=I,i=j,a=L;return u(),d(A,null,[m("div",N,[(u(!0),d(A,null,k(l.pointActivityList,(o,e)=>(u(),d("div",{key:o.id,class:"select-box spu-pic"},[s(a,{content:o.name},{default:S(()=>[m("div",z,[s(c,{src:o.picUrl,class:"h-full w-full"},null,8,["src"]),x(s(i,{class:"del-icon",icon:"ep:circle-close-filled",onClick:f=>l.handleRemoveActivity(e)},null,8,["onClick"]),[[T,!n.disabled]])])]),_:2},1032,["content"])]))),128)),l.canAdd?(u(),C(a,{key:0,content:"\u9009\u62E9\u6D3B\u52A8"},{default:S(()=>[m("div",{class:"select-box",onClick:l.openSeckillActivityTableSelect},[s(i,{icon:"ep:plus"})])]),_:1})):R("",!0)]),s(l.PointTableSelect,{ref:"pointActivityTableSelectRef",multiple:n.limit!=1,onChange:l.handleActivitySelected},null,8,["multiple"])],64)}],["__scopeId","data-v-475ad6c6"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/point/components/PointShowcase.vue"]]);export{B as default};
