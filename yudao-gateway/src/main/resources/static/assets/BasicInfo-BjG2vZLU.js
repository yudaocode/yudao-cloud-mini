import{_ as w}from"./index-uy0_B-js.js";import{d as L,dU as M,r as D,dV as O,au as E,G as B,H as P,U as z,_ as A,o,c as p,k as l,w as r,j as C,F as y,n as h,q as g,m as c,t as U,ah as F,Z as N,z as Y,aK as j,L as G,J as K,K as H,co as J,ak as Z,al as Q,N as W,O as X}from"./index-BaY5TDP-.js";import{E as $}from"./el-avatar-DZsRbb7z.js";import"./Dialog-CZSXtzfQ.js";import"./ContentWrap-DKQn7kZm.js";import"./tree-z7HkrWVC.js";import"./index-dK17nfjs.js";import"./index-CuAlllbQ.js";const ee={class:"flex items-center"},ae={key:0,class:"mt-2 flex flex-wrap gap-2"},le={class:"flex flex-wrap gap-2"},se=A(L({__name:"BasicInfo",props:M({categoryList:{type:Array,required:!0},userList:{type:Array,required:!0}},{modelValue:{type:null},modelModifiers:{}}),emits:["update:modelValue"],setup(I,{expose:s}){const _=I,a=D(),x=D([]),k=D([]),v=D(),n=D("start"),d=O(I,"modelValue");E(()=>d.value,t=>{var i,m;(i=t.startUserIds)!=null&&i.length?x.value=_.userList.filter(b=>t.startUserIds.includes(b.id)):x.value=[],(m=t.managerUserIds)!=null&&m.length?k.value=_.userList.filter(b=>t.managerUserIds.includes(b.id)):k.value=[]},{immediate:!0});const u=async()=>{var t;await((t=a.value)==null?void 0:t.validate())};s({validate:u});const f={props:_,formRef:a,selectedStartUsers:x,selectedManagerUsers:k,userSelectFormRef:v,currentSelectType:n,rules:{name:[{required:!0,message:"\u6D41\u7A0B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],key:[{required:!0,message:"\u6D41\u7A0B\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u6D41\u7A0B\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u662F\u5426\u53EF\u89C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],visible:[{required:!0,message:"\u662F\u5426\u53EF\u89C1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],managerUserIds:[{required:!0,message:"\u6D41\u7A0B\u7BA1\u7406\u5458\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},modelData:d,openStartUserSelect:()=>{n.value="start",v.value.open(0,x.value)},openManagerUserSelect:()=>{n.value="manager",v.value.open(0,k.value)},handleUserSelectConfirm:(t,i)=>{n.value==="start"?d.value={...d.value,startUserIds:i.map(m=>m.id)}:d.value={...d.value,managerUserIds:i.map(m=>m.id)}},handleStartUserTypeChange:t=>{t!==1&&(d.value={...d.value,startUserIds:[]})},handleRemoveStartUser:t=>{d.value={...d.value,startUserIds:d.value.startUserIds.filter(i=>i!==t.id)}},handleRemoveManagerUser:t=>{d.value={...d.value,managerUserIds:d.value.managerUserIds.filter(i=>i!==t.id)}},validate:u,get DICT_TYPE(){return B},get getBoolDictOptions(){return P},get getIntDictOptions(){return z}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),[["render",function(I,s,_,a,x,k){const v=N,n=Y,d=j,u=G,f=K,t=H,i=J,m=Z,b=Q,V=$,S=W,T=X,q=w;return o(),p(y,null,[l(T,{ref:"formRef",model:a.modelData,rules:a.rules,"label-width":"120px",class:"mt-20px"},{default:r(()=>[l(u,{label:"\u6D41\u7A0B\u6807\u8BC6",prop:"key",class:"mb-20px"},{default:r(()=>[C("div",ee,[l(v,{class:"!w-440px",modelValue:a.modelData.key,"onUpdate:modelValue":s[0]||(s[0]=e=>a.modelData.key=e),disabled:!!a.modelData.id,placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u6807\u8BC6\uFF0C\u4EE5\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\u5F00\u5934"},null,8,["modelValue","disabled"]),l(d,{class:"item",content:a.modelData.id?"\u6D41\u7A0B\u6807\u8BC6\u4E0D\u53EF\u4FEE\u6539\uFF01":"\u65B0\u5EFA\u540E\uFF0C\u6D41\u7A0B\u6807\u8BC6\u4E0D\u53EF\u4FEE\u6539\uFF01",effect:"light",placement:"top"},{default:r(()=>[l(n,{icon:"ep:question-filled",class:"ml-5px"})]),_:1},8,["content"])])]),_:1}),l(u,{label:"\u6D41\u7A0B\u540D\u79F0",prop:"name",class:"mb-20px"},{default:r(()=>[l(v,{modelValue:a.modelData.name,"onUpdate:modelValue":s[1]||(s[1]=e=>a.modelData.name=e),disabled:!!a.modelData.id,clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0"},null,8,["modelValue","disabled"])]),_:1}),l(u,{label:"\u6D41\u7A0B\u5206\u7C7B",prop:"category",class:"mb-20px"},{default:r(()=>[l(t,{class:"!w-full",modelValue:a.modelData.category,"onUpdate:modelValue":s[2]||(s[2]=e=>a.modelData.category=e),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B"},{default:r(()=>[(o(!0),p(y,null,h(_.categoryList,e=>(o(),g(f,{key:e.code,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u6D41\u7A0B\u56FE\u6807",class:"mb-20px"},{default:r(()=>[l(i,{modelValue:a.modelData.icon,"onUpdate:modelValue":s[3]||(s[3]=e=>a.modelData.icon=e),limit:1,height:"64px",width:"64px"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u6D41\u7A0B\u63CF\u8FF0",prop:"description",class:"mb-20px"},{default:r(()=>[l(v,{modelValue:a.modelData.description,"onUpdate:modelValue":s[4]||(s[4]=e=>a.modelData.description=e),clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u6D41\u7A0B\u7C7B\u578B",prop:"type",class:"mb-20px"},{default:r(()=>[l(b,{modelValue:a.modelData.type,"onUpdate:modelValue":s[5]||(s[5]=e=>a.modelData.type=e)},{default:r(()=>[(o(!0),p(y,null,h(a.getIntDictOptions(a.DICT_TYPE.BPM_MODEL_TYPE),e=>(o(),g(m,{key:e.value,value:e.value},{default:r(()=>[c(U(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u662F\u5426\u53EF\u89C1",prop:"visible",class:"mb-20px"},{default:r(()=>[l(b,{modelValue:a.modelData.visible,"onUpdate:modelValue":s[6]||(s[6]=e=>a.modelData.visible=e)},{default:r(()=>[(o(!0),p(y,null,h(a.getBoolDictOptions(a.DICT_TYPE.INFRA_BOOLEAN_STRING),e=>(o(),g(m,{key:e.value,value:e.value},{default:r(()=>[c(U(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u8C01\u53EF\u4EE5\u53D1\u8D77",prop:"startUserType",class:"mb-20px"},{default:r(()=>[l(t,{modelValue:a.modelData.startUserType,"onUpdate:modelValue":s[7]||(s[7]=e=>a.modelData.startUserType=e),placeholder:"\u8BF7\u9009\u62E9\u8C01\u53EF\u4EE5\u53D1\u8D77",onChange:a.handleStartUserTypeChange},{default:r(()=>[l(f,{label:"\u5168\u5458",value:0}),l(f,{label:"\u6307\u5B9A\u4EBA\u5458",value:1})]),_:1},8,["modelValue"]),a.modelData.startUserType===1?(o(),p("div",ae,[(o(!0),p(y,null,h(a.selectedStartUsers,e=>(o(),p("div",{key:e.id,class:"bg-gray-100 h-35px rounded-3xl flex items-center pr-8px dark:color-gray-600 position-relative"},[e.avatar?(o(),g(V,{key:0,class:"!m-5px",size:28,src:e.avatar},null,8,["src"])):(o(),g(V,{key:1,class:"!m-5px",size:28},{default:r(()=>[c(U(e.nickname.substring(0,1)),1)]),_:2},1024)),c(" "+U(e.nickname)+" ",1),l(n,{icon:"ep:close",class:"ml-2 cursor-pointer hover:text-red-500",onClick:R=>a.handleRemoveStartUser(e)},null,8,["onClick"])]))),128)),l(S,{type:"primary",link:"",onClick:a.openStartUserSelect},{default:r(()=>[l(n,{icon:"ep:plus"}),s[8]||(s[8]=c(" \u9009\u62E9\u4EBA\u5458 "))]),_:1})])):F("",!0)]),_:1}),l(u,{label:"\u6D41\u7A0B\u7BA1\u7406\u5458",prop:"managerUserIds",class:"mb-20px"},{default:r(()=>[C("div",le,[(o(!0),p(y,null,h(a.selectedManagerUsers,e=>(o(),p("div",{key:e.id,class:"bg-gray-100 h-35px rounded-3xl flex items-center pr-8px dark:color-gray-600 position-relative"},[e.avatar?(o(),g(V,{key:0,class:"!m-5px",size:28,src:e.avatar},null,8,["src"])):(o(),g(V,{key:1,class:"!m-5px",size:28},{default:r(()=>[c(U(e.nickname.substring(0,1)),1)]),_:2},1024)),c(" "+U(e.nickname)+" ",1),l(n,{icon:"ep:close",class:"ml-2 cursor-pointer hover:text-red-500",onClick:R=>a.handleRemoveManagerUser(e)},null,8,["onClick"])]))),128)),l(S,{type:"primary",link:"",onClick:a.openManagerUserSelect},{default:r(()=>[l(n,{icon:"ep:plus"}),s[9]||(s[9]=c("\u9009\u62E9\u4EBA\u5458 "))]),_:1})])]),_:1})]),_:1},8,["model"]),l(q,{ref:"userSelectFormRef",onConfirm:a.handleUserSelectConfirm},null,512)],64)}],["__scopeId","data-v-9d047aac"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/bpm/model/form/BasicInfo.vue"]]);export{se as default};
