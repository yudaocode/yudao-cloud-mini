import{d as I,D as V,g as Y,r as d,f as M,C as B,G as E,U as R,aE as Q,_ as L,X as z,o as i,c as k,k as a,w as t,Y as A,F as D,n as H,q as c,m as f,I as P,Z as K,L as j,J as G,K as J,M as X,z as Z,N as W,O as $,P as ee,Q as ae,R as le}from"./index-BaY5TDP-.js";import{_ as re}from"./index-avjYFQiD.js";import{_ as te}from"./DictTag-QtcI9ZjC.js";import{E as oe}from"./el-image-Bg-CwbDE.js";import{_ as ne}from"./ContentWrap-DKQn7kZm.js";import{_ as se}from"./index-BAz6Gqim.js";import{d as ie}from"./formatTime-Dr6TiYYc.js";import{g as ue,B as pe,d as me}from"./BannerForm-JZk_IbUl.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";const de=L(I({name:"Banner",__name:"index",setup(O,{expose:l}){l();const _=V(),{t:e}=Y(),g=d(!0),v=d(0),y=d([]),m=M({pageNo:1,pageSize:10,title:null,status:null,createTime:[]}),s=d(),u=async()=>{g.value=!0;try{const o=await ue(m);y.value=o.list,v.value=o.total}finally{g.value=!1}},b=()=>{m.pageNo=1,u()},w=d();B(()=>{u()});const p={message:_,t:e,loading:g,total:v,list:y,queryParams:m,queryFormRef:s,imagePreview:o=>{Q({urlList:[o]})},getList:u,handleQuery:b,resetQuery:()=>{s.value.resetFields(),b()},formRef:w,openForm:(o,h)=>{w.value.open(o,h)},handleDelete:async o=>{try{await _.delConfirm(),await me(o),_.success(e("common.delSuccess")),await u()}catch{}},get DICT_TYPE(){return E},get getIntDictOptions(){return R},get dateFormatter(){return ie},BannerForm:pe};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(O,l,_,e,g,v){const y=se,m=K,s=j,u=G,b=J,w=X,p=Z,o=W,h=$,C=ne,n=ee,S=oe,q=te,U=ae,F=re,T=z("hasPermi"),N=le;return i(),k(D,null,[a(y,{title:"\u3010\u8425\u9500\u3011\u5185\u5BB9\u7BA1\u7406",url:"https://doc.iocoder.cn/mall/promotion-content/"}),a(C,null,{default:t(()=>[a(h,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"100px"},{default:t(()=>[a(s,{label:"Banner\u6807\u9898",prop:"title"},{default:t(()=>[a(m,{modelValue:e.queryParams.title,"onUpdate:modelValue":l[0]||(l[0]=r=>e.queryParams.title=r),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165Banner\u6807\u9898",onKeyup:A(e.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),a(s,{label:"\u6D3B\u52A8\u72B6\u6001",prop:"status"},{default:t(()=>[a(b,{modelValue:e.queryParams.status,"onUpdate:modelValue":l[1]||(l[1]=r=>e.queryParams.status=r),class:"!w-240px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(i(!0),k(D,null,H(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),r=>(i(),c(u,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[a(w,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":l[2]||(l[2]=r=>e.queryParams.createTime=r),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),a(s,null,{default:t(()=>[a(o,{onClick:e.handleQuery},{default:t(()=>[a(p,{class:"mr-5px",icon:"ep:search"}),l[6]||(l[6]=f(" \u641C\u7D22 "))]),_:1}),a(o,{onClick:e.resetQuery},{default:t(()=>[a(p,{class:"mr-5px",icon:"ep:refresh"}),l[7]||(l[7]=f(" \u91CD\u7F6E "))]),_:1}),P((i(),c(o,{plain:"",type:"primary",onClick:l[3]||(l[3]=r=>e.openForm("create"))},{default:t(()=>[a(p,{class:"mr-5px",icon:"ep:plus"}),l[8]||(l[8]=f(" \u65B0\u589E "))]),_:1})),[[T,["promotion:banner:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(C,null,{default:t(()=>[P((i(),c(U,{data:e.list,"show-overflow-tooltip":!0,stripe:!0},{default:t(()=>[a(n,{align:"center",label:"Banner\u6807\u9898",prop:"title"}),a(n,{align:"center",label:"\u56FE\u7247","min-width":"80",prop:"picUrl"},{default:t(({row:r})=>[a(S,{src:r.picUrl,class:"h-30px w-30px",onClick:x=>e.imagePreview(r.picUrl)},null,8,["src","onClick"])]),_:1}),a(n,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:t(r=>[a(q,{type:e.DICT_TYPE.COMMON_STATUS,value:r.row.status},null,8,["type","value"])]),_:1}),a(n,{align:"center",label:"\u5B9A\u4F4D",prop:"position"},{default:t(r=>[a(q,{type:e.DICT_TYPE.PROMOTION_BANNER_POSITION,value:r.row.position},null,8,["type","value"])]),_:1}),a(n,{align:"center",label:"\u8DF3\u8F6C\u5730\u5740",prop:"url"}),a(n,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(n,{align:"center",label:"\u6392\u5E8F",prop:"sort"}),a(n,{align:"center",label:"\u63CF\u8FF0",prop:"memo"}),a(n,{align:"center",label:"\u64CD\u4F5C"},{default:t(r=>[P((i(),c(o,{link:"",type:"primary",onClick:x=>e.openForm("update",r.row.id)},{default:t(()=>l[9]||(l[9]=[f(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[T,["promotion:banner:update"]]]),P((i(),c(o,{link:"",type:"danger",onClick:x=>e.handleDelete(r.row.id)},{default:t(()=>l[10]||(l[10]=[f(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[T,["promotion:banner:delete"]]])]),_:1})]),_:1},8,["data"])),[[N,e.loading]]),a(F,{limit:e.queryParams.pageSize,"onUpdate:limit":l[4]||(l[4]=r=>e.queryParams.pageSize=r),page:e.queryParams.pageNo,"onUpdate:page":l[5]||(l[5]=r=>e.queryParams.pageNo=r),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),a(e.BannerForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/banner/index.vue"]]);export{de as default};
