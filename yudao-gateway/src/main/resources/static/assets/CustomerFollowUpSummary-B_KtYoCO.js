import{d as g,r as y,f,C as h,_ as v,o as w,c as b,k as t,w as m,I as _,q as U,F as A,l as C,P as S,Q as F,R as I}from"./index-BaY5TDP-.js";import{E as P}from"./el-skeleton-item-BYAIkmCs.js";import{S as x}from"./customer-DKZgktXn.js";import{_ as q}from"./Echart-BQxFkezy.js";import"./echarts-DpbyC_6K.js";const D=v(g({name:"CustomerFollowupSummary",__name:"CustomerFollowUpSummary",props:{queryParams:{type:null,required:!0}},setup(u,{expose:c}){const l=u,e=y(!1),p=y([]),a=f({grid:{left:20,right:30,bottom:20,containLabel:!0},legend:{},series:[{name:"\u8DDF\u8FDB\u5BA2\u6237\u6570",type:"bar",yAxisIndex:0,data:[]},{name:"\u8DDF\u8FDB\u6B21\u6570",type:"bar",yAxisIndex:1,data:[]}],toolbox:{feature:{dataZoom:{xAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u5BA2\u6237\u8DDF\u8FDB\u6B21\u6570\u5206\u6790"}}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:[{type:"value",name:"\u8DDF\u8FDB\u5BA2\u6237\u6570",min:0,minInterval:1},{type:"value",name:"\u8DDF\u8FDB\u6B21\u6570",min:0,minInterval:1,splitLine:{lineStyle:{type:"dotted",opacity:.7}}}],xAxis:{type:"category",name:"\u65E5\u671F",axisTick:{alignWithLabel:!0},data:[]}}),n=async()=>{e.value=!0;const i=await x.getFollowUpSummaryByDate(l.queryParams),d=await x.getFollowUpSummaryByUser(l.queryParams);a.xAxis&&a.xAxis.data&&(a.xAxis.data=i.map(r=>r.time)),a.series&&a.series[0]&&a.series[0].data&&(a.series[0].data=i.map(r=>r.followUpCustomerCount)),a.series&&a.series[1]&&a.series[1].data&&(a.series[1].data=i.map(r=>r.followUpRecordCount)),p.value=d},o=async()=>{e.value=!0;try{await n()}finally{e.value=!1}};c({loadData:o}),h(()=>{o()});const s={props:l,loading:e,list:p,echartsOption:a,fetchAndFill:n,loadData:o,Echart:q};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),[["render",function(u,c,l,e,p,a){const n=P,o=C,s=S,i=F,d=I;return w(),b(A,null,[t(o,{shadow:"never"},{default:m(()=>[t(n,{loading:e.loading,animated:""},{default:m(()=>[t(e.Echart,{height:500,options:e.echartsOption},null,8,["options"])]),_:1},8,["loading"])]),_:1}),t(o,{shadow:"never",class:"mt-16px"},{default:m(()=>[_((w(),U(i,{data:e.list},{default:m(()=>[t(s,{label:"\u5E8F\u53F7",align:"center",type:"index",width:"80"}),t(s,{label:"\u5458\u5DE5\u59D3\u540D",align:"center",prop:"ownerUserName","min-width":"200"}),t(s,{label:"\u8DDF\u8FDB\u6B21\u6570",align:"right",prop:"followUpRecordCount","min-width":"200"}),t(s,{label:"\u8DDF\u8FDB\u5BA2\u6237\u6570",align:"right",prop:"followUpCustomerCount","min-width":"200"})]),_:1},8,["data"])),[[d,e.loading]])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/statistics/customer/components/CustomerFollowUpSummary.vue"]]);export{D as default};
