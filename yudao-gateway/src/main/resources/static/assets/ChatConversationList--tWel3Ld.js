import{d as Q,D as S,g as T,r as p,f as U,C as Y,_ as z,X as M,o as c,c as P,k as e,w as r,F as x,n as R,q as b,Y as j,m as v,I as q,j as H,t as K,J as O,K as A,L as B,Z as J,M as X,z as Z,N as E,O as G,P as W,Q as $,R as ee}from"./index-BaY5TDP-.js";import{_ as ae}from"./index-avjYFQiD.js";import{_ as le}from"./ContentWrap-DKQn7kZm.js";import{d as te}from"./formatTime-Dr6TiYYc.js";import{C as k}from"./index-C2SngFyG.js";import{g as re}from"./index-CuAlllbQ.js";import"./index-DrSdAlug.js";const se=z(Q({__name:"ChatConversationList",setup(V,{expose:l}){l();const f=S(),{t:a}=T(),g=p(!0),w=p([]),h=p(0),u=U({pageNo:1,pageSize:10,userId:void 0,title:void 0,createTime:[]}),i=p(),y=p([]),o=async()=>{g.value=!0;try{const d=await k.getChatConversationPage(u);w.value=d.list,h.value=d.total}finally{g.value=!1}},m=()=>{u.pageNo=1,o()};Y(async()=>{o(),y.value=await re()});const n={message:f,t:a,loading:g,list:w,total:h,queryParams:u,queryFormRef:i,userList:y,getList:o,handleQuery:m,resetQuery:()=>{i.value.resetFields(),m()},handleDelete:async d=>{try{await f.delConfirm(),await k.deleteChatConversationByAdmin(d),f.success(a("common.delSuccess")),await o()}catch{}},get dateFormatter(){return te}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),[["render",function(V,l,f,a,g,w){const h=O,u=A,i=B,y=J,o=X,m=Z,n=E,d=G,C=le,s=W,L=$,D=ae,F=M("hasPermi"),I=ee;return c(),P(x,null,[e(C,null,{default:r(()=>[e(d,{class:"-mb-15px",model:a.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:r(()=>[e(i,{label:"\u7528\u6237\u7F16\u53F7",prop:"userId"},{default:r(()=>[e(u,{modelValue:a.queryParams.userId,"onUpdate:modelValue":l[0]||(l[0]=t=>a.queryParams.userId=t),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7",class:"!w-240px"},{default:r(()=>[(c(!0),P(x,null,R(a.userList,t=>(c(),b(h,{key:t.id,label:t.nickname,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"\u804A\u5929\u7F16\u53F7",prop:"title"},{default:r(()=>[e(y,{modelValue:a.queryParams.title,"onUpdate:modelValue":l[1]||(l[1]=t=>a.queryParams.title=t),placeholder:"\u8BF7\u8F93\u5165\u804A\u5929\u7F16\u53F7",clearable:"",onKeyup:j(a.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[e(o,{modelValue:a.queryParams.createTime,"onUpdate:modelValue":l[2]||(l[2]=t=>a.queryParams.createTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(i,null,{default:r(()=>[e(n,{onClick:a.handleQuery},{default:r(()=>[e(m,{icon:"ep:search",class:"mr-5px"}),l[5]||(l[5]=v(" \u641C\u7D22"))]),_:1}),e(n,{onClick:a.resetQuery},{default:r(()=>[e(m,{icon:"ep:refresh",class:"mr-5px"}),l[6]||(l[6]=v(" \u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,null,{default:r(()=>[q((c(),b(L,{data:a.list,stripe:!0,"show-overflow-tooltip":!0},{default:r(()=>[e(s,{label:"\u5BF9\u8BDD\u7F16\u53F7",align:"center",prop:"id",width:"180",fixed:"left"}),e(s,{label:"\u5BF9\u8BDD\u6807\u9898",align:"center",prop:"title",width:"180",fixed:"left"}),e(s,{label:"\u7528\u6237",align:"center",prop:"userId",width:"180"},{default:r(t=>{var _;return[H("span",null,K((_=a.userList.find(N=>N.id===t.row.userId))==null?void 0:_.nickname),1)]}),_:1}),e(s,{label:"\u89D2\u8272",align:"center",prop:"roleName",width:"180"}),e(s,{label:"\u6A21\u578B\u6807\u8BC6",align:"center",prop:"model",width:"180"}),e(s,{label:"\u6D88\u606F\u6570",align:"center",prop:"messageCount"}),e(s,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:a.dateFormatter,width:"180px"},null,8,["formatter"]),e(s,{label:"\u6E29\u5EA6\u53C2\u6570",align:"center",prop:"temperature"}),e(s,{label:"\u56DE\u590D Token \u6570",align:"center",prop:"maxTokens",width:"120"}),e(s,{label:"\u4E0A\u4E0B\u6587\u6570\u91CF",align:"center",prop:"maxContexts",width:"120"}),e(s,{label:"\u64CD\u4F5C",align:"center",width:"180",fixed:"right"},{default:r(t=>[q((c(),b(n,{link:"",type:"danger",onClick:_=>a.handleDelete(t.row.id)},{default:r(()=>l[7]||(l[7]=[v(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[F,["ai:chat-conversation:delete"]]])]),_:1})]),_:1},8,["data"])),[[I,a.loading]]),e(D,{total:a.total,page:a.queryParams.pageNo,"onUpdate:page":l[3]||(l[3]=t=>a.queryParams.pageNo=t),limit:a.queryParams.pageSize,"onUpdate:limit":l[4]||(l[4]=t=>a.queryParams.pageSize=t),onPagination:a.getList},null,8,["total","page","limit"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/chat/manager/ChatConversationList.vue"]]);export{se as default};
