import{d as R,g as k,D as O,r as i,f as E,e as x,G as S,U as L,_ as F,o as m,q as c,w as t,k as a,m as C,I as M,c as g,F as w,n as I,Z as N,L as P,v as A,J as Y,K as Q,E as j,cg as G,M as J,O as K,N as Z,R as z}from"./index-BaY5TDP-.js";import{_ as B}from"./Dialog-CZSXtzfQ.js";import{a as H,c as W,b as X}from"./index-h6ObHKtQ.js";import{g as $}from"./index-Qzz5HSIB.js";import{d as ee}from"./tree-z7HkrWVC.js";import{g as le}from"./index-CuAlllbQ.js";const ae=F(R({__name:"CustomerForm",emits:["success"],setup(q,{expose:d,emit:y}){const{t:l}=k(),_=O(),V=i(!1),s=i(""),o=i(!1),u=i(""),n=i([]),p=i([]),r=i({id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0}),h=E({name:[{required:!0,message:"\u5BA2\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),f=i(),b=async(e,T)=>{if(V.value=!0,s.value=l("action."+e),u.value=e,D(),T){o.value=!0;try{r.value=await H(T)}finally{o.value=!1}}n.value=await $(),p.value=await le(),u.value==="create"&&(r.value.ownerUserId=x().getUser.id)};d({open:b});const v=y,D=()=>{var e;r.value={id:void 0,name:void 0,contactNextTime:void 0,ownerUserId:0,mobile:void 0,telephone:void 0,qq:void 0,wechat:void 0,email:void 0,areaId:void 0,detailAddress:void 0,industryId:void 0,level:void 0,source:void 0,remark:void 0},(e=f.value)==null||e.resetFields()},U={t:l,message:_,dialogVisible:V,dialogTitle:s,formLoading:o,formType:u,areaList:n,userOptions:p,formData:r,formRules:h,formRef:f,open:b,emit:v,submitForm:async()=>{if(f&&await f.value.validate()){o.value=!0;try{const e=r.value;u.value==="create"?(await W(e),_.success(l("common.createSuccess"))):(await X(e),_.success(l("common.updateSuccess"))),V.value=!1,v("success")}finally{o.value=!1}}},resetForm:D,get DICT_TYPE(){return S},get getIntDictOptions(){return L},get defaultProps(){return ee}};return Object.defineProperty(U,"__isScriptSetup",{enumerable:!1,value:!0}),U}}),[["render",function(q,d,y,l,_,V){const s=N,o=P,u=A,n=Y,p=Q,r=j,h=G,f=J,b=K,v=Z,D=B,U=z;return m(),c(D,{modelValue:l.dialogVisible,"onUpdate:modelValue":d[15]||(d[15]=e=>l.dialogVisible=e),title:l.dialogTitle},{footer:t(()=>[a(v,{disabled:l.formLoading,type:"primary",onClick:l.submitForm},{default:t(()=>d[16]||(d[16]=[C("\u786E \u5B9A")])),_:1},8,["disabled"]),a(v,{onClick:d[14]||(d[14]=e=>l.dialogVisible=!1)},{default:t(()=>d[17]||(d[17]=[C("\u53D6 \u6D88")])),_:1})]),default:t(()=>[M((m(),c(b,{ref:"formRef",model:l.formData,rules:l.formRules,"label-width":"100px"},{default:t(()=>[a(r,null,{default:t(()=>[a(u,{span:12},{default:t(()=>[a(o,{label:"\u5BA2\u6237\u540D\u79F0",prop:"name"},{default:t(()=>[a(s,{modelValue:l.formData.name,"onUpdate:modelValue":d[0]||(d[0]=e=>l.formData.name=e),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(o,{label:"\u5BA2\u6237\u6765\u6E90",prop:"source"},{default:t(()=>[a(p,{modelValue:l.formData.source,"onUpdate:modelValue":d[1]||(d[1]=e=>l.formData.source=e),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u6765\u6E90",class:"w-1/1"},{default:t(()=>[(m(!0),g(w,null,I(l.getIntDictOptions(l.DICT_TYPE.CRM_CUSTOMER_SOURCE),e=>(m(),c(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(r,null,{default:t(()=>[a(u,{span:12},{default:t(()=>[a(o,{label:"\u624B\u673A",prop:"mobile"},{default:t(()=>[a(s,{modelValue:l.formData.mobile,"onUpdate:modelValue":d[2]||(d[2]=e=>l.formData.mobile=e),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(o,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:t(()=>[a(p,{modelValue:l.formData.ownerUserId,"onUpdate:modelValue":d[3]||(d[3]=e=>l.formData.ownerUserId=e),disabled:l.formType!=="create",class:"w-1/1"},{default:t(()=>[(m(!0),g(w,null,I(l.userOptions,e=>(m(),c(n,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),a(r,null,{default:t(()=>[a(u,{span:12},{default:t(()=>[a(o,{label:"\u7535\u8BDD",prop:"telephone"},{default:t(()=>[a(s,{modelValue:l.formData.telephone,"onUpdate:modelValue":d[4]||(d[4]=e=>l.formData.telephone=e),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(o,{label:"\u90AE\u7BB1",prop:"email"},{default:t(()=>[a(s,{modelValue:l.formData.email,"onUpdate:modelValue":d[5]||(d[5]=e=>l.formData.email=e),placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(r,null,{default:t(()=>[a(u,{span:12},{default:t(()=>[a(o,{label:"\u5FAE\u4FE1",prop:"wechat"},{default:t(()=>[a(s,{modelValue:l.formData.wechat,"onUpdate:modelValue":d[6]||(d[6]=e=>l.formData.wechat=e),placeholder:"\u8BF7\u8F93\u5165\u5FAE\u4FE1"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(o,{label:"QQ",prop:"qq"},{default:t(()=>[a(s,{modelValue:l.formData.qq,"onUpdate:modelValue":d[7]||(d[7]=e=>l.formData.qq=e),placeholder:"\u8BF7\u8F93\u5165 QQ"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(r,null,{default:t(()=>[a(u,{span:12},{default:t(()=>[a(o,{label:"\u5BA2\u6237\u884C\u4E1A",prop:"industryId"},{default:t(()=>[a(p,{modelValue:l.formData.industryId,"onUpdate:modelValue":d[8]||(d[8]=e=>l.formData.industryId=e),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u884C\u4E1A",class:"w-1/1"},{default:t(()=>[(m(!0),g(w,null,I(l.getIntDictOptions(l.DICT_TYPE.CRM_CUSTOMER_INDUSTRY),e=>(m(),c(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(o,{label:"\u5BA2\u6237\u7EA7\u522B",prop:"level"},{default:t(()=>[a(p,{modelValue:l.formData.level,"onUpdate:modelValue":d[9]||(d[9]=e=>l.formData.level=e),placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237\u7EA7\u522B",class:"w-1/1"},{default:t(()=>[(m(!0),g(w,null,I(l.getIntDictOptions(l.DICT_TYPE.CRM_CUSTOMER_LEVEL),e=>(m(),c(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(r,null,{default:t(()=>[a(u,{span:12},{default:t(()=>[a(o,{label:"\u5730\u5740",prop:"areaId"},{default:t(()=>[a(h,{modelValue:l.formData.areaId,"onUpdate:modelValue":d[10]||(d[10]=e=>l.formData.areaId=e),options:l.areaList,props:l.defaultProps,class:"w-1/1",clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u57CE\u5E02"},null,8,["modelValue","options","props"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(o,{label:"\u8BE6\u7EC6\u5730\u5740",prop:"detailAddress"},{default:t(()=>[a(s,{modelValue:l.formData.detailAddress,"onUpdate:modelValue":d[11]||(d[11]=e=>l.formData.detailAddress=e),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(r,null,{default:t(()=>[a(u,{span:12},{default:t(()=>[a(o,{label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime"},{default:t(()=>[a(f,{modelValue:l.formData.contactNextTime,"onUpdate:modelValue":d[12]||(d[12]=e=>l.formData.contactNextTime=e),placeholder:"\u9009\u62E9\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",type:"datetime","value-format":"x",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:12},{default:t(()=>[a(o,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[a(s,{type:"textarea",modelValue:l.formData.remark,"onUpdate:modelValue":d[13]||(d[13]=e=>l.formData.remark=e),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[U,l.formLoading]])]),_:1},8,["modelValue","title"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/customer/CustomerForm.vue"]]);export{ae as default};
