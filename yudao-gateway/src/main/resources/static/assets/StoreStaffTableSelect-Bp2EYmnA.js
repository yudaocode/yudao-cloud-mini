import{d as D,r as s,f as O,G as A,U as Q,_ as Y,o as T,q as U,w as o,k as a,m as P,Y as N,c as E,F as M,n as F,I as z,v as K,Z as L,L as R,J as H,K as j,M as G,z as J,N as Z,O as B,ai as W,P as X,Q as $,E as ee,R as ae}from"./index-BaY5TDP-.js";import{_ as le}from"./Dialog-CZSXtzfQ.js";import{_ as te}from"./index-avjYFQiD.js";import{_ as oe}from"./DictTag-QtcI9ZjC.js";import{_ as re}from"./ContentWrap-DKQn7kZm.js";import{d as ue}from"./formatTime-Dr6TiYYc.js";import{a as ie}from"./index-CuAlllbQ.js";import de from"./DeptTree-BfFcmnO_.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./index-dK17nfjs.js";import"./tree-z7HkrWVC.js";const se=Y(D({__name:"StoreStaffTableSelect",emits:["change"],setup(x,{expose:t,emit:I}){const e=s(!1),_=s(!1),h=s([]),d=s({}),v=s(!1),n=s(!0),m=s(0),p=s([]),y=O({pageNo:1,pageSize:10,username:void 0,mobile:void 0,status:void 0,deptId:void 0,roleId:5,createTime:[]}),b=s(),c=async()=>{n.value=!0;try{const r=await ie(y);p.value=r.list,m.value=r.total}finally{n.value=!1}},f=()=>{y.pageNo=1,c()},k=async()=>{v.value=!0,n.value=!0;try{await c()}finally{n.value=!1}};t({open:k});const g=(r,i,S)=>{if(r)h.value.push(i),d.value[i.id]=!0;else{const l=u(i);l>-1&&(h.value.splice(l,1),d.value[i.id]=!1,e.value=!1)}S&&C()},u=r=>h.value.findIndex(i=>i.id===r.id),C=()=>{e.value=p.value.every(r=>d.value[r.id]),_.value=!e.value&&p.value.some(r=>d.value[r.id])},V=I,w={isCheckAll:e,isIndeterminate:_,checkedUsers:h,checkedStatus:d,dialogTitle:"\u9009\u62E9\u5E97\u5458",dialogVisible:v,loading:n,total:m,list:p,queryParams:y,queryFormRef:b,getList:c,handleQuery:f,resetQuery:()=>{var r;(r=b.value)==null||r.resetFields(),f()},handleDeptNodeClick:async r=>{y.deptId=r.id,await c()},open:k,handleCheckAll:r=>{e.value=r,_.value=!1,p.value.forEach(i=>g(r,i,!1))},handleCheckOne:g,findCheckedIndex:u,calculateIsCheckAll:C,handleEmitChange:()=>{v.value=!1,V("change",[...h.value])},emits:V,get DICT_TYPE(){return A},get getIntDictOptions(){return Q},get dateFormatter(){return ue},DeptTree:de};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),[["render",function(x,t,I,e,_,h){const d=re,v=K,n=L,m=R,p=H,y=j,b=G,c=J,f=Z,k=B,g=W,u=X,C=oe,V=$,w=te,r=ee,i=le,S=ae;return T(),U(i,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=l=>e.dialogVisible=l),width:"60%"},{footer:o(()=>[a(f,{type:"primary",onClick:e.handleEmitChange},{default:o(()=>t[11]||(t[11]=[P("\u786E \u5B9A")])),_:1}),a(f,{onClick:t[7]||(t[7]=l=>e.dialogVisible=!1)},{default:o(()=>t[12]||(t[12]=[P("\u53D6 \u6D88")])),_:1})]),default:o(()=>[a(r,{gutter:20},{default:o(()=>[a(v,{span:4,xs:24},{default:o(()=>[a(d,{class:"h-1/1"},{default:o(()=>[a(e.DeptTree,{onNodeClick:e.handleDeptNodeClick})]),_:1})]),_:1}),a(v,{span:20,xs:24},{default:o(()=>[a(d,null,{default:o(()=>[a(k,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:o(()=>[a(m,{label:"\u7528\u6237\u540D\u79F0",prop:"username"},{default:o(()=>[a(n,{modelValue:e.queryParams.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e.queryParams.username=l),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",onKeyup:N(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u624B\u673A\u53F7\u7801",prop:"mobile"},{default:o(()=>[a(n,{modelValue:e.queryParams.mobile,"onUpdate:modelValue":t[1]||(t[1]=l=>e.queryParams.mobile=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",clearable:"",onKeyup:N(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(m,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[a(y,{modelValue:e.queryParams.status,"onUpdate:modelValue":t[2]||(t[2]=l=>e.queryParams.status=l),placeholder:"\u7528\u6237\u72B6\u6001",clearable:"",class:"!w-240px"},{default:o(()=>[(T(!0),E(M,null,F(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),l=>(T(),U(p,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:o(()=>[a(b,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":t[3]||(t[3]=l=>e.queryParams.createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetimerange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(m,null,{default:o(()=>[a(f,{onClick:e.handleQuery},{default:o(()=>[a(c,{icon:"ep:search"}),t[9]||(t[9]=P("\u641C\u7D22"))]),_:1}),a(f,{onClick:e.resetQuery},{default:o(()=>[a(c,{icon:"ep:refresh"}),t[10]||(t[10]=P("\u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(d,null,{default:o(()=>[z((T(),U(V,{data:e.list},{default:o(()=>[a(u,{width:"55"},{header:o(()=>[a(g,{modelValue:e.isCheckAll,"onUpdate:modelValue":t[4]||(t[4]=l=>e.isCheckAll=l),indeterminate:e.isIndeterminate,onChange:e.handleCheckAll},null,8,["modelValue","indeterminate"])]),default:o(({row:l})=>[a(g,{modelValue:e.checkedStatus[l.id],"onUpdate:modelValue":q=>e.checkedStatus[l.id]=q,onChange:q=>e.handleCheckOne(q,l,!0)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(u,{label:"\u7528\u6237\u7F16\u53F7",align:"center",key:"id",prop:"id"}),a(u,{label:"\u7528\u6237\u540D\u79F0",align:"center",prop:"username","show-overflow-tooltip":!0}),a(u,{label:"\u7528\u6237\u6635\u79F0",align:"center",prop:"nickname","show-overflow-tooltip":!0}),a(u,{label:"\u90E8\u95E8",align:"center",key:"deptName",prop:"deptName","show-overflow-tooltip":!0}),a(u,{label:"\u624B\u673A\u53F7\u7801",align:"center",prop:"mobile",width:"120"}),a(u,{label:"\u72B6\u6001",key:"status"},{default:o(l=>[a(C,{type:e.DICT_TYPE.COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),a(u,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e.dateFormatter,width:"180"},null,8,["formatter"])]),_:1},8,["data"])),[[S,e.loading]]),a(w,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":t[5]||(t[5]=l=>e.queryParams.pageNo=l),limit:e.queryParams.pageSize,"onUpdate:limit":t[6]||(t[6]=l=>e.queryParams.pageSize=l),onPagination:e.getList},null,8,["total","page","limit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/trade/delivery/pickUpStore/components/StoreStaffTableSelect.vue"]]);export{se as default};
