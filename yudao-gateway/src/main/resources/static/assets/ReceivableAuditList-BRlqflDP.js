import{d as R,r as f,f as U,u as q,ba as F,C as A,G as E,e2 as L,_ as V,X as Y,o as p,c as T,k as a,w as l,j,F as v,n as z,q as w,I as P,m as g,t as h,J as Q,K as B,L as M,O,y as G,P as J,N as K,Q as X,R as H}from"./index-BaY5TDP-.js";import{_ as W}from"./index-avjYFQiD.js";import{_ as Z}from"./DictTag-QtcI9ZjC.js";import{_ as $}from"./ContentWrap-DKQn7kZm.js";import{d as ee,b as ae}from"./formatTime-Dr6TiYYc.js";import{b as te}from"./index-DcQDDeHJ.js";import{A as le}from"./common-BQQO87UM.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";const re=V(R({name:"CrmReceivableAuditList",__name:"ReceivableAuditList",setup(D,{expose:i}){i();const m=f(!0),e=f(0),_=f([]),d=U({pageNo:1,pageSize:10,auditStatus:10}),b=f(),u=async()=>{m.value=!0;try{const o=await te(d);_.value=o.list,e.value=o.total}finally{m.value=!1}},{push:n}=q();F(async()=>{await u()}),A(()=>{u()});const c={loading:m,total:e,list:_,queryParams:d,queryFormRef:b,getList:u,handleQuery:()=>{d.pageNo=1,u()},handleProcessDetail:o=>{n({name:"BpmProcessInstanceDetail",query:{id:o.processInstanceId}})},push:n,openDetail:o=>{n({name:"CrmReceivableDetail",params:{id:o}})},openCustomerDetail:o=>{n({name:"CrmCustomerDetail",params:{id:o}})},openContractDetail:o=>{n({name:"CrmContractDetail",params:{id:o}})},get DICT_TYPE(){return E},get dateFormatter(){return ee},get dateFormatter2(){return ae},get AUDIT_STATUS(){return le},get erpPriceTableColumnFormatter(){return L}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(D,i,m,e,_,d){const b=Q,u=B,n=M,c=O,o=$,y=G,r=J,C=Z,S=K,x=X,k=W,I=Y("hasPermi"),N=H;return p(),T(v,null,[a(o,null,{default:l(()=>[i[3]||(i[3]=j("div",{class:"pb-5 text-xl"}," \u5F85\u5BA1\u6838\u56DE\u6B3E ",-1)),a(c,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:l(()=>[a(n,{label:"\u5408\u540C\u72B6\u6001",prop:"auditStatus"},{default:l(()=>[a(u,{modelValue:e.queryParams.auditStatus,"onUpdate:modelValue":i[0]||(i[0]=t=>e.queryParams.auditStatus=t),class:"!w-240px",placeholder:"\u72B6\u6001",onChange:e.handleQuery},{default:l(()=>[(p(!0),T(v,null,z(e.AUDIT_STATUS,(t,s)=>(p(),w(b,{label:t.label,value:t.value,key:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(o,null,{default:l(()=>[P((p(),w(x,{data:e.list,stripe:!0,"show-overflow-tooltip":!0},{default:l(()=>[a(r,{align:"center",fixed:"left",label:"\u56DE\u6B3E\u7F16\u53F7",prop:"no",width:"180"},{default:l(t=>[a(y,{underline:!1,type:"primary",onClick:s=>e.openDetail(t.row.id)},{default:l(()=>[g(h(t.row.no),1)]),_:2},1032,["onClick"])]),_:1}),a(r,{align:"center",label:"\u5BA2\u6237\u540D\u79F0",prop:"customerName",width:"120"},{default:l(t=>[a(y,{underline:!1,type:"primary",onClick:s=>e.openCustomerDetail(t.row.customerId)},{default:l(()=>[g(h(t.row.customerName),1)]),_:2},1032,["onClick"])]),_:1}),a(r,{align:"center",label:"\u5408\u540C\u7F16\u53F7",prop:"contractNo",width:"180"},{default:l(t=>[a(y,{underline:!1,type:"primary",onClick:s=>e.openContractDetail(t.row.contractId)},{default:l(()=>[g(h(t.row.contract.no),1)]),_:2},1032,["onClick"])]),_:1}),a(r,{formatter:e.dateFormatter2,align:"center",label:"\u56DE\u6B3E\u65E5\u671F",prop:"returnTime",width:"150px"},null,8,["formatter"]),a(r,{align:"center",label:"\u56DE\u6B3E\u91D1\u989D(\u5143)",prop:"price",width:"140",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),a(r,{align:"center",label:"\u56DE\u6B3E\u65B9\u5F0F",prop:"returnType",width:"130px"},{default:l(t=>[a(C,{type:e.DICT_TYPE.CRM_RECEIVABLE_RETURN_TYPE,value:t.row.returnType},null,8,["type","value"])]),_:1}),a(r,{align:"center",label:"\u5907\u6CE8",prop:"remark",width:"200"}),a(r,{align:"center",label:"\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09",prop:"contract.totalPrice",width:"140",formatter:e.erpPriceTableColumnFormatter},null,8,["formatter"]),a(r,{align:"center",label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserName",width:"120"}),a(r,{align:"center",label:"\u6240\u5C5E\u90E8\u95E8",prop:"ownerUserDeptName",width:"100px"}),a(r,{formatter:e.dateFormatter,align:"center",label:"\u66F4\u65B0\u65F6\u95F4",prop:"updateTime",width:"180px"},null,8,["formatter"]),a(r,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(r,{align:"center",label:"\u521B\u5EFA\u4EBA",prop:"creatorName",width:"120"}),a(r,{align:"center",fixed:"right",label:"\u56DE\u6B3E\u72B6\u6001",prop:"auditStatus",width:"120"},{default:l(t=>[a(C,{type:e.DICT_TYPE.CRM_AUDIT_STATUS,value:t.row.auditStatus},null,8,["type","value"])]),_:1}),a(r,{align:"center",fixed:"right",label:"\u64CD\u4F5C",width:"180px"},{default:l(t=>[P((p(),w(S,{link:"",type:"primary",onClick:s=>e.handleProcessDetail(t.row)},{default:l(()=>i[4]||(i[4]=[g(" \u67E5\u770B\u5BA1\u6279 ")])),_:2},1032,["onClick"])),[[I,["crm:receivable:update"]]])]),_:1})]),_:1},8,["data"])),[[N,e.loading]]),a(k,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":i[1]||(i[1]=t=>e.queryParams.pageNo=t),limit:e.queryParams.pageSize,"onUpdate:limit":i[2]||(i[2]=t=>e.queryParams.pageSize=t),onPagination:e.getList},null,8,["total","page","limit"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/crm/backlog/components/ReceivableAuditList.vue"]]);export{re as default};
