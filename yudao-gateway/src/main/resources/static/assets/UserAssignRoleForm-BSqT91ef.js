import{d as k,g as D,D as I,r as m,_ as F,o as p,q as _,w as s,k as u,m as g,I as U,c as w,F as L,n as R,Z as x,L as S,J as h,K as A,O as j,N as C,R as O}from"./index-BaY5TDP-.js";import{_ as q}from"./Dialog-CZSXtzfQ.js";import{c as J,d as K}from"./index-CBoTGgba.js";import{g as N}from"./index-C7Vgvn4F.js";const P=F(k({name:"SystemUserAssignRoleForm",__name:"UserAssignRoleForm",emits:["success"],setup(y,{expose:l,emit:V}){const{t:a}=D(),b=I(),t=m(!1),r=m(!1),o=m({id:-1,nickname:"",username:"",roleIds:[]}),i=m(),n=m([]),f=async e=>{t.value=!0,c(),o.value.id=e.id,o.value.username=e.username,o.value.nickname=e.nickname,r.value=!0;try{o.value.roleIds=await J(e.id)}finally{r.value=!1}n.value=await N()};l({open:f});const d=V,c=()=>{var e;o.value={id:-1,nickname:"",username:"",roleIds:[]},(e=i.value)==null||e.resetFields()},v={t:a,message:b,dialogVisible:t,formLoading:r,formData:o,formRef:i,roleList:n,open:f,emit:d,submitForm:async()=>{if(i&&await i.value.validate()){r.value=!0;try{await K({userId:o.value.id,roleIds:o.value.roleIds}),b.success(a("common.updateSuccess")),t.value=!1,d("success",!0)}finally{r.value=!1}}},resetForm:c};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),[["render",function(y,l,V,a,b,t){const r=x,o=S,i=h,n=A,f=j,d=C,c=q,v=O;return p(),_(c,{modelValue:a.dialogVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>a.dialogVisible=e),title:"\u5206\u914D\u89D2\u8272"},{footer:s(()=>[u(d,{disabled:a.formLoading,type:"primary",onClick:a.submitForm},{default:s(()=>l[5]||(l[5]=[g("\u786E \u5B9A")])),_:1},8,["disabled"]),u(d,{onClick:l[3]||(l[3]=e=>a.dialogVisible=!1)},{default:s(()=>l[6]||(l[6]=[g("\u53D6 \u6D88")])),_:1})]),default:s(()=>[U((p(),_(f,{ref:"formRef",model:a.formData,"label-width":"80px"},{default:s(()=>[u(o,{label:"\u7528\u6237\u540D\u79F0"},{default:s(()=>[u(r,{modelValue:a.formData.username,"onUpdate:modelValue":l[0]||(l[0]=e=>a.formData.username=e),disabled:!0},null,8,["modelValue"])]),_:1}),u(o,{label:"\u7528\u6237\u6635\u79F0"},{default:s(()=>[u(r,{modelValue:a.formData.nickname,"onUpdate:modelValue":l[1]||(l[1]=e=>a.formData.nickname=e),disabled:!0},null,8,["modelValue"])]),_:1}),u(o,{label:"\u89D2\u8272"},{default:s(()=>[u(n,{modelValue:a.formData.roleIds,"onUpdate:modelValue":l[2]||(l[2]=e=>a.formData.roleIds=e),multiple:"",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:s(()=>[(p(!0),w(L,null,R(a.roleList,e=>(p(),_(i,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[v,a.formLoading]])]),_:1},8,["modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/system/user/UserAssignRoleForm.vue"]]);export{P as default};
