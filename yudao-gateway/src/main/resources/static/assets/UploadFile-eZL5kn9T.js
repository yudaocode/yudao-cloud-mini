import{d as f,D as _,b4 as U,r as b,f as g,_ as y,o as S,q as v,w as d,j as D,aS as E,k as I,m as L,N as x,bx as A}from"./index-BaY5TDP-.js";import{b as R,a as h,H,U as O}from"./upload-PNt56tCi.js";import{U as c}from"./useUpload-Dg-sFRn3.js";const P={class:"el-upload__tip",style:{"margin-left":"5px"}},j=y(f({__name:"UploadFile",props:{type:{type:String,required:!0}},emits:["uploaded"],setup(r,{expose:a,emit:n}){a();const e=_(),i=r,l=U("accountId"),o=b([]),s=n,p=g({type:c.Image,title:"",introduction:"",accountId:l}),m=i.type===c.Image?R:h,u={message:e,props:i,accountId:l,fileList:o,emit:s,uploadData:p,onBeforeUpload:m,onUploadSuccess:t=>{if(t.code!==0)return e.alertError("\u4E0A\u4F20\u51FA\u9519\uFF1A"+t.msg),!1;o.value=[],p.title="",p.introduction="",e.notifySuccess("\u4E0A\u4F20\u6210\u529F"),s("uploaded")},onUploadError:t=>e.error("\u4E0A\u4F20\u5931\u8D25: "+t.message),get HEADERS(){return H},get UPLOAD_URL(){return O}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),[["render",function(r,a,n,e,i,l){const o=x,s=A;return S(),v(s,{action:e.UPLOAD_URL,headers:e.HEADERS,multiple:"",limit:1,"file-list":e.fileList,data:e.uploadData,"on-error":e.onUploadError,"before-upload":e.onBeforeUpload,"on-success":e.onUploadSuccess},{tip:d(()=>[D("span",P,[E(r.$slots,"default",{},void 0,!0)])]),default:d(()=>[I(o,{type:"primary",plain:""},{default:d(()=>a[0]||(a[0]=[L(" \u70B9\u51FB\u4E0A\u4F20 ")])),_:1})]),_:3},8,["action","headers","file-list","data","before-upload"])}],["__scopeId","data-v-9db5701b"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mp/material/components/UploadFile.vue"]]);export{j as default};
