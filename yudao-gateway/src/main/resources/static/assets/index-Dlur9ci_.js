import{bz as v,d as E,D as Q,g as D,r as _,f as O,C as Y,G as z,U as L,_ as N,X as R,o as m,c as k,k as a,w as t,Y as w,F as q,n as K,q as b,m as T,I,Z as j,L as A,J as G,K as J,z as X,N as Z,O as B,P as H,Q as M,R as W}from"./index-BaY5TDP-.js";import{_ as $}from"./index-avjYFQiD.js";import{_ as ee}from"./DictTag-QtcI9ZjC.js";import{_ as ae}from"./ContentWrap-DKQn7kZm.js";import{_ as le}from"./index-BAz6Gqim.js";import{d as re}from"./formatTime-Dr6TiYYc.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";const te=N(E({name:"SystemTokenClient",__name:"index",setup(x,{expose:l}){l();const c=Q(),{t:e}=D(),y=_(!0),h=_(0),f=_([]),n=O({pageNo:1,pageSize:10,userId:null,userType:void 0,clientId:null}),o=_(),i=async()=>{y.value=!0;try{const d=await(s=n,v.get({url:"/system/oauth2-token/page",params:s}));f.value=d.list,h.value=d.total}finally{y.value=!1}var s},g=()=>{n.pageNo=1,i()};Y(()=>{i()});const p={message:c,t:e,loading:y,total:h,list:f,queryParams:n,queryFormRef:o,getList:i,handleQuery:g,resetQuery:()=>{o.value.resetFields(),g()},handleForceLogout:async s=>{try{await c.confirm("\u662F\u5426\u8981\u5F3A\u5236\u9000\u51FA\u7528\u6237"),await(d=>v.delete({url:"/system/oauth2-token/delete?accessToken="+d}))(s),c.success(e("common.success")),await i()}catch{}},get DICT_TYPE(){return z},get getIntDictOptions(){return L},get dateFormatter(){return re}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(x,l,c,e,y,h){const f=le,n=j,o=A,i=G,g=J,p=X,s=Z,d=B,P=ae,u=H,S=ee,C=M,F=$,U=R("hasPermi"),V=W;return m(),k(q,null,[a(f,{title:"OAuth 2.0\uFF08SSO \u5355\u70B9\u767B\u5F55)",url:"https://doc.iocoder.cn/oauth2/"}),a(P,null,{default:t(()=>[a(d,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"90px"},{default:t(()=>[a(o,{label:"\u7528\u6237\u7F16\u53F7",prop:"userId"},{default:t(()=>[a(n,{modelValue:e.queryParams.userId,"onUpdate:modelValue":l[0]||(l[0]=r=>e.queryParams.userId=r),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u7F16\u53F7",clearable:"",onKeyup:w(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(o,{label:"\u7528\u6237\u7C7B\u578B",prop:"userType"},{default:t(()=>[a(g,{modelValue:e.queryParams.userType,"onUpdate:modelValue":l[1]||(l[1]=r=>e.queryParams.userType=r),placeholder:"\u8BF7\u9009\u62E9\u7528\u6237\u7C7B\u578B",clearable:"",class:"!w-240px"},{default:t(()=>[(m(!0),k(q,null,K(e.getIntDictOptions(e.DICT_TYPE.USER_TYPE),r=>(m(),b(i,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(o,{label:"\u5BA2\u6237\u7AEF\u7F16\u53F7",prop:"clientId"},{default:t(()=>[a(n,{modelValue:e.queryParams.clientId,"onUpdate:modelValue":l[2]||(l[2]=r=>e.queryParams.clientId=r),placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u7AEF\u7F16\u53F7",clearable:"",onKeyup:w(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(o,null,{default:t(()=>[a(s,{onClick:e.handleQuery},{default:t(()=>[a(p,{icon:"ep:search",class:"mr-5px"}),l[5]||(l[5]=T(" \u641C\u7D22"))]),_:1}),a(s,{onClick:e.resetQuery},{default:t(()=>[a(p,{icon:"ep:refresh",class:"mr-5px"}),l[6]||(l[6]=T(" \u91CD\u7F6E"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(P,null,{default:t(()=>[I((m(),b(C,{data:e.list},{default:t(()=>[a(u,{label:"\u8BBF\u95EE\u4EE4\u724C",align:"center",prop:"accessToken",width:"300"}),a(u,{label:"\u5237\u65B0\u4EE4\u724C",align:"center",prop:"refreshToken",width:"300"}),a(u,{label:"\u7528\u6237\u7F16\u53F7",align:"center",prop:"userId"}),a(u,{label:"\u7528\u6237\u7C7B\u578B",align:"center",prop:"userType"},{default:t(r=>[a(S,{type:e.DICT_TYPE.USER_TYPE,value:r.row.userType},null,8,["type","value"])]),_:1}),a(u,{label:"\u8FC7\u671F\u65F6\u95F4",align:"center",prop:"expiresTime",formatter:e.dateFormatter,width:"180"},null,8,["formatter"]),a(u,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e.dateFormatter,width:"180"},null,8,["formatter"]),a(u,{label:"\u64CD\u4F5C",align:"center"},{default:t(r=>[I((m(),b(s,{link:"",type:"danger",onClick:se=>e.handleForceLogout(r.row.accessToken)},{default:t(()=>l[7]||(l[7]=[T(" \u5F3A\u9000 ")])),_:2},1032,["onClick"])),[[U,["system:oauth2-token:delete"]]])]),_:1})]),_:1},8,["data"])),[[V,e.loading]]),a(F,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":l[3]||(l[3]=r=>e.queryParams.pageNo=r),limit:e.queryParams.pageSize,"onUpdate:limit":l[4]||(l[4]=r=>e.queryParams.pageSize=r),onPagination:e.getList},null,8,["total","page","limit"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/system/oauth2/token/index.vue"]]);export{te as default};
