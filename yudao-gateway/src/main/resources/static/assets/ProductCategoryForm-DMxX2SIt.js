import{d as U,g as F,D as E,r as u,f as L,U as k,G as q,_ as O,o as _,q as D,w as r,k as l,m as C,I as S,c as R,F as x,n as N,t as j,L as A,Z as B,ak as M,al as Y,O as G,N as Z,R as z}from"./index-BaY5TDP-.js";import{_ as H}from"./Dialog-CZSXtzfQ.js";import{E as J}from"./el-tree-select-DphqCDCz.js";import{P as b}from"./index-B2KWfNxB.js";import{h as K,d as Q}from"./tree-z7HkrWVC.js";import{C as h}from"./constants-CEEr2azc.js";const W=O(U({name:"ProductCategoryForm",__name:"ProductCategoryForm",emits:["success"],setup(w,{expose:a,emit:P}){const{t:e}=F(),p=E(),f=u(!1),g=u(""),o=u(!1),d=u(""),i=u({id:void 0,parentId:void 0,name:void 0,code:void 0,sort:void 0,status:h.ENABLE}),V=L({parentId:[{required:!0,message:"\u4E0A\u7EA7\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],code:[{required:!0,message:"\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),n=u(),m=u(),v=async(s,c)=>{if(f.value=!0,g.value=e("action."+s),d.value=s,t(),c){o.value=!0;try{i.value=await b.getProductCategory(c)}finally{o.value=!1}}await I()};a({open:v});const y=P,t=()=>{var s;i.value={id:void 0,parentId:void 0,name:void 0,code:void 0,sort:void 0,status:h.ENABLE},(s=n.value)==null||s.resetFields()},I=async()=>{m.value=[];const s=await b.getProductCategoryList(),c={id:0,name:"\u9876\u7EA7\u4EA7\u54C1\u5206\u7C7B",children:[]};c.children=K(s,"id","parentId"),m.value.push(c)},T={t:e,message:p,dialogVisible:f,dialogTitle:g,formLoading:o,formType:d,formData:i,formRules:V,formRef:n,productCategoryTree:m,open:v,emit:y,submitForm:async()=>{await n.value.validate(),o.value=!0;try{const s=i.value;d.value==="create"?(await b.createProductCategory(s),p.success(e("common.createSuccess"))):(await b.updateProductCategory(s),p.success(e("common.updateSuccess"))),f.value=!1,y("success")}finally{o.value=!1}},resetForm:t,getProductCategoryTree:I,get getIntDictOptions(){return k},get DICT_TYPE(){return q},get defaultProps(){return Q}};return Object.defineProperty(T,"__isScriptSetup",{enumerable:!1,value:!0}),T}}),[["render",function(w,a,P,e,p,f){const g=J,o=A,d=B,i=M,V=Y,n=G,m=Z,v=H,y=z;return _(),D(v,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=t=>e.dialogVisible=t)},{footer:r(()=>[l(m,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:r(()=>a[7]||(a[7]=[C("\u786E \u5B9A")])),_:1},8,["disabled"]),l(m,{onClick:a[5]||(a[5]=t=>e.dialogVisible=!1)},{default:r(()=>a[8]||(a[8]=[C("\u53D6 \u6D88")])),_:1})]),default:r(()=>[S((_(),D(n,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px"},{default:r(()=>[l(o,{label:"\u4E0A\u7EA7\u7F16\u53F7",prop:"parentId"},{default:r(()=>[l(g,{modelValue:e.formData.parentId,"onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.parentId=t),data:e.productCategoryTree,props:e.defaultProps,"check-strictly":"","default-expand-all":"",placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u7F16\u53F7"},null,8,["modelValue","data","props"])]),_:1}),l(o,{label:"\u540D\u79F0",prop:"name"},{default:r(()=>[l(d,{modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.name=t),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(o,{label:"\u7F16\u7801",prop:"code"},{default:r(()=>[l(d,{modelValue:e.formData.code,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.code=t),placeholder:"\u8BF7\u8F93\u5165\u7F16\u7801"},null,8,["modelValue"])]),_:1}),l(o,{label:"\u6392\u5E8F",prop:"sort"},{default:r(()=>[l(d,{modelValue:e.formData.sort,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.sort=t),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),l(o,{label:"\u72B6\u6001",prop:"status"},{default:r(()=>[l(V,{modelValue:e.formData.status,"onUpdate:modelValue":a[4]||(a[4]=t=>e.formData.status=t)},{default:r(()=>[(_(!0),R(x,null,N(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),t=>(_(),D(i,{key:t.value,value:t.value},{default:r(()=>[C(j(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[y,e.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/product/category/ProductCategoryForm.vue"]]);export{W as default};
