import{d as h,g as C,D as F,r as n,G as O,cP as S,_ as T,o as b,c as k,k as r,w as o,m as y,I as x,q as w,F as I,n as R,t as L,ak as N,al as U,L as E,Z as P,O as W,N as q,R as A}from"./index-BaY5TDP-.js";import{_ as J}from"./Dialog-CZSXtzfQ.js";import{C as M}from"./constants-CEEr2azc.js";import{g as Y,c as j,u as B}from"./index-pf8i-b2A.js";const G=T(h({name:"WalletChannelForm",__name:"WalletChannelForm",emits:["success"],setup(D,{expose:l,emit:V}){const{t:a}=C(),d=F(),c=n(!1),f=n(""),s=n(!1),t=n({appId:"",code:"",status:void 0,feeRate:0,remark:"",config:{name:"mock-conf"}}),u=n(),p=async(e,_)=>{c.value=!0,s.value=!0,g(e,_);try{const i=await Y(e,_);i&&i.id&&(t.value=i,t.value.config=JSON.parse(i.config)),f.value=t.value.id?"\u7F16\u8F91\u652F\u4ED8\u6E20\u9053":"\u521B\u5EFA\u652F\u4ED8\u6E20\u9053"}finally{s.value=!1}};l({open:p});const m=V,g=(e,_)=>{var i;t.value={appId:e,code:_,status:M.ENABLE,remark:"",feeRate:0,config:{name:"mock-conf"}},(i=u.value)==null||i.resetFields()},v={t:a,message:d,dialogVisible:c,dialogTitle:f,formLoading:s,formData:t,formRules:{status:[{required:!0,message:"\u6E20\u9053\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]},formRef:u,open:p,emit:m,submitForm:async()=>{if(u&&await u.value.validate()){s.value=!0;try{const e={...t.value};e.config=JSON.stringify(t.value.config),e.id?(await B(e),d.success(a("common.updateSuccess"))):(await j(e),d.success(a("common.createSuccess"))),c.value=!1,m("success")}finally{s.value=!1}}},resetForm:g,get DICT_TYPE(){return O},get getDictOptions(){return S}};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),[["render",function(D,l,V,a,d,c){const f=N,s=U,t=E,u=P,p=W,m=q,g=J,v=A;return b(),k("div",null,[r(g,{modelValue:a.dialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>a.dialogVisible=e),title:a.dialogTitle,width:"800px"},{footer:o(()=>[r(m,{disabled:a.formLoading,type:"primary",onClick:a.submitForm},{default:o(()=>l[4]||(l[4]=[y("\u786E \u5B9A")])),_:1},8,["disabled"]),r(m,{onClick:l[2]||(l[2]=e=>a.dialogVisible=!1)},{default:o(()=>l[5]||(l[5]=[y("\u53D6 \u6D88")])),_:1})]),default:o(()=>[x((b(),w(p,{ref:"formRef",model:a.formData,rules:a.formRules,"label-width":"100px"},{default:o(()=>[r(t,{label:"\u6E20\u9053\u72B6\u6001","label-width":"180px",prop:"status"},{default:o(()=>[r(s,{modelValue:a.formData.status,"onUpdate:modelValue":l[0]||(l[0]=e=>a.formData.status=e)},{default:o(()=>[(b(!0),k(I,null,R(a.getDictOptions(a.DICT_TYPE.COMMON_STATUS),e=>(b(),w(f,{key:parseInt(e.value),value:parseInt(e.value)},{default:o(()=>[y(L(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(t,{label:"\u5907\u6CE8","label-width":"180px",prop:"remark"},{default:o(()=>[r(u,{modelValue:a.formData.remark,"onUpdate:modelValue":l[1]||(l[1]=e=>a.formData.remark=e),style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[v,a.formLoading]])]),_:1},8,["modelValue","title"])])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/pay/app/components/channel/WalletChannelForm.vue"]]);export{G as default};
