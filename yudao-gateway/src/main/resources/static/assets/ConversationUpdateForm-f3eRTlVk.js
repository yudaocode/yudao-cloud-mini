import{d as D,D as M,r as p,f as U,_ as w,o as x,q as V,w as s,k as t,m as _,I as T,c as F,F as I,n as L,Z as q,L as R,J as O,K as j,cf as S,O as E,N,R as P}from"./index-BaY5TDP-.js";import{_ as A}from"./Dialog-CZSXtzfQ.js";import{C as B}from"./constants-CEEr2azc.js";import{C as J}from"./index-Cz_ljQ_t.js";import{C as h}from"./index-C2SngFyG.js";const K=w(D({name:"ChatConversationUpdateForm",__name:"ConversationUpdateForm",emits:["success"],setup(k,{expose:a,emit:y}){const e=M(),f=p(!1),d=p(!1),r=p({id:void 0,systemMessage:void 0,modelId:void 0,temperature:void 0,maxTokens:void 0,maxContexts:void 0}),m=U({modelId:[{required:!0,message:"\u6A21\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],temperature:[{required:!0,message:"\u6E29\u5EA6\u53C2\u6570\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],maxTokens:[{required:!0,message:"\u56DE\u590D\u6570 Token \u6570\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],maxContexts:[{required:!0,message:"\u4E0A\u4E0B\u6587\u6570\u91CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),u=p(),v=p([]),i=async l=>{if(f.value=!0,n(),l){d.value=!0;try{const o=await h.getChatConversationMy(l);r.value=Object.keys(r.value).reduce((C,b)=>(o.hasOwnProperty(b)&&(C[b]=o[b]),C),{})}finally{d.value=!1}}v.value=await J.getChatModelSimpleList(B.ENABLE)};a({open:i});const c=y,n=()=>{var l;r.value={id:void 0,systemMessage:void 0,modelId:void 0,temperature:void 0,maxTokens:void 0,maxContexts:void 0},(l=u.value)==null||l.resetFields()},g={message:e,dialogVisible:f,formLoading:d,formData:r,formRules:m,formRef:u,chatModelList:v,open:i,emit:c,submitForm:async()=>{await u.value.validate(),d.value=!0;try{const l=r.value;await h.updateChatConversationMy(l),e.success("\u5BF9\u8BDD\u914D\u7F6E\u5DF2\u66F4\u65B0"),f.value=!1,c("success")}finally{d.value=!1}},resetForm:n};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(k,a,y,e,f,d){const r=q,m=R,u=O,v=j,i=S,c=E,n=N,g=A,l=P;return x(),V(g,{title:"\u8BBE\u5B9A",modelValue:e.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=o=>e.dialogVisible=o)},{footer:s(()=>[t(n,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:s(()=>a[7]||(a[7]=[_("\u786E \u5B9A")])),_:1},8,["disabled"]),t(n,{onClick:a[5]||(a[5]=o=>e.dialogVisible=!1)},{default:s(()=>a[8]||(a[8]=[_("\u53D6 \u6D88")])),_:1})]),default:s(()=>[T((x(),V(c,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"130px"},{default:s(()=>[t(m,{label:"\u89D2\u8272\u8BBE\u5B9A",prop:"systemMessage"},{default:s(()=>[t(r,{type:"textarea",modelValue:e.formData.systemMessage,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.systemMessage=o),rows:"4",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u8BBE\u5B9A"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u6A21\u578B",prop:"modelId"},{default:s(()=>[t(v,{modelValue:e.formData.modelId,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.modelId=o),placeholder:"\u8BF7\u9009\u62E9\u6A21\u578B"},{default:s(()=>[(x(!0),F(I,null,L(e.chatModelList,o=>(x(),V(u,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"\u6E29\u5EA6\u53C2\u6570",prop:"temperature"},{default:s(()=>[t(i,{modelValue:e.formData.temperature,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.temperature=o),placeholder:"\u8BF7\u8F93\u5165\u6E29\u5EA6\u53C2\u6570",min:0,max:2,precision:2},null,8,["modelValue"])]),_:1}),t(m,{label:"\u56DE\u590D\u6570 Token \u6570",prop:"maxTokens"},{default:s(()=>[t(i,{modelValue:e.formData.maxTokens,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.maxTokens=o),placeholder:"\u8BF7\u8F93\u5165\u56DE\u590D\u6570 Token \u6570",min:0,max:4096},null,8,["modelValue"])]),_:1}),t(m,{label:"\u4E0A\u4E0B\u6587\u6570\u91CF",prop:"maxContexts"},{default:s(()=>[t(i,{modelValue:e.formData.maxContexts,"onUpdate:modelValue":a[4]||(a[4]=o=>e.formData.maxContexts=o),placeholder:"\u8BF7\u8F93\u5165\u4E0A\u4E0B\u6587\u6570\u91CF",min:0,max:20},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[l,e.formLoading]])]),_:1},8,["modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/ai/chat/index/components/conversation/ConversationUpdateForm.vue"]]);export{K as default};
