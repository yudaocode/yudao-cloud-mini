import{d as x,u as I,r as d,f as k,C as F,G as U,_ as C,o as y,c as D,k as e,w as n,Y as S,m as c,I as M,q as Y,t as Q,F as V,Z as N,L as z,M as A,z as B,N as L,O as R,P as j,Q as E,R as H}from"./index-BaY5TDP-.js";import{_ as K}from"./index-avjYFQiD.js";import{_ as O}from"./DictTag-QtcI9ZjC.js";import{_ as G}from"./ContentWrap-DKQn7kZm.js";import{_ as Z}from"./index-BAz6Gqim.js";import{d as J,a as W}from"./formatTime-Dr6TiYYc.js";import{i as X}from"./index-ZFL2ufyC.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";const $=C(x({name:"BpmManagerTask",__name:"index",setup(w,{expose:t}){t();const{push:f}=I(),a=d(!0),g=d(0),_=d([]),i=k({pageNo:1,pageSize:10,name:"",createTime:[]}),p=d(),o=async()=>{a.value=!0;try{const s=await X(i);_.value=s.list,g.value=s.total}finally{a.value=!1}},u=()=>{i.pageNo=1,o()};F(()=>{o()});const m={push:f,loading:a,total:g,list:_,queryParams:i,queryFormRef:p,getList:o,handleQuery:u,resetQuery:()=>{p.value.resetFields(),u()},handleAudit:s=>{f({name:"BpmProcessInstanceDetail",query:{id:s.processInstance.id}})},get DICT_TYPE(){return U},get dateFormatter(){return J},get formatPast2(){return W}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),[["render",function(w,t,f,a,g,_){const i=Z,p=N,o=z,u=A,m=B,s=L,b=R,h=G,l=j,P=O,v=E,T=K,q=H;return y(),D(V,null,[e(i,{title:"\u5DE5\u4F5C\u6D41\u624B\u518C",url:"https://doc.iocoder.cn/bpm/"}),e(h,null,{default:n(()=>[e(b,{ref:"queryFormRef",inline:!0,model:a.queryParams,class:"-mb-15px","label-width":"68px"},{default:n(()=>[e(o,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"name"},{default:n(()=>[e(p,{modelValue:a.queryParams.name,"onUpdate:modelValue":t[0]||(t[0]=r=>a.queryParams.name=r),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",onKeyup:S(a.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),e(o,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:n(()=>[e(u,{modelValue:a.queryParams.createTime,"onUpdate:modelValue":t[1]||(t[1]=r=>a.queryParams.createTime=r),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),e(o,null,{default:n(()=>[e(s,{onClick:a.handleQuery},{default:n(()=>[e(m,{class:"mr-5px",icon:"ep:search"}),t[4]||(t[4]=c(" \u641C\u7D22 "))]),_:1}),e(s,{onClick:a.resetQuery},{default:n(()=>[e(m,{class:"mr-5px",icon:"ep:refresh"}),t[5]||(t[5]=c(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(h,null,{default:n(()=>[M((y(),Y(v,{data:a.list},{default:n(()=>[e(l,{align:"center",label:"\u6D41\u7A0B",prop:"processInstance.name",width:"180"}),e(l,{align:"center",label:"\u53D1\u8D77\u4EBA",prop:"processInstance.startUser.nickname",width:"100"}),e(l,{formatter:a.dateFormatter,align:"center",label:"\u53D1\u8D77\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(l,{align:"center",label:"\u5F53\u524D\u4EFB\u52A1",prop:"name",width:"180"}),e(l,{formatter:a.dateFormatter,align:"center",label:"\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(l,{formatter:a.dateFormatter,align:"center",label:"\u4EFB\u52A1\u7ED3\u675F\u65F6\u95F4",prop:"endTime",width:"180"},null,8,["formatter"]),e(l,{align:"center",label:"\u5BA1\u6279\u4EBA",prop:"assigneeUser.nickname",width:"100"}),e(l,{align:"center",label:"\u5BA1\u6279\u72B6\u6001",prop:"status",width:"120"},{default:n(r=>[e(P,{type:a.DICT_TYPE.BPM_TASK_STATUS,value:r.row.status},null,8,["type","value"])]),_:1}),e(l,{align:"center",label:"\u5BA1\u6279\u5EFA\u8BAE",prop:"reason","min-width":"180"}),e(l,{align:"center",label:"\u8017\u65F6",prop:"durationInMillis",width:"160"},{default:n(r=>[c(Q(a.formatPast2(r.row.durationInMillis)),1)]),_:1}),e(l,{align:"center",label:"\u6D41\u7A0B\u7F16\u53F7",prop:"processInstanceId","show-overflow-tooltip":!0}),e(l,{align:"center",label:"\u4EFB\u52A1\u7F16\u53F7",prop:"id","show-overflow-tooltip":!0}),e(l,{align:"center",label:"\u64CD\u4F5C",fixed:"right",width:"80"},{default:n(r=>[e(s,{link:"",type:"primary",onClick:ee=>a.handleAudit(r.row)},{default:n(()=>t[6]||(t[6]=[c("\u5386\u53F2")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,a.loading]]),e(T,{limit:a.queryParams.pageSize,"onUpdate:limit":t[2]||(t[2]=r=>a.queryParams.pageSize=r),page:a.queryParams.pageNo,"onUpdate:page":t[3]||(t[3]=r=>a.queryParams.pageNo=r),total:a.total,onPagination:a.getList},null,8,["limit","page","total"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/bpm/task/manager/index.vue"]]);export{$ as default};
