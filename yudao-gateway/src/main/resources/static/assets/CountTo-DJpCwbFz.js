import{d as P,p as l,f as j,bj as k,C as w,b as E,au as N,a as y,a0 as R,bn as $,_ as M,o as O,c as U,t as z,a2 as B}from"./index-BaY5TDP-.js";const G=M(P({name:"CountTo",__name:"CountTo",props:{startVal:l.number.def(0),endVal:l.number.def(2021),duration:l.number.def(3e3),autoplay:l.bool.def(!0),decimals:l.number.validate(i=>i>=0).def(0),decimal:l.string.def("."),separator:l.string.def(","),prefix:l.string.def(""),suffix:l.string.def(""),useEasing:l.bool.def(!0),easingFn:{type:Function,default:(i,u,p,s)=>p*(1-Math.pow(2,-10*i/s))*1024/1023+u}},emits:["mounted","callback"],setup(i,{expose:u,emit:p}){const{getPrefixCls:s}=R(),x=s("count-to"),t=i,g=p,c=r=>{const{decimals:o,decimal:f,separator:e,suffix:n,prefix:h}=t;r=Number(r).toFixed(o);const S=(r+="").split(".");let b=S[0];const q=S.length>1?f+S[1]:"",_=/(\d+)(\d{3})/;if(e&&!$(e))for(;_.test(b);)b=b.replace(_,"$1"+e+"$2");return h+b+q+n},a=j({localStartVal:t.startVal,displayValue:c(t.startVal),printVal:null,paused:!1,localDuration:t.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),v=k(a,"displayValue");w(()=>{t.autoplay&&d(),g("mounted")});const m=E(()=>t.startVal>t.endVal);N([()=>t.startVal,()=>t.endVal],()=>{t.autoplay&&d()});const d=()=>{const{startVal:r,duration:o}=t;a.localStartVal=r,a.startTime=null,a.localDuration=o,a.paused=!1,a.rAF=requestAnimationFrame(V)},T=()=>{a.paused?(A(),a.paused=!1):(F(),a.paused=!0)},F=()=>{cancelAnimationFrame(a.rAF)},A=()=>{a.startTime=null,a.localDuration=+a.remaining,a.localStartVal=+a.printVal,requestAnimationFrame(V)},C=()=>{a.startTime=null,cancelAnimationFrame(a.rAF),a.displayValue=c(t.startVal)},V=r=>{const{useEasing:o,easingFn:f,endVal:e}=t;a.startTime||(a.startTime=r),a.timestamp=r;const n=r-a.startTime;a.remaining=a.localDuration-n,o?y(m)?a.printVal=a.localStartVal-f(n,0,a.localStartVal-e,a.localDuration):a.printVal=f(n,a.localStartVal,e-a.localStartVal,a.localDuration):y(m)?a.printVal=a.localStartVal-(a.localStartVal-e)*(n/a.localDuration):a.printVal=a.localStartVal+(e-a.localStartVal)*(n/a.localDuration),y(m)?a.printVal=a.printVal<e?e:a.printVal:a.printVal=a.printVal>e?e:a.printVal,a.displayValue=c(a.printVal),n<a.localDuration?a.rAF=requestAnimationFrame(V):g("callback")};u({pauseResume:T,reset:C,start:d,pause:F});const D={getPrefixCls:s,prefixCls:x,props:t,emit:g,formatNumber:c,state:a,displayValue:v,getCountDown:m,start:d,pauseResume:T,pause:F,resume:A,reset:C,count:V};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),[["render",function(i,u,p,s,x,t){return O(),U("span",{class:B(s.prefixCls)},z(s.displayValue),3)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/CountTo/src/CountTo.vue"]]);export{G as _};
