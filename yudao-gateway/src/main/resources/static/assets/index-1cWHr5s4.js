import{d as Y,r as c,C as V,G as j,U as Q,aE as A,_ as G,X as B,o as f,c as T,k as e,w as r,j as s,F as R,n as H,q as P,m as h,I as S,t as I,z as J,v as K,E as X,M as $,L as W,J as Z,K as ee,N as ae,O as te,P as re,Q as le,R as se}from"./index-BaY5TDP-.js";import{_ as oe}from"./index-avjYFQiD.js";import{_ as ie}from"./DictTag-QtcI9ZjC.js";import{E as ne}from"./el-image-Bg-CwbDE.js";import{E as ue}from"./el-avatar-DZsRbb7z.js";import{_ as de}from"./ContentWrap-DKQn7kZm.js";import{_ as ce}from"./CountTo-DJpCwbFz.js";import{_ as me}from"./index-BAz6Gqim.js";import{g as pe,a as fe,C as ge}from"./CombinationRecordListDialog-DItm4Fn6.js";import{d as ve,h as xe}from"./formatTime-Dr6TiYYc.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";const _e={class:"flex items-center"},ye={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(24 144 255)","background-color":"rgb(24 144 255 / 10%)"}},be={class:"ml-[20px]"},he={class:"flex items-center"},we={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(162 119 255)","background-color":"rgb(162 119 255 / 10%)"}},Ce={class:"ml-[20px]"},Pe={class:"flex items-center"},Te={class:"h-[50px] w-[50px] flex items-center justify-center",style:{color:"rgb(162 119 255)","background-color":"rgb(162 119 255 / 10%)"}},Re={class:"ml-[20px]"},Se={class:"align-middle"},Ie=G(Y({name:"PromotionCombinationRecord",__name:"index",setup(O,{expose:l}){l();const g=c({status:void 0,createTime:void 0,pageSize:10,pageNo:1}),a=c(),w=c(),v=c(!0),x=c(0),n=c([]),d=async()=>{v.value=!0;try{const i=await pe(g.value);n.value=i.list,x.value=i.total}finally{v.value=!1}},u=c({successCount:0,userCount:0,virtualGroupCount:0}),m=async()=>{u.value=await fe()},_=()=>{g.value.pageNo=1,d()};V(async()=>{await m(),await d()});const y={queryParams:g,queryFormRef:a,combinationRecordListRef:w,loading:v,total:x,pageList:n,getList:d,recordSummary:u,getSummary:m,openRecordListDialog:i=>{var b;(b=w.value)==null||b.open(i.headId||i.id)},handleQuery:_,resetQuery:()=>{a.value.resetFields(),_()},imagePreview:i=>{A({urlList:[i]})},CombinationRecordListDialog:ge,get DICT_TYPE(){return j},get getIntDictOptions(){return Q},get dateFormatter(){return ve},get defaultShortcuts(){return xe}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(O,l,g,a,w,v){const x=me,n=J,d=ce,u=de,m=K,_=X,y=$,i=W,b=Z,k=ee,C=ae,q=te,o=re,D=ue,L=ne,N=ie,U=le,z=oe,E=B("hasPermi"),F=se;return f(),T(R,null,[e(x,{title:"\u3010\u8425\u9500\u3011\u62FC\u56E2\u6D3B\u52A8",url:"https://doc.iocoder.cn/mall/promotion-combination/"}),e(_,{gutter:12},{default:r(()=>[e(m,{span:6},{default:r(()=>[e(u,{class:"h-[110px] pb-0!"},{default:r(()=>[s("div",_e,[s("div",ye,[e(n,{size:23,icon:"fa:user-times"})]),s("div",be,[l[4]||(l[4]=s("div",{class:"mb-8px text-14px text-gray-400"},"\u53C2\u4E0E\u4EBA\u6570(\u4E2A)",-1)),e(d,{duration:2600,"end-val":a.recordSummary.userCount,"start-val":0,class:"text-20px"},null,8,["end-val"])])])]),_:1})]),_:1}),e(m,{span:6},{default:r(()=>[e(u,{class:"h-[110px]"},{default:r(()=>[s("div",he,[s("div",we,[e(n,{size:23,icon:"fa:user-plus"})]),s("div",Ce,[l[5]||(l[5]=s("div",{class:"mb-8px text-14px text-gray-400"},"\u6210\u56E2\u6570\u91CF(\u4E2A)",-1)),e(d,{duration:2600,"end-val":a.recordSummary.successCount,"start-val":0,class:"text-20px"},null,8,["end-val"])])])]),_:1})]),_:1}),e(m,{span:6},{default:r(()=>[e(u,{class:"h-[110px]"},{default:r(()=>[s("div",Pe,[s("div",Te,[e(n,{size:23,icon:"fa:user-plus"})]),s("div",Re,[l[6]||(l[6]=s("div",{class:"mb-8px text-14px text-gray-400"},"\u865A\u62DF\u6210\u56E2(\u4E2A)",-1)),e(d,{duration:2600,"end-val":a.recordSummary.virtualGroupCount,"start-val":0,class:"text-20px"},null,8,["end-val"])])])]),_:1})]),_:1})]),_:1}),e(u,null,{default:r(()=>[e(q,{ref:"queryFormRef",inline:!0,model:a.queryParams,class:"-mb-15px","label-width":"68px"},{default:r(()=>[e(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[e(y,{modelValue:a.queryParams.createTime,"onUpdate:modelValue":l[0]||(l[0]=t=>a.queryParams.createTime=t),shortcuts:a.defaultShortcuts,class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","shortcuts"])]),_:1}),e(i,{label:"\u62FC\u56E2\u72B6\u6001",prop:"status"},{default:r(()=>[e(k,{modelValue:a.queryParams.status,"onUpdate:modelValue":l[1]||(l[1]=t=>a.queryParams.status=t),class:"!w-240px",clearable:"",placeholder:"\u5168\u90E8"},{default:r(()=>[(f(!0),T(R,null,H(a.getIntDictOptions(a.DICT_TYPE.PROMOTION_COMBINATION_RECORD_STATUS),(t,p)=>(f(),P(b,{key:p,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:r(()=>[e(C,{onClick:a.handleQuery},{default:r(()=>[e(n,{class:"mr-5px",icon:"ep:search"}),l[7]||(l[7]=h(" \u641C\u7D22 "))]),_:1}),e(C,{onClick:a.resetQuery},{default:r(()=>[e(n,{class:"mr-5px",icon:"ep:refresh"}),l[8]||(l[8]=h(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(u,null,{default:r(()=>[S((f(),P(U,{data:a.pageList},{default:r(()=>[e(o,{align:"center",label:"\u7F16\u53F7",prop:"id","min-width":"50"}),e(o,{align:"center",label:"\u5934\u50CF",prop:"avatar","min-width":"80"},{default:r(t=>[e(D,{src:t.row.avatar},null,8,["src"])]),_:1}),e(o,{align:"center",label:"\u6635\u79F0",prop:"nickname","min-width":"100"}),e(o,{align:"center",label:"\u5F00\u56E2\u56E2\u957F",prop:"headId","min-width":"100"},{default:r(({row:t})=>{var p;return[h(I(t.headId?(p=a.pageList.find(M=>M.id===t.headId))==null?void 0:p.nickname:t.nickname),1)]}),_:1}),e(o,{formatter:a.dateFormatter,align:"center",label:"\u5F00\u56E2\u65F6\u95F4",prop:"startTime",width:"180"},null,8,["formatter"]),e(o,{align:"center",label:"\u62FC\u56E2\u5546\u54C1",prop:"type","show-overflow-tooltip":"","min-width":"300"},{defaul:r(({row:t})=>[e(L,{src:t.picUrl,class:"mr-5px h-30px w-30px align-middle",onClick:p=>a.imagePreview(t.picUrl)},null,8,["src","onClick"]),s("span",Se,I(t.spuName),1)]),_:1}),e(o,{align:"center",label:"\u51E0\u4EBA\u56E2",prop:"userSize","min-width":"100"}),e(o,{align:"center",label:"\u53C2\u4E0E\u4EBA\u6570",prop:"userCount","min-width":"100"}),e(o,{formatter:a.dateFormatter,align:"center",label:"\u53C2\u56E2\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(o,{formatter:a.dateFormatter,align:"center",label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime",width:"180"},null,8,["formatter"]),e(o,{align:"center",label:"\u62FC\u56E2\u72B6\u6001",prop:"status","min-width":"150"},{default:r(t=>[e(N,{type:a.DICT_TYPE.PROMOTION_COMBINATION_RECORD_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),e(o,{align:"center",fixed:"right",label:"\u64CD\u4F5C"},{default:r(t=>[S((f(),P(C,{link:"",type:"primary",onClick:p=>a.openRecordListDialog(t.row)},{default:r(()=>l[9]||(l[9]=[h(" \u67E5\u770B\u62FC\u56E2 ")])),_:2},1032,["onClick"])),[[E,["promotion:combination-record:query"]]])]),_:1})]),_:1},8,["data"])),[[F,a.loading]]),e(z,{limit:a.queryParams.pageSize,"onUpdate:limit":l[2]||(l[2]=t=>a.queryParams.pageSize=t),page:a.queryParams.pageNo,"onUpdate:page":l[3]||(l[3]=t=>a.queryParams.pageNo=t),total:a.total,onPagination:a.getList},null,8,["limit","page","total"])]),_:1}),e(a.CombinationRecordListDialog,{ref:"combinationRecordListRef"},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/combination/record/index.vue"]]);export{Ie as default};
