import{d as h,g as k,D as q,r as i,f as E,G as O,U as S,_ as x,o as m,q as f,w as s,k as r,m as U,I as R,c as w,F as C,n as T,j as N,t as P,J as A,K as j,L as B,Z as M,co as Y,cf as z,ak as G,al as J,O as K,N as Z,R as H}from"./index-BaY5TDP-.js";import{_ as Q}from"./Dialog-CZSXtzfQ.js";import{C as F}from"./constants-CEEr2azc.js";import{a as W,g as X,c as $,u as ee}from"./category-B7jjsMOS.js";const ae=x(h({name:"ProductCategory",__name:"CategoryForm",emits:["success"],setup(L,{expose:l,emit:I}){const{t:e}=k(),g=q(),v=i(!1),p=i(""),u=i(!1),t=i(""),d=i({id:void 0,name:"",picUrl:"",status:F.ENABLE}),D=E({parentId:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B",trigger:"blur"}],name:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u5206\u7C7B\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u5206\u7C7B\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u5F00\u542F\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),n=i(),b=i([]),_=async(o,a)=>{if(v.value=!0,p.value=e("action."+o),t.value=o,c(),a){u.value=!0;try{d.value=await W(a)}finally{u.value=!1}}b.value=await X({parentId:0})};l({open:_});const V=I,c=()=>{var o;d.value={id:void 0,name:"",picUrl:"",status:F.ENABLE},(o=n.value)==null||o.resetFields()},y={t:e,message:g,dialogVisible:v,dialogTitle:p,formLoading:u,formType:t,formData:d,formRules:D,formRef:n,categoryList:b,open:_,emit:V,submitForm:async()=>{if(n&&await n.value.validate()){u.value=!0;try{const o=d.value;t.value==="create"?(await $(o),g.success(e("common.createSuccess"))):(await ee(o),g.success(e("common.updateSuccess"))),v.value=!1,V("success")}finally{u.value=!1}}},resetForm:c,get DICT_TYPE(){return O},get getIntDictOptions(){return S}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(L,l,I,e,g,v){const p=A,u=j,t=B,d=M,D=Y,n=z,b=G,_=J,V=K,c=Z,y=Q,o=H;return m(),f(y,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":l[6]||(l[6]=a=>e.dialogVisible=a)},{footer:s(()=>[r(c,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:s(()=>l[8]||(l[8]=[U("\u786E \u5B9A")])),_:1},8,["disabled"]),r(c,{onClick:l[5]||(l[5]=a=>e.dialogVisible=!1)},{default:s(()=>l[9]||(l[9]=[U("\u53D6 \u6D88")])),_:1})]),default:s(()=>[R((m(),f(V,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"120px"},{default:s(()=>[r(t,{label:"\u4E0A\u7EA7\u5206\u7C7B",prop:"parentId"},{default:s(()=>[r(u,{modelValue:e.formData.parentId,"onUpdate:modelValue":l[0]||(l[0]=a=>e.formData.parentId=a),placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u5206\u7C7B"},{default:s(()=>[(m(),f(p,{key:0,label:"\u9876\u7EA7\u5206\u7C7B",value:0})),(m(!0),w(C,null,T(e.categoryList,a=>(m(),f(p,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(t,{label:"\u5206\u7C7B\u540D\u79F0",prop:"name"},{default:s(()=>[r(d,{modelValue:e.formData.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.formData.name=a),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),r(t,{label:"\u79FB\u52A8\u7AEF\u5206\u7C7B\u56FE",prop:"picUrl"},{default:s(()=>[r(D,{modelValue:e.formData.picUrl,"onUpdate:modelValue":l[2]||(l[2]=a=>e.formData.picUrl=a),limit:1,"is-show-tip":!1},null,8,["modelValue"]),l[7]||(l[7]=N("div",{style:{"font-size":"10px"},class:"pl-10px"},"\u63A8\u8350 180x180 \u56FE\u7247\u5206\u8FA8\u7387",-1))]),_:1}),r(t,{label:"\u5206\u7C7B\u6392\u5E8F",prop:"sort"},{default:s(()=>[r(n,{modelValue:e.formData.sort,"onUpdate:modelValue":l[3]||(l[3]=a=>e.formData.sort=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),r(t,{label:"\u5F00\u542F\u72B6\u6001",prop:"status"},{default:s(()=>[r(_,{modelValue:e.formData.status,"onUpdate:modelValue":l[4]||(l[4]=a=>e.formData.status=a)},{default:s(()=>[(m(!0),w(C,null,T(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),a=>(m(),f(b,{key:a.value,value:a.value},{default:s(()=>[U(P(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[o,e.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/product/category/CategoryForm.vue"]]);export{ae as default};
