import{_ as N}from"./Dialog-CZSXtzfQ.js";import{d as M,g as T,D as E,r as c,C as J,eA as x,ea as I,a as j,b5 as k,_ as V,am as B,X as F,o as w,c as O,k as o,w as t,j as v,m as _,t as R,I as A,ah as L,F as U,N as z,aq as K}from"./index-BaY5TDP-.js";import{_ as P}from"./ContentWrap-DKQn7kZm.js";import{u as $}from"./useFormCreateDesigner-CiVbdKGs.js";import{H as y}from"./index-BuMQ6E3q.js";import{j as q}from"./java-DB6dfEyf.js";import"./index-BCN8BzfC.js";import"./dict.type-DgSgotXb.js";function G(r){const a=["true","false","null"],u={scope:"literal",beginKeywords:a.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:a},contains:[{className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},{match:/[{}[\],:]/,className:"punctuation",relevance:0},r.QUOTE_STRING_MODE,u,r.C_NUMBER_MODE,r.C_LINE_COMMENT_MODE,r.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}const H={class:"h-[calc(100vh-var(--top-tool-height)-var(--tags-view-height)-var(--app-content-padding)-var(--app-content-padding)-2px)]"},Q={key:0,ref:"editor"},W={class:"hljs"},X=V(M({name:"InfraBuild",__name:"index",setup(r,{expose:a}){a();const{t:u}=T(),e=E(),C=c({switchType:[],autoActive:!0,useTemplate:!1,formOptions:{form:{labelWidth:"100px"}},fieldReadonly:!1,hiddenDragMenu:!1,hiddenDragBtn:!1,hiddenMenu:[],hiddenItem:[],hiddenItemConfig:{},disabledItemConfig:{},showSaveBtn:!1,showConfig:!0,showBaseForm:!0,showControl:!0,showPropsForm:!0,showEventForm:!0,showValidateForm:!0,showFormConfig:!0,showInputData:!0,showDevice:!0,appendConfigData:[]}),i=c(),s=c(!1),f=c(""),l=c(-1),p=c("");$(i);const d=n=>{s.value=!0,f.value=n},h=()=>{const n=i.value.getRule(),m=i.value.getOption();return`<template>
    <form-create
      v-model:api="fApi"
      :rule="rule"
      :option="option"
      @submit="onSubmit"
    ></form-create>
  </template>
  <script setup lang=ts>
    const faps = ref(null)
    const rule = ref('')
    const option = ref('')
    const init = () => {
      rule.value = formCreate.parseJson('${x.toJson(n).replaceAll("\\","\\\\")}')
      option.value = formCreate.parseJson('${JSON.stringify(m)}')
    }
    const onSubmit = (formData) => {
      //todo \u63D0\u4EA4\u8868\u5355
    }
    init()
  <\/script>`};J(async()=>{y.registerLanguage("xml",q),y.registerLanguage("json",G)});const g={t:u,message:e,designerConfig:C,designer:i,dialogVisible:s,dialogTitle:f,formType:l,formData:p,openModel:d,showJson:()=>{d("\u751F\u6210 JSON"),l.value=0,p.value=i.value.getRule()},showOption:()=>{d("\u751F\u6210 Options"),l.value=1,p.value=i.value.getOption()},showTemplate:()=>{d("\u751F\u6210\u7EC4\u4EF6"),l.value=2,p.value=h()},makeTemplate:h,copy:async n=>{const m=JSON.stringify(n,null,2),{copy:b,copied:S,isSupported:D}=I({source:m});D?(await b(),j(S)&&e.success(u("common.copySuccess"))):e.error(u("common.copyError"))},highlightedCode:n=>{let m="json";return l.value===2&&(m="xml"),k(n)||(n=JSON.stringify(n,null,2)),y.highlight(n,{language:m,ignoreIllegals:!0}).value||"&nbsp;"}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(r,a,u,e,C,i){const s=z,f=B("fc-designer"),l=P,p=K,d=N,h=F("dompurify-html");return w(),O(U,null,[o(l,{"body-style":{padding:"0px"},class:"!mb-0"},{default:t(()=>[v("div",H,[o(f,{class:"my-designer",ref:"designer",config:e.designerConfig},{handle:t(()=>[o(s,{size:"small",type:"primary",plain:"",onClick:e.showJson},{default:t(()=>a[2]||(a[2]=[_("\u751F\u6210JSON")])),_:1}),o(s,{size:"small",type:"success",plain:"",onClick:e.showOption},{default:t(()=>a[3]||(a[3]=[_("\u751F\u6210Options")])),_:1}),o(s,{size:"small",type:"danger",plain:"",onClick:e.showTemplate},{default:t(()=>a[4]||(a[4]=[_("\u751F\u6210\u7EC4\u4EF6")])),_:1})]),_:1},8,["config"])])]),_:1}),o(d,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[1]||(a[1]=g=>e.dialogVisible=g),title:e.dialogTitle,"max-height":"600"},{default:t(()=>[e.dialogVisible?(w(),O("div",Q,[o(s,{style:{float:"right"},onClick:a[0]||(a[0]=g=>e.copy(e.formData))},{default:t(()=>[_(R(e.t("common.copy")),1)]),_:1}),o(p,{height:"580"},{default:t(()=>[v("div",null,[v("pre",null,[A(v("code",W,null,512),[[h,e.highlightedCode(e.formData)]])])])]),_:1})],512)):L("",!0)]),_:1},8,["modelValue","title"])],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/infra/build/index.vue"]]);export{X as default};
