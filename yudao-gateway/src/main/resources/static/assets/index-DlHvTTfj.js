import{bz as q,d as E,D as L,g as F,r as n,f as Y,ba as U,C as O,U as Q,G as K,ez as M,_ as Z,X as B,o as p,c as P,k as a,w as t,F as x,n as R,q as f,Y as W,m as T,I as S,J as j,K as H,L as G,Z as J,M as X,z as A,N as $,O as ee,P as ae,Q as le,R as re}from"./index-BaY5TDP-.js";import{_ as oe}from"./index-avjYFQiD.js";import{_ as te}from"./DictTag-QtcI9ZjC.js";import{_ as se}from"./ContentWrap-DKQn7kZm.js";import{_ as ue}from"./index-BAz6Gqim.js";import{d as pe}from"./formatTime-Dr6TiYYc.js";import{d as ie}from"./download-oWiM5xVU.js";import{P as ne}from"./index-CJwxK5Qx.js";import{W as de}from"./index-B0TWi7A6.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";const z={getStockRecordPage:async d=>await q.get({url:"/erp/stock-record/page",params:d}),getStockRecord:async d=>await q.get({url:"/erp/stock-record/get?id="+d}),exportStockRecord:async d=>await q.download({url:"/erp/stock-record/export-excel",params:d})},ce=Z(E({name:"ErpStockRecord",__name:"index",setup(d,{expose:r}){r();const y=L(),{t:e}=F(),b=n(!0),k=n([]),_=n(0),i=Y({pageNo:1,pageSize:10,productId:void 0,warehouseId:void 0,bizType:void 0,bizNo:void 0,createTime:[]}),m=n(),s=n(!1),w=n([]),h=n([]),u=async()=>{b.value=!0;try{const o=await z.getStockRecordPage(i);k.value=o.list,_.value=o.total}finally{b.value=!1}},c=()=>{i.pageNo=1,u()},v=n();U(()=>{u()}),O(async()=>{await u(),w.value=await ne.getProductSimpleList(),h.value=await de.getWarehouseSimpleList()});const g={message:y,t:e,loading:b,list:k,total:_,queryParams:i,queryFormRef:m,exportLoading:s,productList:w,warehouseList:h,getList:u,handleQuery:c,resetQuery:()=>{m.value.resetFields(),c()},formRef:v,openForm:(o,C)=>{v.value.open(o,C)},handleDelete:async o=>{try{await y.delConfirm(),await z.deleteStockRecord(o),y.success(e("common.delSuccess")),await u()}catch{}},handleExport:async()=>{try{await y.exportConfirm(),s.value=!0;const o=await z.exportStockRecord(i);ie.excel(o,"\u4EA7\u54C1\u5E93\u5B58\u660E\u7EC6.xls")}catch{}finally{s.value=!1}},get getIntDictOptions(){return Q},get DICT_TYPE(){return K},get dateFormatter(){return pe},get erpCountTableColumnFormatter(){return M}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(d,r,y,e,b,k){const _=ue,i=j,m=H,s=G,w=J,h=X,u=A,c=$,v=ee,g=se,o=ae,C=te,N=le,V=oe,I=B("hasPermi"),D=re;return p(),P(x,null,[a(_,{title:"\u3010\u5E93\u5B58\u3011\u4EA7\u54C1\u5E93\u5B58\u3001\u5E93\u5B58\u660E\u7EC6",url:"https://doc.iocoder.cn/erp/stock/"}),a(g,null,{default:t(()=>[a(v,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:t(()=>[a(s,{label:"\u4EA7\u54C1",prop:"productId"},{default:t(()=>[a(m,{modelValue:e.queryParams.productId,"onUpdate:modelValue":r[0]||(r[0]=l=>e.queryParams.productId=l),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1",class:"!w-240px"},{default:t(()=>[(p(!0),P(x,null,R(e.productList,l=>(p(),f(i,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u4ED3\u5E93",prop:"warehouseId"},{default:t(()=>[a(m,{modelValue:e.queryParams.warehouseId,"onUpdate:modelValue":r[1]||(r[1]=l=>e.queryParams.warehouseId=l),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93",class:"!w-240px"},{default:t(()=>[(p(!0),P(x,null,R(e.warehouseList,l=>(p(),f(i,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u7C7B\u578B",prop:"bizType"},{default:t(()=>[a(m,{modelValue:e.queryParams.bizType,"onUpdate:modelValue":r[2]||(r[2]=l=>e.queryParams.bizType=l),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",clearable:"",class:"!w-240px"},{default:t(()=>[(p(!0),P(x,null,R(e.getIntDictOptions(e.DICT_TYPE.ERP_STOCK_RECORD_BIZ_TYPE),l=>(p(),f(i,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u4E1A\u52A1\u5355\u53F7",prop:"bizNo"},{default:t(()=>[a(w,{modelValue:e.queryParams.bizNo,"onUpdate:modelValue":r[3]||(r[3]=l=>e.queryParams.bizNo=l),placeholder:"\u8BF7\u8F93\u5165\u4E1A\u52A1\u5355\u53F7",clearable:"",onKeyup:W(e.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),a(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[a(h,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":r[4]||(r[4]=l=>e.queryParams.createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),a(s,null,{default:t(()=>[a(c,{onClick:e.handleQuery},{default:t(()=>[a(u,{icon:"ep:search",class:"mr-5px"}),r[8]||(r[8]=T(" \u641C\u7D22"))]),_:1}),a(c,{onClick:e.resetQuery},{default:t(()=>[a(u,{icon:"ep:refresh",class:"mr-5px"}),r[9]||(r[9]=T(" \u91CD\u7F6E"))]),_:1}),S((p(),f(c,{type:"primary",plain:"",onClick:r[5]||(r[5]=l=>e.openForm("create"))},{default:t(()=>[a(u,{icon:"ep:plus",class:"mr-5px"}),r[10]||(r[10]=T(" \u65B0\u589E "))]),_:1})),[[I,["erp:stock-record:create"]]]),S((p(),f(c,{type:"success",plain:"",onClick:e.handleExport,loading:e.exportLoading},{default:t(()=>[a(u,{icon:"ep:download",class:"mr-5px"}),r[11]||(r[11]=T(" \u5BFC\u51FA "))]),_:1},8,["loading"])),[[I,["erp:stock-record:export"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(g,null,{default:t(()=>[S((p(),f(N,{data:e.list,stripe:!0,"show-overflow-tooltip":!0},{default:t(()=>[a(o,{label:"\u4EA7\u54C1\u540D\u79F0",align:"center",prop:"productName"}),a(o,{label:"\u4EA7\u54C1\u5206\u7C7B",align:"center",prop:"categoryName"}),a(o,{label:"\u4EA7\u54C1\u5355\u4F4D",align:"center",prop:"unitName"}),a(o,{label:"\u4ED3\u5E93\u7F16\u53F7",align:"center",prop:"warehouseName"}),a(o,{label:"\u7C7B\u578B",align:"center",prop:"bizType","min-width":"100"},{default:t(l=>[a(C,{type:e.DICT_TYPE.ERP_STOCK_RECORD_BIZ_TYPE,value:l.row.bizType},null,8,["type","value"])]),_:1}),a(o,{label:"\u51FA\u5165\u5E93\u5355\u53F7",align:"center",prop:"bizNo",width:"200"}),a(o,{label:"\u51FA\u5165\u5E93\u65E5\u671F",align:"center",prop:"createTime",formatter:e.dateFormatter,width:"180px"},null,8,["formatter"]),a(o,{label:"\u51FA\u5165\u5E93\u6570\u91CF",align:"center",prop:"count",formatter:e.erpCountTableColumnFormatter},null,8,["formatter"]),a(o,{label:"\u5E93\u5B58\u91CF",align:"center",prop:"totalCount",formatter:e.erpCountTableColumnFormatter},null,8,["formatter"]),a(o,{label:"\u64CD\u4F5C\u4EBA",align:"center",prop:"creatorName"})]),_:1},8,["data"])),[[D,e.loading]]),a(V,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":r[6]||(r[6]=l=>e.queryParams.pageNo=l),limit:e.queryParams.pageSize,"onUpdate:limit":r[7]||(r[7]=l=>e.queryParams.pageSize=l),onPagination:e.getList},null,8,["total","page","limit"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/stock/record/index.vue"]]);export{ce as default};
