import{bz as m,d as I,g as L,D as R,r as i,f as C,b as N,_ as j,o as b,q as w,w as l,m as x,ah as q,k as o,I as P,c as z,F as M,n as A,Z as B,L as E,v as J,M as K,J as Z,K as G,cq as H,E as Q,O as W,A as X,B as Y,N as $,R as ee}from"./index-BaY5TDP-.js";import{_ as ae}from"./Dialog-CZSXtzfQ.js";import{_ as te}from"./ContentWrap-DKQn7kZm.js";import oe from"./StockOutItemForm-FNQ6mLHR.js";import{C as le}from"./index-DV7H_W_F.js";const O={getStockOutPage:async s=>await m.get({url:"/erp/stock-out/page",params:s}),getStockOut:async s=>await m.get({url:"/erp/stock-out/get?id="+s}),createStockOut:async s=>await m.post({url:"/erp/stock-out/create",data:s}),updateStockOut:async s=>await m.put({url:"/erp/stock-out/update",data:s}),updateStockOutStatus:async(s,a)=>await m.put({url:"/erp/stock-out/update-status",params:{id:s,status:a}}),deleteStockOut:async s=>await m.delete({url:"/erp/stock-out/delete",params:{ids:s.join(",")}}),exportStockOut:async s=>await m.download({url:"/erp/stock-out/export-excel",params:s})},h=j(I({name:"StockOutForm",__name:"StockOutForm",emits:["success"],setup(s,{expose:a,emit:F}){const{t:e}=L(),v=R(),_=i(!1),p=i(""),u=i(!1),r=i(""),c=i({id:void 0,customerId:void 0,outTime:void 0,remark:void 0,fileUrl:"",items:[]}),D=C({outTime:[{required:!0,message:"\u51FA\u5E93\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),T=N(()=>r.value==="detail"),f=i(),k=i([]),U=i("item"),g=i(),V=async(d,t)=>{if(_.value=!0,p.value=e("action."+d),r.value=d,n(),t){u.value=!0;try{c.value=await O.getStockOut(t)}finally{u.value=!1}}k.value=await le.getCustomerSimpleList()};a({open:V});const y=F,n=()=>{var d;c.value={id:void 0,customerId:void 0,outTime:void 0,remark:void 0,fileUrl:void 0,items:[]},(d=f.value)==null||d.resetFields()},S={t:e,message:v,dialogVisible:_,dialogTitle:p,formLoading:u,formType:r,formData:c,formRules:D,disabled:T,formRef:f,customerList:k,subTabsName:U,itemFormRef:g,open:V,emit:y,submitForm:async()=>{await f.value.validate(),await g.value.validate(),u.value=!0;try{const d=c.value;r.value==="create"?(await O.createStockOut(d),v.success(e("common.createSuccess"))):(await O.updateStockOut(d),v.success(e("common.updateSuccess"))),_.value=!1,y("success")}finally{u.value=!1}},resetForm:n,StockOutItemForm:oe};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),[["render",function(s,a,F,e,v,_){const p=B,u=E,r=J,c=K,D=Z,T=G,f=H,k=Q,U=W,g=X,V=Y,y=te,n=$,S=ae,d=ee;return b(),w(S,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=t=>e.dialogVisible=t),width:"1080"},{footer:l(()=>[e.disabled?q("",!0):(b(),w(n,{key:0,onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:l(()=>a[8]||(a[8]=[x(" \u786E \u5B9A ")])),_:1},8,["disabled"])),o(n,{onClick:a[6]||(a[6]=t=>e.dialogVisible=!1)},{default:l(()=>a[9]||(a[9]=[x("\u53D6 \u6D88")])),_:1})]),default:l(()=>[P((b(),w(U,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px",disabled:e.disabled},{default:l(()=>[o(k,{gutter:20},{default:l(()=>[o(r,{span:8},{default:l(()=>[o(u,{label:"\u51FA\u5E93\u5355\u53F7",prop:"no"},{default:l(()=>[o(p,{disabled:"",modelValue:e.formData.no,"onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.no=t),placeholder:"\u4FDD\u5B58\u65F6\u81EA\u52A8\u751F\u6210"},null,8,["modelValue"])]),_:1})]),_:1}),o(r,{span:8},{default:l(()=>[o(u,{label:"\u51FA\u5E93\u65F6\u95F4",prop:"outTime"},{default:l(()=>[o(c,{modelValue:e.formData.outTime,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.outTime=t),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u51FA\u5E93\u65F6\u95F4",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),o(r,{span:8},{default:l(()=>[o(u,{label:"\u5BA2\u6237",prop:"customerId"},{default:l(()=>[o(T,{modelValue:e.formData.customerId,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.customerId=t),clearable:"",filterable:"",placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237",class:"!w-1/1"},{default:l(()=>[(b(!0),z(M,null,A(e.customerList,t=>(b(),w(D,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(r,{span:16},{default:l(()=>[o(u,{label:"\u5907\u6CE8",prop:"remark"},{default:l(()=>[o(p,{type:"textarea",modelValue:e.formData.remark,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.remark=t),rows:1,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1}),o(r,{span:8},{default:l(()=>[o(u,{label:"\u9644\u4EF6",prop:"fileUrl"},{default:l(()=>[o(f,{"is-show-tip":!1,modelValue:e.formData.fileUrl,"onUpdate:modelValue":a[4]||(a[4]=t=>e.formData.fileUrl=t),limit:1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","disabled"])),[[d,e.formLoading]]),o(y,null,{default:l(()=>[o(V,{modelValue:e.subTabsName,"onUpdate:modelValue":a[5]||(a[5]=t=>e.subTabsName=t),class:"-mt-15px -mb-10px"},{default:l(()=>[o(g,{label:"\u51FA\u5E93\u4EA7\u54C1\u6E05\u5355",name:"item"},{default:l(()=>[o(e.StockOutItemForm,{ref:"itemFormRef",items:e.formData.items,disabled:e.disabled},null,8,["items","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/stock/out/StockOutForm.vue"]]),se=Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"}));export{O as S,h as a,se as b};
