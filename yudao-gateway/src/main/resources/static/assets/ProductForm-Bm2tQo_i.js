import{d as k,g as C,D as U,r as p,f as Y,G as R,U as q,_ as w,o as d,q as u,w as t,k as o,m as I,I as L,c as T,F as f,n as y,ah as h,t as x,Z as A,L as S,J as K,K as N,ak as j,al as G,O as J,N as M,R as Z}from"./index-BaY5TDP-.js";import{_ as z}from"./Dialog-CZSXtzfQ.js";import{P}from"./index-DK5ShDMH.js";const B=w(k({name:"IoTProductForm",__name:"ProductForm",emits:["success"],setup(E,{expose:l,emit:O}){const{t:e}=C(),g=U(),m=p(!1),c=p(""),r=p(!1),s=p(""),i=p({name:void 0,id:void 0,productKey:void 0,protocolId:void 0,categoryId:void 0,description:void 0,validateType:void 0,status:void 0,deviceType:void 0,netType:void 0,protocolType:void 0,dataFormat:void 0}),V=Y({name:[{required:!0,message:"\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],deviceType:[{required:!0,message:"\u8BBE\u5907\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],netType:[{required:i.deviceType===0||i.deviceType===2,message:"\u8054\u7F51\u65B9\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],protocolType:[{required:i.deviceType===1,message:"\u63A5\u5165\u7F51\u5173\u534F\u8BAE\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],dataFormat:[{required:!0,message:"\u6570\u636E\u683C\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],validateType:[{required:!0,message:"\u6570\u636E\u6821\u9A8C\u7EA7\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),n=p(),b=async(a,F)=>{if(m.value=!0,c.value=e("action."+a),s.value=a,_(),F){r.value=!0;try{i.value=await P.getProduct(F)}finally{r.value=!1}}};l({open:b,close:()=>m.value=!1});const v=O,_=()=>{var a;i.value={name:void 0,id:void 0,productKey:void 0,protocolId:void 0,categoryId:void 0,description:void 0,validateType:void 0,status:void 0,deviceType:void 0,netType:void 0,protocolType:void 0,dataFormat:void 0},(a=n.value)==null||a.resetFields()},D={t:e,message:g,dialogVisible:m,dialogTitle:c,formLoading:r,formType:s,formData:i,formRules:V,formRef:n,open:b,emit:v,submitForm:async()=>{await n.value.validate(),r.value=!0;try{const a=i.value;s.value==="create"?(await P.createProduct(a),g.success(e("common.createSuccess"))):(await P.updateProduct(a),g.success(e("common.updateSuccess"))),m.value=!1,v("success")}finally{r.value=!1}},resetForm:_,get DICT_TYPE(){return R},get getIntDictOptions(){return q}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),[["render",function(E,l,O,e,g,m){const c=A,r=S,s=K,i=N,V=j,n=G,b=J,v=M,_=z,D=Z;return d(),u(_,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":l[8]||(l[8]=a=>e.dialogVisible=a)},{footer:t(()=>[o(v,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:t(()=>l[9]||(l[9]=[I("\u786E \u5B9A")])),_:1},8,["disabled"]),o(v,{onClick:l[7]||(l[7]=a=>e.dialogVisible=!1)},{default:t(()=>l[10]||(l[10]=[I("\u53D6 \u6D88")])),_:1})]),default:t(()=>[L((d(),u(b,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px"},{default:t(()=>[o(r,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"name"},{default:t(()=>[o(c,{modelValue:e.formData.name,"onUpdate:modelValue":l[0]||(l[0]=a=>e.formData.name=a),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(r,{label:"\u8BBE\u5907\u7C7B\u578B",prop:"deviceType"},{default:t(()=>[o(i,{modelValue:e.formData.deviceType,"onUpdate:modelValue":l[1]||(l[1]=a=>e.formData.deviceType=a),placeholder:"\u8BF7\u9009\u62E9\u8BBE\u5907\u7C7B\u578B",disabled:e.formType==="update"},{default:t(()=>[(d(!0),T(f,null,y(e.getIntDictOptions(e.DICT_TYPE.IOT_PRODUCT_DEVICE_TYPE),a=>(d(),u(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e.formData.deviceType===0||e.formData.deviceType===2?(d(),u(r,{key:0,label:"\u8054\u7F51\u65B9\u5F0F",prop:"netType"},{default:t(()=>[o(i,{modelValue:e.formData.netType,"onUpdate:modelValue":l[2]||(l[2]=a=>e.formData.netType=a),placeholder:"\u8BF7\u9009\u62E9\u8054\u7F51\u65B9\u5F0F",disabled:e.formType==="update"},{default:t(()=>[(d(!0),T(f,null,y(e.getIntDictOptions(e.DICT_TYPE.IOT_NET_TYPE),a=>(d(),u(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})):h("",!0),e.formData.deviceType===1?(d(),u(r,{key:1,label:"\u63A5\u5165\u7F51\u5173\u534F\u8BAE",prop:"protocolType"},{default:t(()=>[o(i,{modelValue:e.formData.protocolType,"onUpdate:modelValue":l[3]||(l[3]=a=>e.formData.protocolType=a),placeholder:"\u8BF7\u9009\u62E9\u63A5\u5165\u7F51\u5173\u534F\u8BAE",disabled:e.formType==="update"},{default:t(()=>[(d(!0),T(f,null,y(e.getIntDictOptions(e.DICT_TYPE.IOT_PROTOCOL_TYPE),a=>(d(),u(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})):h("",!0),o(r,{label:"\u6570\u636E\u683C\u5F0F",prop:"dataFormat"},{default:t(()=>[o(i,{modelValue:e.formData.dataFormat,"onUpdate:modelValue":l[4]||(l[4]=a=>e.formData.dataFormat=a),placeholder:"\u8BF7\u9009\u62E9\u63A5\u6570\u636E\u683C\u5F0F",disabled:e.formType==="update"},{default:t(()=>[(d(!0),T(f,null,y(e.getIntDictOptions(e.DICT_TYPE.IOT_DATA_FORMAT),a=>(d(),u(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(r,{label:"\u6570\u636E\u6821\u9A8C\u7EA7\u522B",prop:"validateType"},{default:t(()=>[o(n,{modelValue:e.formData.validateType,"onUpdate:modelValue":l[5]||(l[5]=a=>e.formData.validateType=a),disabled:e.formType==="update"},{default:t(()=>[(d(!0),T(f,null,y(e.getIntDictOptions(e.DICT_TYPE.IOT_VALIDATE_TYPE),a=>(d(),u(V,{key:a.value,label:a.value},{default:t(()=>[I(x(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(r,{label:"\u4EA7\u54C1\u63CF\u8FF0",prop:"description"},{default:t(()=>[o(c,{type:"textarea",modelValue:e.formData.description,"onUpdate:modelValue":l[6]||(l[6]=a=>e.formData.description=a),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[D,e.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/iot/product/ProductForm.vue"]]);export{B as default};
