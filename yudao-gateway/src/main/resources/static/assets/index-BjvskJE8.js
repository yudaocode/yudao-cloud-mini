import{d as L,r as M,dr as O,f as w,aA as P,C as Y,ev as E,U as T,G as U,_ as F,o as c,c as $,k as t,j as R,w as r,I as f,q as b,F as j,v as A,E as I,P as k,Q as q,l as z,R as G}from"./index-BaY5TDP-.js";import{e as Q,_ as X}from"./Echart-BQxFkezy.js";import{_ as B}from"./index-BAz6Gqim.js";import{d as D,e as H,f as J,b as K}from"./member-BVjd2N62.js";import{S as V}from"./index-DYEmSFQB.js";import{c as W}from"./china-aeAnb323.js";import{f as Z}from"./formatter-DdccBgw4.js";import aa from"./MemberFunnelCard-Co5a1gDF.js";import ea from"./MemberTerminalCard-Dcvp8j9B.js";import{C as ta}from"./CardTitle-Z2xLAPly.js";import"./echarts-DpbyC_6K.js";import"./formatTime-Dr6TiYYc.js";import"./CountTo-DJpCwbFz.js";import"./index-BYWVnEtA.js";const ra={class:"flex flex-col"},la=F(L({name:"MemberStatistics",__name:"index",setup(N,{expose:S}){var n;S();const v=M(!0),e=M(),C=O();(n=Q)==null||n.registerMap("china",W);const x=w({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u7EC8\u7AEF",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),y=w({tooltip:{trigger:"item",confine:!0,formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right"},roseType:"area",series:[{name:"\u4F1A\u5458\u6027\u522B",type:"pie",label:{show:!1},labelLine:{show:!1},data:[]}]}),l=w({tooltip:{trigger:"item",formatter:a=>{var o,i,s,u,p;return`${((o=a==null?void 0:a.data)==null?void 0:o.areaName)||(a==null?void 0:a.name)}<br/>
\u4F1A\u5458\u6570\u91CF\uFF1A${((i=a==null?void 0:a.data)==null?void 0:i.userCount)||0}<br/>
\u8BA2\u5355\u521B\u5EFA\u6570\u91CF\uFF1A${((s=a==null?void 0:a.data)==null?void 0:s.orderCreateUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u6570\u91CF\uFF1A${((u=a==null?void 0:a.data)==null?void 0:u.orderPayUserCount)||0}<br/>
\u8BA2\u5355\u652F\u4ED8\u91D1\u989D\uFF1A${P(((p=a==null?void 0:a.data)==null?void 0:p.orderPayPrice)||0)}`}},visualMap:{text:["\u9AD8","\u4F4E"],realtime:!1,calculable:!0,top:"middle",inRange:{color:["#fff","#3b82f6"]}},series:[{name:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03",type:"map",map:"china",roam:!1,selectedMode:!1,data:[]}]}),d=async()=>{e.value=await D()},g=async()=>{const a=await H();C.value=a.map(s=>({...s,areaName:E(s.areaName)}));let o=0,i=0;l.series[0].data=C.value.map(s=>(o=Math.min(o,s.orderPayUserCount||0),i=Math.max(i,s.orderPayUserCount||0),{...s,name:s.areaName,value:s.orderPayUserCount||0})),l.visualMap.min=o,l.visualMap.max=i},m=async()=>{const a=await J(),o=T(U.SYSTEM_USER_SEX);o.push({label:"\u672A\u77E5",value:null}),y.series[0].data=o.map(i=>{var u;const s=(u=a.find(p=>p.sex===i.value))==null?void 0:u.userCount;return{name:i.label,value:s||0}})},_=async()=>{const a=await K(),o=T(U.TERMINAL);o.push({label:"\u672A\u77E5",value:null}),x.series[0].data=o.map(i=>{var u;const s=(u=a.find(p=>p.terminal===i.value))==null?void 0:u.userCount;return{name:i.label,value:s||0}})};Y(async()=>{v.value=!0,await Promise.all([d(),_(),g(),m()]),v.value=!1});const h={loading:v,summary:e,areaStatisticsList:C,terminalChartOptions:x,sexChartOptions:y,areaChartOptions:l,getMemberSummary:d,getMemberAreaStatisticsList:g,getMemberSexStatisticsList:m,getMemberTerminalStatisticsList:_,SummaryCard:V,get fenToYuan(){return P},get fenToYuanFormat(){return Z},MemberFunnelCard:aa,MemberTerminalCard:ea,get CardTitle(){return ta}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),[["render",function(N,S,v,e,C,x){const y=B,l=A,d=I,g=X,m=k,_=q,h=z,n=G;return c(),$(j,null,[t(y,{title:"\u3010\u7EDF\u8BA1\u3011\u4F1A\u5458\u3001\u5546\u54C1\u3001\u4EA4\u6613\u7EDF\u8BA1",url:"https://doc.iocoder.cn/mall/statistics/"}),R("div",ra,[t(d,{gutter:16,class:"summary"},{default:r(()=>[f((c(),b(l,{sm:6,xs:12},{default:r(()=>{var a;return[t(e.SummaryCard,{value:((a=e.summary)==null?void 0:a.userCount)||0,icon:"fa-solid:users","icon-bg-color":"text-blue-500","icon-color":"bg-blue-100",title:"\u7D2F\u8BA1\u4F1A\u5458\u6570"},null,8,["value"])]}),_:1})),[[n,e.loading]]),f((c(),b(l,{sm:6,xs:12},{default:r(()=>{var a;return[t(e.SummaryCard,{value:((a=e.summary)==null?void 0:a.rechargeUserCount)||0,icon:"fa-solid:user","icon-bg-color":"text-purple-500","icon-color":"bg-purple-100",title:"\u7D2F\u8BA1\u5145\u503C\u4EBA\u6570"},null,8,["value"])]}),_:1})),[[n,e.loading]]),f((c(),b(l,{sm:6,xs:12},{default:r(()=>{var a;return[t(e.SummaryCard,{decimals:2,value:e.fenToYuan(((a=e.summary)==null?void 0:a.rechargePrice)||0),icon:"fa-solid:money-check-alt","icon-bg-color":"text-yellow-500","icon-color":"bg-yellow-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u5145\u503C\u91D1\u989D"},null,8,["value"])]}),_:1})),[[n,e.loading]]),f((c(),b(l,{sm:6,xs:12},{default:r(()=>{var a;return[t(e.SummaryCard,{decimals:2,value:e.fenToYuan(((a=e.summary)==null?void 0:a.expensePrice)||0),icon:"fa-solid:yen-sign","icon-bg-color":"text-green-500","icon-color":"bg-green-100",prefix:"\uFFE5",title:"\u7D2F\u8BA1\u6D88\u8D39\u91D1\u989D"},null,8,["value"])]}),_:1})),[[n,e.loading]])]),_:1}),t(d,{gutter:16,class:"mb-4"},{default:r(()=>[t(l,{md:18,sm:24},{default:r(()=>[t(e.MemberFunnelCard)]),_:1}),t(l,{md:6,sm:24},{default:r(()=>[t(e.MemberTerminalCard)]),_:1})]),_:1}),t(d,{gutter:16},{default:r(()=>[t(l,{md:18,sm:24},{default:r(()=>[t(h,{shadow:"never"},{header:r(()=>[t(e.CardTitle,{title:"\u4F1A\u5458\u5730\u57DF\u5206\u5E03"})]),default:r(()=>[f((c(),b(d,null,{default:r(()=>[t(l,{span:10},{default:r(()=>[t(g,{height:300,options:e.areaChartOptions},null,8,["options"])]),_:1}),t(l,{span:14},{default:r(()=>[t(_,{data:e.areaStatisticsList,height:300},{default:r(()=>[t(m,{"sort-method":(a,o)=>a.areaName.localeCompare(o.areaName,"zh-CN"),align:"center",label:"\u7701\u4EFD","min-width":"80",prop:"areaName","show-overflow-tooltip":"",sortable:""},null,8,["sort-method"]),t(m,{align:"center",label:"\u4F1A\u5458\u6570\u91CF","min-width":"105",prop:"userCount",sortable:""}),t(m,{align:"center",label:"\u8BA2\u5355\u521B\u5EFA\u6570\u91CF","min-width":"135",prop:"orderCreateUserCount",sortable:""}),t(m,{align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u6570\u91CF","min-width":"135",prop:"orderPayUserCount",sortable:""}),t(m,{formatter:e.fenToYuanFormat,align:"center",label:"\u8BA2\u5355\u652F\u4ED8\u91D1\u989D","min-width":"135",prop:"orderPayPrice",sortable:""},null,8,["formatter"])]),_:1},8,["data"])]),_:1})]),_:1})),[[n,e.loading]])]),_:1})]),_:1}),t(l,{md:6,sm:24},{default:r(()=>[f((c(),b(h,{shadow:"never"},{header:r(()=>[t(e.CardTitle,{title:"\u4F1A\u5458\u6027\u522B\u6BD4\u4F8B"})]),default:r(()=>[t(g,{height:300,options:e.sexChartOptions},null,8,["options"])]),_:1})),[[n,e.loading]])]),_:1})]),_:1})])],64)}],["__scopeId","data-v-c0f9ec90"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/statistics/member/index.vue"]]);export{la as default};
