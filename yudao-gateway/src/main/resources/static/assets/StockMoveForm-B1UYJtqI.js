import{bz as i,d as h,g as R,D as j,r as d,f as I,b as L,_ as N,o as M,q as T,w as t,m as x,ah as O,k as l,I as q,Z as C,L as P,v as z,M as A,cq as B,E,O as Z,A as G,B as H,N as J,R as K}from"./index-BaY5TDP-.js";import{_ as Q}from"./Dialog-CZSXtzfQ.js";import{_ as W}from"./ContentWrap-DKQn7kZm.js";import X from"./StockMoveItemForm-CDo2YOW8.js";const y={getStockMovePage:async s=>await i.get({url:"/erp/stock-move/page",params:s}),getStockMove:async s=>await i.get({url:"/erp/stock-move/get?id="+s}),createStockMove:async s=>await i.post({url:"/erp/stock-move/create",data:s}),updateStockMove:async s=>await i.put({url:"/erp/stock-move/update",data:s}),updateStockMoveStatus:async(s,a)=>await i.put({url:"/erp/stock-move/update-status",params:{id:s,status:a}}),deleteStockMove:async s=>await i.delete({url:"/erp/stock-move/delete",params:{ids:s.join(",")}}),exportStockMove:async s=>await i.download({url:"/erp/stock-move/export-excel",params:s})},F=N(h({name:"StockMoveForm",__name:"StockMoveForm",emits:["success"],setup(s,{expose:a,emit:U}){const{t:e}=R(),n=j(),f=d(!1),c=d(""),r=d(!1),m=d(""),u=d({id:void 0,customerId:void 0,moveTime:void 0,remark:void 0,fileUrl:"",items:[]}),S=I({moveTime:[{required:!0,message:"\u8C03\u5EA6\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),V=L(()=>m.value==="detail"),p=d(),w=d("item"),b=d(),k=async(o,D)=>{if(f.value=!0,c.value=e("action."+o),m.value=o,_(),D){r.value=!0;try{u.value=await y.getStockMove(D)}finally{r.value=!1}}};a({open:k});const v=U,_=()=>{var o;u.value={id:void 0,customerId:void 0,moveTime:void 0,remark:void 0,fileUrl:void 0,items:[]},(o=p.value)==null||o.resetFields()},g={t:e,message:n,dialogVisible:f,dialogTitle:c,formLoading:r,formType:m,formData:u,formRules:S,disabled:V,formRef:p,subTabsName:w,itemFormRef:b,open:k,emit:v,submitForm:async()=>{await p.value.validate(),await b.value.validate(),r.value=!0;try{const o=u.value;m.value==="create"?(await y.createStockMove(o),n.success(e("common.createSuccess"))):(await y.updateStockMove(o),n.success(e("common.updateSuccess"))),f.value=!1,v("success")}finally{r.value=!1}},resetForm:_,StockMoveItemForm:X};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(s,a,U,e,n,f){const c=C,r=P,m=z,u=A,S=B,V=E,p=Z,w=G,b=H,k=W,v=J,_=Q,g=K;return M(),T(_,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":a[6]||(a[6]=o=>e.dialogVisible=o),width:"1080"},{footer:t(()=>[e.disabled?O("",!0):(M(),T(v,{key:0,onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:t(()=>a[7]||(a[7]=[x(" \u786E \u5B9A ")])),_:1},8,["disabled"])),l(v,{onClick:a[5]||(a[5]=o=>e.dialogVisible=!1)},{default:t(()=>a[8]||(a[8]=[x("\u53D6 \u6D88")])),_:1})]),default:t(()=>[q((M(),T(p,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"100px",disabled:e.disabled},{default:t(()=>[l(V,{gutter:20},{default:t(()=>[l(m,{span:8},{default:t(()=>[l(r,{label:"\u8C03\u5EA6\u5355\u53F7",prop:"no"},{default:t(()=>[l(c,{disabled:"",modelValue:e.formData.no,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.no=o),placeholder:"\u4FDD\u5B58\u65F6\u81EA\u52A8\u751F\u6210"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"\u8C03\u5EA6\u65F6\u95F4",prop:"moveTime"},{default:t(()=>[l(u,{modelValue:e.formData.moveTime,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.moveTime=o),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u8C03\u5EA6\u65F6\u95F4",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:16},{default:t(()=>[l(r,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[l(c,{type:"textarea",modelValue:e.formData.remark,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.remark=o),rows:1,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1}),l(m,{span:8},{default:t(()=>[l(r,{label:"\u9644\u4EF6",prop:"fileUrl"},{default:t(()=>[l(S,{"is-show-tip":!1,modelValue:e.formData.fileUrl,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.fileUrl=o),limit:1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","disabled"])),[[g,e.formLoading]]),l(k,null,{default:t(()=>[l(b,{modelValue:e.subTabsName,"onUpdate:modelValue":a[4]||(a[4]=o=>e.subTabsName=o),class:"-mt-15px -mb-10px"},{default:t(()=>[l(w,{label:"\u8C03\u5EA6\u4EA7\u54C1\u6E05\u5355",name:"item"},{default:t(()=>[l(e.StockMoveItemForm,{ref:"itemFormRef",items:e.formData.items,disabled:e.disabled},null,8,["items","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/erp/stock/move/StockMoveForm.vue"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{y as S,F as a,Y as b};
