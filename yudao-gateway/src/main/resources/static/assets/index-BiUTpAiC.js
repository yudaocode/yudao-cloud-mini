import{bz as S,d as C,r as k,f as x,C as D,_ as E,o as z,c as R,k as t,w as s,m as i,t as n,F as A,l as I,v as L,E as O,aq as B}from"./index-BaY5TDP-.js";import{_ as P}from"./Echart-BQxFkezy.js";import{E as T,a as U}from"./el-descriptions-item-CRF_CO88.js";import{_ as j}from"./index-BAz6Gqim.js";import"./echarts-DpbyC_6K.js";const g=()=>S.get({url:"/infra/redis/get-monitor-info"}),q=E(C({__name:"index",setup(F,{expose:v}){v();const c=k(),o=async()=>{const r=await g();c.value=r},d=x({title:{text:"\u5185\u5B58\u4F7F\u7528\u60C5\u51B5",left:"center",show:!0,offsetCenter:[0,"20%"],color:"yellow",fontSize:20},toolbox:{show:!1,feature:{restore:{show:!0},saveAsImage:{show:!0}}},series:[{name:"\u5CF0\u503C",type:"gauge",min:0,max:50,splitNumber:10,color:"#F5C74E",radius:"85%",center:["50%","50%"],startAngle:225,endAngle:-45,axisLine:{lineStyle:{color:[[.2,"#7FFF00"],[.8,"#00FFFF"],[1,"#FF0000"]],width:10}},axisTick:{length:5,lineStyle:{color:"#76D9D7"}},splitLine:{length:20,lineStyle:{color:"#76D9D7"}},axisLabel:{color:"#76D9D7",distance:15,fontSize:15},pointer:{width:7,show:!0},detail:{textStyle:{fontWeight:"normal",fontSize:15,color:"#FFFFFF"},valueAnimation:!0},progress:{show:!0}}]}),p=x({title:{text:"\u547D\u4EE4\u7EDF\u8BA1",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{type:"scroll",orient:"vertical",right:30,top:10,bottom:20,data:[],textStyle:{color:"#a1a1a1"}},series:[{name:"\u547D\u4EE4",type:"pie",radius:[20,120],center:["40%","60%"],data:[],roseType:"radius",label:{show:!0},emphasis:{label:{show:!0},itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}),m=()=>{l(),b()},l=async()=>{d.series[0].data=[];try{const r=await g();c.value=r;const f=[],y=[];r.commandStats.forEach(h=>{f.push({name:h.command,value:h.calls}),y.push(h.command)}),p.legend.data=y,p.series[0].data=f}catch{}},b=async()=>{try{const r=await g();c.value=r,d.series[0].detail={show:!0,offsetCenter:[0,"50%"],color:"auto",fontSize:30,formatter:c.value.info.used_memory_human},d.series[0].data[0]={value:c.value.info.used_memory_human,name:"\u5185\u5B58\u6D88\u8017"},console.log(c.value.info),d.tooltip={formatter:"{b} <br/>{a} : "+c.value.info.used_memory_human}}catch{}};D(()=>{o(),m()});const u={cache:c,readRedisInfo:o,usedmemoryEchartChika:d,commandStatsRefChika:p,getSummary:m,initCommandStatsChart:l,usedMemoryInstance:b};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),[["render",function(F,v,c,o,d,p){const m=j,l=T,b=U,u=I,r=L,f=P,y=O,h=B;return z(),R(A,null,[t(m,{title:"Redis \u7F13\u5B58",url:"https://doc.iocoder.cn/redis-cache/"}),t(m,{title:"\u672C\u5730\u7F13\u5B58",url:"https://doc.iocoder.cn/local-cache/"}),t(h,{height:"calc(100vh - 88px - 40px - 50px)"},{default:s(()=>[t(y,null,{default:s(()=>[t(r,{span:24,class:"card-box",shadow:"hover"},{default:s(()=>[t(u,null,{default:s(()=>[t(b,{title:"\u57FA\u672C\u4FE1\u606F",column:6,border:""},{default:s(()=>[t(l,{label:"Redis\u7248\u672C :"},{default:s(()=>{var e,a;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.redis_version),1)]}),_:1}),t(l,{label:"\u8FD0\u884C\u6A21\u5F0F :"},{default:s(()=>{var e,a;return[i(n(((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.redis_mode)=="standalone"?"\u5355\u673A":"\u96C6\u7FA4"),1)]}),_:1}),t(l,{label:"\u7AEF\u53E3 :"},{default:s(()=>{var e,a;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.tcp_port),1)]}),_:1}),t(l,{label:"\u5BA2\u6237\u7AEF\u6570 :"},{default:s(()=>{var e,a;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.connected_clients),1)]}),_:1}),t(l,{label:"\u8FD0\u884C\u65F6\u95F4(\u5929) :"},{default:s(()=>{var e,a;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.uptime_in_days),1)]}),_:1}),t(l,{label:"\u4F7F\u7528\u5185\u5B58 :"},{default:s(()=>{var e,a;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.used_memory_human),1)]}),_:1}),t(l,{label:"\u4F7F\u7528CPU :"},{default:s(()=>{var e,a,_;return[i(n((e=o.cache)!=null&&e.info?parseFloat((_=(a=o.cache)==null?void 0:a.info)==null?void 0:_.used_cpu_user_children).toFixed(2):""),1)]}),_:1}),t(l,{label:"\u5185\u5B58\u914D\u7F6E :"},{default:s(()=>{var e,a;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.maxmemory_human),1)]}),_:1}),t(l,{label:"AOF\u662F\u5426\u5F00\u542F :"},{default:s(()=>{var e,a;return[i(n(((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.aof_enabled)=="0"?"\u5426":"\u662F"),1)]}),_:1}),t(l,{label:"RDB\u662F\u5426\u6210\u529F :"},{default:s(()=>{var e,a;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.rdb_last_bgsave_status),1)]}),_:1}),t(l,{label:"Key\u6570\u91CF :"},{default:s(()=>{var e;return[i(n((e=o.cache)==null?void 0:e.dbSize),1)]}),_:1}),t(l,{label:"\u7F51\u7EDC\u5165\u53E3/\u51FA\u53E3 :"},{default:s(()=>{var e,a,_,w;return[i(n((a=(e=o.cache)==null?void 0:e.info)==null?void 0:a.instantaneous_input_kbps)+"kps/ "+n((w=(_=o.cache)==null?void 0:_.info)==null?void 0:w.instantaneous_output_kbps)+"kps ",1)]}),_:1})]),_:1})]),_:1})]),_:1}),t(r,{span:12,class:"mt-3"},{default:s(()=>[t(u,{gutter:12,shadow:"hover"},{default:s(()=>[t(f,{options:o.commandStatsRefChika,height:420},null,8,["options"])]),_:1})]),_:1}),t(r,{span:12,class:"mt-3"},{default:s(()=>[t(u,{class:"ml-3",gutter:12,shadow:"hover"},{default:s(()=>[t(f,{options:o.usedmemoryEchartChika,height:420},null,8,["options"])]),_:1})]),_:1})]),_:1})]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/infra/redis/index.vue"]]);export{q as default};
