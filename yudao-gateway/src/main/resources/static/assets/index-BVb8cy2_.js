import{d as O,D as Q,g as Y,r as p,f as A,C as E,G as R,U as z,aE as K,_ as H,X as j,o as n,c as T,k as a,w as l,Y as I,F as k,n as D,q as c,m as f,I as x,t as G,J,K as X,L as W,Z,M as B,z as $,N as ee,O as ae,P as te,Q as re,R as le}from"./index-BaY5TDP-.js";import{_ as oe}from"./index-avjYFQiD.js";import{_ as ie}from"./DictTag-QtcI9ZjC.js";import{E as se}from"./el-image-Bg-CwbDE.js";import{_ as ne}from"./ContentWrap-DKQn7kZm.js";import{_ as ue}from"./index-BAz6Gqim.js";import{d as pe}from"./formatTime-Dr6TiYYc.js";import{a as me,d as de}from"./index-a5GtVB2l.js";import ce from"./ArticleForm-BJoUpZ-7.js";import{g as fe}from"./index-FjqAEAGa.js";import{i as ye}from"./spu-BVX48OKx.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./SpuSelect-egfD7fzC.js";import"./el-tree-select-DphqCDCz.js";import"./index-DqlyDc99.js";import"./SkuList-LfTbtJ44.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";const ge=H(O({name:"PromotionArticle",__name:"index",setup(U,{expose:r}){r();const w=Q(),{t:e}=Y(),_=p(!0),q=p(0),h=p([]),m=A({pageNo:1,pageSize:10,categoryId:void 0,title:null,status:void 0,spuId:void 0,createTime:[]}),y=p(),s=async()=>{_.value=!0;try{const i=await me(m);h.value=i.list,q.value=i.total}finally{_.value=!1}},b=()=>{m.pageNo=1,s()},v=p(),d=p([]),u=p([]);E(async()=>{await s(),d.value=await fe(),u.value=await ye()});const P={message:w,t:e,loading:_,total:q,list:h,queryParams:m,queryFormRef:y,imagePreview:i=>{K({urlList:[i]})},getList:s,handleQuery:b,resetQuery:()=>{y.value.resetFields(),b()},formRef:v,openForm:(i,o)=>{v.value.open(i,o)},handleDelete:async i=>{try{await w.delConfirm(),await de(i),w.success(e("common.delSuccess")),await s()}catch{}},categoryList:d,spuList:u,get DICT_TYPE(){return R},get getIntDictOptions(){return z},get dateFormatter(){return pe},ArticleForm:ce};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),[["render",function(U,r,w,e,_,q){const h=ue,m=J,y=X,s=W,b=Z,v=B,d=$,u=ee,P=ae,i=ne,o=te,V=se,F=ie,S=re,L=oe,C=j("hasPermi"),M=le;return n(),T(k,null,[a(h,{title:"\u3010\u8425\u9500\u3011\u5185\u5BB9\u7BA1\u7406",url:"https://doc.iocoder.cn/mall/promotion-content/"}),a(i,null,{default:l(()=>[a(P,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"80px"},{default:l(()=>[a(s,{label:"\u6587\u7AE0\u5206\u7C7B",prop:"categoryId"},{default:l(()=>[a(y,{modelValue:e.queryParams.categoryId,"onUpdate:modelValue":r[0]||(r[0]=t=>e.queryParams.categoryId=t),class:"!w-240px",placeholder:"\u5168\u90E8",onKeyup:I(e.handleQuery,["enter"])},{default:l(()=>[(n(!0),T(k,null,D(e.categoryList,t=>(n(),c(m,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u6587\u7AE0\u6807\u9898",prop:"title"},{default:l(()=>[a(b,{modelValue:e.queryParams.title,"onUpdate:modelValue":r[1]||(r[1]=t=>e.queryParams.title=t),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898",onKeyup:I(e.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),a(s,{label:"\u72B6\u6001",prop:"status"},{default:l(()=>[a(y,{modelValue:e.queryParams.status,"onUpdate:modelValue":r[2]||(r[2]=t=>e.queryParams.status=t),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},{default:l(()=>[(n(!0),T(k,null,D(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),t=>(n(),c(m,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:l(()=>[a(v,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":r[3]||(r[3]=t=>e.queryParams.createTime=t),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),a(s,null,{default:l(()=>[a(u,{onClick:e.handleQuery},{default:l(()=>[a(d,{class:"mr-5px",icon:"ep:search"}),r[7]||(r[7]=f(" \u641C\u7D22 "))]),_:1}),a(u,{onClick:e.resetQuery},{default:l(()=>[a(d,{class:"mr-5px",icon:"ep:refresh"}),r[8]||(r[8]=f(" \u91CD\u7F6E "))]),_:1}),x((n(),c(u,{plain:"",type:"primary",onClick:r[4]||(r[4]=t=>e.openForm("create"))},{default:l(()=>[a(d,{class:"mr-5px",icon:"ep:plus"}),r[9]||(r[9]=f(" \u65B0\u589E "))]),_:1})),[[C,["promotion:article:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(i,null,{default:l(()=>[x((n(),c(S,{data:e.list,"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[a(o,{align:"center",label:"ID","min-width":"180",prop:"id"}),a(o,{align:"center",label:"\u5C01\u9762","min-width":"80",prop:"picUrl"},{default:l(({row:t})=>[a(V,{src:t.picUrl,class:"h-30px w-30px",onClick:g=>e.imagePreview(t.picUrl)},null,8,["src","onClick"])]),_:1}),a(o,{align:"center",label:"\u6807\u9898","min-width":"180",prop:"title"}),a(o,{align:"center",label:"\u5206\u7C7B","min-width":"180",prop:"categoryId"},{default:l(t=>{var g;return[f(G((g=e.categoryList.find(N=>N.id===t.row.categoryId))==null?void 0:g.name),1)]}),_:1}),a(o,{align:"center",label:"\u6D4F\u89C8\u91CF","min-width":"180",prop:"browseCount"}),a(o,{align:"center",label:"\u4F5C\u8005","min-width":"180",prop:"author"}),a(o,{align:"center",label:"\u6587\u7AE0\u7B80\u4ECB","min-width":"250",prop:"introduction"}),a(o,{align:"center",label:"\u6392\u5E8F","min-width":"60",prop:"sort"}),a(o,{align:"center",label:"\u72B6\u6001","min-width":"60",prop:"status"},{default:l(t=>[a(F,{type:e.DICT_TYPE.COMMON_STATUS,value:t.row.status},null,8,["type","value"])]),_:1}),a(o,{formatter:e.dateFormatter,align:"center",label:"\u53D1\u5E03\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(o,{align:"center",fixed:"right",label:"\u64CD\u4F5C",width:"120"},{default:l(t=>[x((n(),c(u,{link:"",type:"primary",onClick:g=>e.openForm("update",t.row.id)},{default:l(()=>r[10]||(r[10]=[f(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[C,["promotion:article:update"]]]),x((n(),c(u,{link:"",type:"danger",onClick:g=>e.handleDelete(t.row.id)},{default:l(()=>r[11]||(r[11]=[f(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[C,["promotion:article:delete"]]])]),_:1})]),_:1},8,["data"])),[[M,e.loading]]),a(L,{limit:e.queryParams.pageSize,"onUpdate:limit":r[5]||(r[5]=t=>e.queryParams.pageSize=t),page:e.queryParams.pageNo,"onUpdate:page":r[6]||(r[6]=t=>e.queryParams.pageNo=t),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),a(e.ArticleForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/article/index.vue"]]);export{ge as default};
