import{bb as W,bc as x,cz as X,bh as ee,d as M,bV as ae,bd as le,bt as se,b as n,dM as ie,dN as te,r as u,bO as p,b$ as oe,au as ne,C as re,o as r,c as d,aS as z,j as q,t as ce,a,a2 as O,F as A,bk as P,ah as y,q as ue,w as de,dO as ve,ao as fe,dP as pe,bq as ye,dQ as me,bN as R,bf as ge,dR as be,dS as we,bl as he}from"./index-BaY5TDP-.js";const Se=W({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:x([String,Object])},previewSrcList:{type:x(Array),default:()=>X([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:x(String)}}),ke={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>ee(t),close:()=>!0,show:()=>!0},xe=M({name:"ElImage",inheritAttrs:!1}),ze=he(ge(M({...xe,props:Se,emits:ke,setup(t,{emit:v}){const l=t;let E="";const{t:T}=ae(),o=le("image"),_=se(),C=n(()=>ie(Object.entries(_).filter(([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))),F=te({excludeListeners:!0,excludeKeys:n(()=>Object.keys(C.value))}),g=u(),f=u(!1),c=u(!0),b=u(!1),m=u(),i=u(),K=p&&"loading"in HTMLImageElement.prototype;let w,h;const Y=n(()=>[o.e("inner"),S.value&&o.e("preview"),c.value&&o.is("loading")]),D=n(()=>{const{fit:e}=l;return p&&e?{objectFit:e}:{}}),S=n(()=>{const{previewSrcList:e}=l;return oe(e)&&e.length>0}),H=n(()=>{const{previewSrcList:e,initialIndex:s}=l;let B=s;return s>e.length-1&&(B=0),B}),L=n(()=>l.loading!=="eager"&&(!K&&l.loading==="lazy"||l.lazy)),k=()=>{p&&(c.value=!0,f.value=!1,g.value=l.src)};function Q(e){c.value=!1,f.value=!1,v("load",e)}function V(e){c.value=!1,f.value=!0,v("error",e)}function N(){be(m.value,i.value)&&(k(),j())}const I=we(N,200,!0);async function $(){var e;if(!p)return;await fe();const{scrollContainer:s}=l;pe(s)?i.value=s:ye(s)&&s!==""?i.value=(e=document.querySelector(s))!=null?e:void 0:m.value&&(i.value=me(m.value)),i.value&&(w=R(i,"scroll",I),setTimeout(()=>N(),100))}function j(){p&&i.value&&I&&(w==null||w(),i.value=void 0)}function Z(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function G(){S.value&&(h=R("wheel",Z,{passive:!1}),E=document.body.style.overflow,document.body.style.overflow="hidden",b.value=!0,v("show"))}function J(){h==null||h(),document.body.style.overflow=E,b.value=!1,v("close")}function U(e){v("switch",e)}return ne(()=>l.src,()=>{L.value?(c.value=!0,f.value=!1,j(),$()):k()}),re(()=>{L.value?$():k()}),(e,s)=>(r(),d("div",P({ref_key:"container",ref:m},a(C),{class:[a(o).b(),e.$attrs.class]}),[f.value?z(e.$slots,"error",{key:0},()=>[q("div",{class:O(a(o).e("error"))},ce(a(T)("el.image.error")),3)]):(r(),d(A,{key:1},[g.value!==void 0?(r(),d("img",P({key:0},a(F),{src:g.value,loading:e.loading,style:a(D),class:a(Y),crossorigin:e.crossorigin,onClick:G,onLoad:Q,onError:V}),null,16,["src","loading","crossorigin"])):y("v-if",!0),c.value?(r(),d("div",{key:1,class:O(a(o).e("wrapper"))},[z(e.$slots,"placeholder",{},()=>[q("div",{class:O(a(o).e("placeholder"))},null,2)])],2)):y("v-if",!0)],64)),a(S)?(r(),d(A,{key:2},[b.value?(r(),ue(a(ve),{key:0,"z-index":e.zIndex,"initial-index":a(H),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:J,onSwitch:U},{default:de(()=>[e.$slots.viewer?(r(),d("div",{key:0},[z(e.$slots,"viewer")])):y("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):y("v-if",!0)],64)):y("v-if",!0)],16))}}),[["__file","image.vue"]]));export{ze as E};
