import{d as g,D as w,ee as h,b as U,r as v,f as S,_ as x,o as m,c as V,j as D,t as I,k as a,w as s,q as j,m as b,E as k,z as L,N as M,cK as A,v as E,bx as P}from"./index-BaY5TDP-.js";import{W}from"./main-KjNEjHxK.js";import O from"./main-BdArqmip.js";import{u as R,U as q}from"./useUpload-Dg-sFRn3.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./main-BdcmYikv.js";import"./el-image-Bg-CwbDE.js";import"./main-DeQxN6ve.js";import"./index-Ci6jvA8Q.js";import"./index-D0l0uLV-.js";import"./formatTime-Dr6TiYYc.js";const z={key:0,class:"select-item2"},C={class:"item-name"},H=x(g({__name:"TabVoice",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(f,{expose:l,emit:y}){l();const e=w(),_={Authorization:"Bearer "+h()},n=f,i=y,o=U({get:()=>n.modelValue,set:t=>i("update:modelValue",t)}),r=v(!1),d=v([]),u=S({accountId:o.value.accountId,type:"voice",title:"",introduction:""}),p=t=>{r.value=!1,o.value.mediaId=t.mediaId,o.value.url=t.url,o.value.name=t.name},c={message:e,UPLOAD_URL:"http://localhost:48080/admin-api/mp/material/upload-temporary",HEADERS:_,props:n,emit:i,reply:o,showDialog:r,fileList:d,uploadData:u,beforeVoiceUpload:t=>R(q.Voice,10)(t),onUploadSuccess:t=>{if(t.code!==0)return e.error("\u4E0A\u4F20\u51FA\u9519\uFF1A"+t.msg),!1;d.value=[],u.title="",u.introduction="",p(t.data)},onDelete:()=>{o.value.mediaId=null,o.value.url=null,o.value.name=null},selectMaterial:p,get WxMaterialSelect(){return W},get WxVoicePlayer(){return O}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(f,l,y,e,_,n){const i=k,o=L,r=M,d=A,u=E,p=P;return m(),V("div",null,[e.reply.url?(m(),V("div",z,[D("p",C,I(e.reply.name),1),a(i,{class:"ope-row",justify:"center"},{default:s(()=>[a(e.WxVoicePlayer,{url:e.reply.url},null,8,["url"])]),_:1}),a(i,{class:"ope-row",justify:"center"},{default:s(()=>[a(r,{type:"danger",circle:"",onClick:e.onDelete},{default:s(()=>[a(o,{icon:"ep:delete"})]),_:1})]),_:1})])):(m(),j(i,{key:1,style:{"text-align":"center"}},{default:s(()=>[a(u,{span:12,class:"col-select"},{default:s(()=>[a(r,{type:"success",onClick:l[0]||(l[0]=c=>e.showDialog=!0)},{default:s(()=>[l[2]||(l[2]=b(" \u7D20\u6750\u5E93\u9009\u62E9")),a(o,{icon:"ep:circle-check"})]),_:1}),a(d,{title:"\u9009\u62E9\u8BED\u97F3",modelValue:e.showDialog,"onUpdate:modelValue":l[1]||(l[1]=c=>e.showDialog=c),width:"90%","append-to-body":"","destroy-on-close":""},{default:s(()=>[a(e.WxMaterialSelect,{type:"voice","account-id":e.reply.accountId,onSelectMaterial:e.selectMaterial},null,8,["account-id"])]),_:1},8,["modelValue"])]),_:1}),a(u,{span:12,class:"col-add"},{default:s(()=>[a(p,{action:e.UPLOAD_URL,headers:e.HEADERS,multiple:"",limit:1,"file-list":e.fileList,data:e.uploadData,"before-upload":e.beforeVoiceUpload,"on-success":e.onUploadSuccess},{tip:s(()=>l[4]||(l[4]=[D("div",{class:"el-upload__tip"}," \u683C\u5F0F\u652F\u6301 mp3/wma/wav/amr\uFF0C\u6587\u4EF6\u5927\u5C0F\u4E0D\u8D85\u8FC7 2M\uFF0C\u64AD\u653E\u957F\u5EA6\u4E0D\u8D85\u8FC7 60s ",-1)])),default:s(()=>[a(r,{type:"primary"},{default:s(()=>l[3]||(l[3]=[b("\u70B9\u51FB\u4E0A\u4F20")])),_:1})]),_:1},8,["file-list","data"])]),_:1})]),_:1}))])}],["__scopeId","data-v-17bdaa79"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mp/components/wx-reply/components/TabVoice.vue"]]);export{H as default};
