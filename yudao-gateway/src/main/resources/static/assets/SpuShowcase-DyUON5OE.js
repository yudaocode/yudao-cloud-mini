import{d as V,b2 as w,p as f,b as x,r as b,au as k,aD as h,_ as y,o as n,c as p,j as d,F as _,n as T,k as o,w as g,I as A,ag as C,q as R,ah as j,z as U,aK as q}from"./index-BaY5TDP-.js";import{E}from"./el-image-Bg-CwbDE.js";import{b as I}from"./spu-BVX48OKx.js";import N from"./SpuTableSelect-CD92PVLd.js";import"./Dialog-CZSXtzfQ.js";import"./ContentWrap-DKQn7kZm.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./el-tree-select-DphqCDCz.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";const z=V({name:"SpuShowcase",__name:"SpuShowcase",props:{modelValue:w([Number,Array]).isRequired,limit:f.number.def(Number.MAX_VALUE),disabled:f.bool.def(!1)},emits:["update:modelValue","change"],setup(m,{expose:r,emit:i}){r();const l=m,S=x(()=>!l.disabled&&(!l.limit||a.value.length<l.limit)),a=b([]);k(()=>l.modelValue,async()=>{const e=h(l.modelValue)?l.modelValue:l.modelValue?[l.modelValue]:[];e.length!==0?(a.value.length===0||a.value.some(v=>!e.includes(v.id)))&&(a.value=await I(e)):a.value=[]},{immediate:!0});const c=b(),u=i,t=()=>{if(l.limit===1){const e=a.value.length>0?a.value[0]:null;u("update:modelValue",(e==null?void 0:e.id)||0),u("change",e)}else u("update:modelValue",a.value.map(e=>e.id)),u("change",a.value)},s={props:l,canAdd:S,productSpus:a,spuTableSelectRef:c,openSpuTableSelect:()=>{c.value.open(a.value)},handleSpuSelected:e=>{a.value=h(e)?e:[e],t()},handleRemoveSpu:e=>{a.value.splice(e,1),t()},emit:u,emitSpuChange:t,SpuTableSelect:N};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),D={class:"flex flex-wrap items-center gap-8px"},F={class:"relative h-full w-full"},K=y(z,[["render",function(m,r,i,l,S,a){const c=E,u=U,t=q;return n(),p(_,null,[d("div",D,[(n(!0),p(_,null,T(l.productSpus,(s,e)=>(n(),p("div",{key:s.id,class:"select-box spu-pic"},[o(t,{content:s.name},{default:g(()=>[d("div",F,[o(c,{src:s.picUrl,class:"h-full w-full"},null,8,["src"]),A(o(u,{class:"del-icon",icon:"ep:circle-close-filled",onClick:v=>l.handleRemoveSpu(e)},null,8,["onClick"]),[[C,!i.disabled]])])]),_:2},1032,["content"])]))),128)),l.canAdd?(n(),R(t,{key:0,content:"\u9009\u62E9\u5546\u54C1"},{default:g(()=>[d("div",{class:"select-box",onClick:l.openSpuTableSelect},[o(u,{icon:"ep:plus"})])]),_:1})):j("",!0)]),o(l.SpuTableSelect,{ref:"spuTableSelectRef",multiple:i.limit!=1,onChange:l.handleSpuSelected},null,8,["multiple"])],64)}],["__scopeId","data-v-b2e1fd2c"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/product/spu/components/SpuShowcase.vue"]]);export{K as default};
