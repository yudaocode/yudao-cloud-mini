import{d as O,g as U,D as h,r as n,f as k,U as I,d$ as R,G as F,_ as q,o as s,q as r,w as o,k as u,m as P,I as w,c as D,F as V,n as T,t as Y,Z as N,L as x,ak as M,al as A,J as B,K as j,O as G,N as J,R as K}from"./index-BaY5TDP-.js";import{_ as Z}from"./Dialog-CZSXtzfQ.js";import{P as E}from"./index-l60I0Cke.js";import{C as $}from"./constants-CEEr2azc.js";const z=q(O({name:"ProcessListenerForm",__name:"ProcessListenerForm",emits:["success"],setup(C,{expose:l,emit:L}){const{t:a}=U(),c=h(),g=n(!1),i=n(""),t=n(!1),v=n(""),m=n({id:void 0,name:void 0,type:void 0,status:void 0,event:void 0,valueType:void 0,value:void 0}),p=k({name:[{required:!0,message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],event:[{required:!0,message:"\u76D1\u542C\u4E8B\u4EF6\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],valueType:[{required:!0,message:"\u503C\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],value:[{required:!0,message:"\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=n(),_=async(e,S)=>{if(g.value=!0,i.value=a("action."+e),v.value=e,b(),S){t.value=!0;try{m.value=await E.getProcessListener(S)}finally{t.value=!1}}};l({open:_});const f=L,b=()=>{var e;m.value={id:void 0,name:void 0,type:void 0,status:$.ENABLE,event:void 0,valueType:void 0,value:void 0},(e=d.value)==null||e.resetFields()},y={t:a,message:c,dialogVisible:g,dialogTitle:i,formLoading:t,formType:v,formData:m,formRules:p,formRef:d,open:_,emit:f,submitForm:async()=>{await d.value.validate(),t.value=!0;try{const e=m.value;v.value==="create"?(await E.createProcessListener(e),c.success(a("common.createSuccess"))):(await E.updateProcessListener(e),c.success(a("common.updateSuccess"))),g.value=!1,f("success")}finally{t.value=!1}},resetForm:b,get getIntDictOptions(){return I},get getStrDictOptions(){return R},get DICT_TYPE(){return F}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(C,l,L,a,c,g){const i=N,t=x,v=M,m=A,p=B,d=j,_=G,f=J,b=Z,y=K;return s(),r(b,{title:a.dialogTitle,modelValue:a.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>a.dialogVisible=e)},{footer:o(()=>[u(f,{onClick:a.submitForm,type:"primary",disabled:a.formLoading},{default:o(()=>l[10]||(l[10]=[P("\u786E \u5B9A")])),_:1},8,["disabled"]),u(f,{onClick:l[8]||(l[8]=e=>a.dialogVisible=!1)},{default:o(()=>l[11]||(l[11]=[P("\u53D6 \u6D88")])),_:1})]),default:o(()=>[w((s(),r(_,{ref:"formRef",model:a.formData,rules:a.formRules,"label-width":"110px"},{default:o(()=>[u(t,{label:"\u540D\u5B57",prop:"name"},{default:o(()=>[u(i,{modelValue:a.formData.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.formData.name=e),placeholder:"\u8BF7\u8F93\u5165\u540D\u5B57"},null,8,["modelValue"])]),_:1}),u(t,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[u(m,{modelValue:a.formData.status,"onUpdate:modelValue":l[1]||(l[1]=e=>a.formData.status=e)},{default:o(()=>[(s(!0),D(V,null,T(a.getIntDictOptions(a.DICT_TYPE.COMMON_STATUS),e=>(s(),r(v,{key:e.value,value:e.value},{default:o(()=>[P(Y(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(t,{label:"\u7C7B\u578B",prop:"type"},{default:o(()=>[u(d,{modelValue:a.formData.type,"onUpdate:modelValue":l[2]||(l[2]=e=>a.formData.type=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B",onChange:l[3]||(l[3]=e=>a.formData.event=void 0)},{default:o(()=>[(s(!0),D(V,null,T(a.getStrDictOptions(a.DICT_TYPE.BPM_PROCESS_LISTENER_TYPE),e=>(s(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(t,{label:"\u4E8B\u4EF6",prop:"event"},{default:o(()=>[u(d,{modelValue:a.formData.event,"onUpdate:modelValue":l[4]||(l[4]=e=>a.formData.event=e),placeholder:"\u8BF7\u9009\u62E9\u4E8B\u4EF6"},{default:o(()=>[(s(!0),D(V,null,T(a.formData.type=="execution"?["start","end"]:["create","assignment","complete","delete","update","timeout"],e=>(s(),r(p,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),u(t,{label:"\u503C\u7C7B\u578B",prop:"valueType"},{default:o(()=>[u(d,{modelValue:a.formData.valueType,"onUpdate:modelValue":l[5]||(l[5]=e=>a.formData.valueType=e),placeholder:"\u8BF7\u9009\u62E9\u503C\u7C7B\u578B"},{default:o(()=>[(s(!0),D(V,null,T(a.getStrDictOptions(a.DICT_TYPE.BPM_PROCESS_LISTENER_VALUE_TYPE),e=>(s(),r(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a.formData.type=="class"?(s(),r(t,{key:0,label:"\u7C7B\u8DEF\u5F84",prop:"value"},{default:o(()=>[u(i,{modelValue:a.formData.value,"onUpdate:modelValue":l[6]||(l[6]=e=>a.formData.value=e),placeholder:"\u8BF7\u8F93\u5165\u7C7B\u8DEF\u5F84"},null,8,["modelValue"])]),_:1})):(s(),r(t,{key:1,label:"\u8868\u8FBE\u5F0F",prop:"value"},{default:o(()=>[u(i,{modelValue:a.formData.value,"onUpdate:modelValue":l[7]||(l[7]=e=>a.formData.value=e),placeholder:"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"},null,8,["modelValue"])]),_:1}))]),_:1},8,["model","rules"])),[[y,a.formLoading]])]),_:1},8,["title","modelValue"])}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/bpm/processListener/ProcessListenerForm.vue"]]);export{z as default};
