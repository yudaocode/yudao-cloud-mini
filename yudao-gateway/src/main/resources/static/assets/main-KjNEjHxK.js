import{bz as v,d as C,r as I,f as W,C as T,_ as j,o,c as s,I as _,F,n as S,j as x,t as E,k as r,w as p,m as b,q as N,ah as U,z as V,N as D,E as O,P as Q,Q as R,R as A}from"./index-BaY5TDP-.js";import{_ as B}from"./index-avjYFQiD.js";import G from"./main-BdcmYikv.js";import H from"./main-BdArqmip.js";import J from"./main-DeQxN6ve.js";import{g as K}from"./index-Ci6jvA8Q.js";import{g as L}from"./index-D0l0uLV-.js";import{d as X}from"./formatTime-Dr6TiYYc.js";var k=(n=>(n.Draft="2",n.Published="1",n))(k||{});const z=n=>v.get({url:"/mp/draft/page",params:n}),Y=(n,t)=>v.post({url:"/mp/draft/create?accountId="+n,data:{articles:t}}),Z=(n,t,P)=>v.put({url:"/mp/draft/update?accountId="+n+"&mediaId="+t,method:"put",data:P}),$=(n,t)=>v.delete({url:"/mp/draft/delete?accountId="+n+"&mediaId="+t}),ee=C({name:"WxMaterialSelect",__name:"main",props:{type:{type:String,required:!0},accountId:{type:Number,required:!0},newsType:{type:String,required:!1,default:k.Published}},emits:["select-material"],setup(n,{expose:t,emit:P}){t();const e=n,q=P,w=I(!1),c=I(0),u=I([]),m=W({pageNo:1,pageSize:10,accountId:e.accountId}),d=async()=>{w.value=!0;try{e.type==="news"&&e.newsType===k.Published?await y():e.type==="news"&&e.newsType===k.Draft?await g():await l()}finally{w.value=!1}},l=async()=>{const i=await K({...m,type:e.type});u.value=i.list,c.value=i.total},y=async()=>{const i=await L(m);i.list.forEach(h=>{h.content.newsItem.forEach(f=>{f.picUrl=f.thumbUrl})}),u.value=i.list,c.value=i.total},g=async()=>{const i=await z(m);i.list.forEach(h=>{h.content.newsItem.forEach(f=>{f.picUrl=f.thumbUrl})}),u.value=i.list,c.value=i.total};T(async()=>{d()});const a={props:e,emit:q,loading:w,total:c,list:u,queryParams:m,selectMaterialFun:i=>{q("select-material",i)},getPage:d,getMaterialPageFun:l,getFreePublishPageFun:y,getDraftPageFun:g,get WxNews(){return G},get WxVoicePlayer(){return H},get WxVideoPlayer(){return J},get dateFormatter(){return X}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),ae={class:"pb-30px"},te={key:0},re={class:"waterfall"},ie=["src"],le={class:"item-name"},ne={key:1},oe={key:2},se={key:3},pe={class:"waterfall"},ce={key:0},M=j(ee,[["render",function(n,t,P,e,q,w){const c=V,u=D,m=O,d=B,l=Q,y=R,g=A;return o(),s("div",ae,[e.props.type==="image"?(o(),s("div",te,[_((o(),s("div",re,[(o(!0),s(F,null,S(e.list,a=>(o(),s("div",{class:"waterfall-item",key:a.mediaId},[x("img",{class:"material-img",src:a.url},null,8,ie),x("p",le,E(a.name),1),r(m,{class:"ope-row"},{default:p(()=>[r(u,{type:"success",onClick:i=>e.selectMaterialFun(a)},{default:p(()=>[t[8]||(t[8]=b(" \u9009\u62E9 ")),r(c,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)]))),128))])),[[g,e.loading]]),r(d,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":t[0]||(t[0]=a=>e.queryParams.pageNo=a),limit:e.queryParams.pageSize,"onUpdate:limit":t[1]||(t[1]=a=>e.queryParams.pageSize=a),onPagination:e.getMaterialPageFun},null,8,["total","page","limit"])])):e.props.type==="voice"?(o(),s("div",ne,[_((o(),N(y,{data:e.list},{default:p(()=>[r(l,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),r(l,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),r(l,{label:"\u8BED\u97F3",align:"center"},{default:p(a=>[r(e.WxVoicePlayer,{url:a.row.url},null,8,["url"])]),_:1}),r(l,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e.dateFormatter},null,8,["formatter"]),r(l,{label:"\u64CD\u4F5C",align:"center",fixed:"right"},{default:p(a=>[r(u,{type:"primary",link:"",onClick:i=>e.selectMaterialFun(a.row)},{default:p(()=>[t[9]||(t[9]=b("\u9009\u62E9 ")),r(c,{icon:"ep:plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[g,e.loading]]),r(d,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":t[2]||(t[2]=a=>e.queryParams.pageNo=a),limit:e.queryParams.pageSize,"onUpdate:limit":t[3]||(t[3]=a=>e.queryParams.pageSize=a),onPagination:e.getPage},null,8,["total","page","limit"])])):e.props.type==="video"?(o(),s("div",oe,[_((o(),N(y,{data:e.list},{default:p(()=>[r(l,{label:"\u7F16\u53F7",align:"center",prop:"mediaId"}),r(l,{label:"\u6587\u4EF6\u540D",align:"center",prop:"name"}),r(l,{label:"\u6807\u9898",align:"center",prop:"title"}),r(l,{label:"\u4ECB\u7ECD",align:"center",prop:"introduction"}),r(l,{label:"\u89C6\u9891",align:"center"},{default:p(a=>[r(e.WxVideoPlayer,{url:a.row.url},null,8,["url"])]),_:1}),r(l,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",prop:"createTime",width:"180",formatter:e.dateFormatter},null,8,["formatter"]),r(l,{label:"\u64CD\u4F5C",align:"center",fixed:"right","class-name":"small-padding fixed-width"},{default:p(a=>[r(u,{type:"primary",link:"",onClick:i=>e.selectMaterialFun(a.row)},{default:p(()=>[t[10]||(t[10]=b("\u9009\u62E9 ")),r(c,{icon:"akar-icons:circle-plus"})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[g,e.loading]]),r(d,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":t[4]||(t[4]=a=>e.queryParams.pageNo=a),limit:e.queryParams.pageSize,"onUpdate:limit":t[5]||(t[5]=a=>e.queryParams.pageSize=a),onPagination:e.getMaterialPageFun},null,8,["total","page","limit"])])):e.props.type==="news"?(o(),s("div",se,[_((o(),s("div",pe,[(o(!0),s(F,null,S(e.list,a=>(o(),s("div",{class:"waterfall-item",key:a.mediaId},[a.content&&a.content.newsItem?(o(),s("div",ce,[r(e.WxNews,{articles:a.content.newsItem},null,8,["articles"]),r(m,{class:"ope-row"},{default:p(()=>[r(u,{type:"success",onClick:i=>e.selectMaterialFun(a)},{default:p(()=>[t[11]||(t[11]=b(" \u9009\u62E9 ")),r(c,{icon:"ep:circle-check"})]),_:2},1032,["onClick"])]),_:2},1024)])):U("",!0)]))),128))])),[[g,e.loading]]),r(d,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":t[6]||(t[6]=a=>e.queryParams.pageNo=a),limit:e.queryParams.pageSize,"onUpdate:limit":t[7]||(t[7]=a=>e.queryParams.pageSize=a),onPagination:e.getMaterialPageFun},null,8,["total","page","limit"])])):U("",!0)])}],["__scopeId","data-v-9e4d45c0"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mp/components/wx-material-select/main.vue"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{M as W,Y as c,$ as d,z as g,ue as m,Z as u};
