import{d as Q,D as F,g as U,r as _,f as S,C as A,_ as R,X as N,o as c,c as P,k as l,w as o,Y as L,m as p,I as u,q as d,t as z,ah as D,F as V,Z as G,L as O,z as j,N as K,O as M,P as X,Q as Y,R as Z}from"./index-BaY5TDP-.js";import{_ as B}from"./index-avjYFQiD.js";import{_ as E}from"./ContentWrap-DKQn7kZm.js";import{_ as H}from"./index-BAz6Gqim.js";import{a as J,d as T,b as W,e as $}from"./index-C1v7IUC9.js";import ee from"./AccountForm-CiiaqRFN.js";import"./index-DrSdAlug.js";import"./Dialog-CZSXtzfQ.js";const ae=["src"],le=R(Q({name:"MpAccount",__name:"index",setup(v,{expose:e}){e();const i=F(),{t:a}=U(),h=_(!0),k=_(0),w=_([]),m=S({pageNo:1,pageSize:10,name:null,account:null,appId:null}),f=_(),s=async()=>{h.value=!0;try{const r=await J(m);w.value=r.list,k.value=r.total}finally{h.value=!1}},t=()=>{m.pageNo=1,s()},C=_();A(()=>{s()});const y={message:i,t:a,loading:h,total:k,list:w,queryParams:m,queryFormRef:f,getList:s,handleQuery:t,resetQuery:()=>{f.value.resetFields(),t()},formRef:C,openForm:(r,b)=>{C.value.open(r,b)},handleDelete:async r=>{try{await i.delConfirm(),await T(r),i.success(a("common.delSuccess")),await s()}catch{}},handleGenerateQrCode:async r=>{try{await i.confirm('\u662F\u5426\u786E\u8BA4\u751F\u6210\u516C\u4F17\u53F7\u8D26\u53F7\u7F16\u53F7\u4E3A"'+r.name+'"\u7684\u4E8C\u7EF4\u7801?'),await W(r.id),i.success("\u751F\u6210\u4E8C\u7EF4\u7801\u6210\u529F"),await s()}catch{}},handleCleanQuota:async r=>{try{await i.confirm('\u662F\u5426\u786E\u8BA4\u6E05\u7A7A\u751F\u6210\u516C\u4F17\u53F7\u8D26\u53F7\u7F16\u53F7\u4E3A"'+r.name+'"\u7684 API \u914D\u989D?'),await $(r.id),i.success("\u6E05\u7A7A API \u914D\u989D\u6210\u529F")}catch{}},AccountForm:ee};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(v,e,i,a,h,k){const w=H,m=G,f=O,s=j,t=K,C=M,y=E,r=X,b=Y,x=B,g=N("hasPermi"),I=Z;return c(),P(V,null,[l(w,{title:"\u516C\u4F17\u53F7\u63A5\u5165",url:"https://doc.iocoder.cn/mp/account/"}),l(y,null,{default:o(()=>[l(C,{class:"-mb-15px",model:a.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:o(()=>[l(f,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[l(m,{modelValue:a.queryParams.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.queryParams.name=n),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",clearable:"",onKeyup:L(a.handleQuery,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(f,null,{default:o(()=>[l(t,{onClick:a.handleQuery},{default:o(()=>[l(s,{icon:"ep:search",class:"mr-5px"}),e[4]||(e[4]=p("\u641C\u7D22"))]),_:1}),l(t,{onClick:a.resetQuery},{default:o(()=>[l(s,{icon:"ep:refresh",class:"mr-5px"}),e[5]||(e[5]=p("\u91CD\u7F6E"))]),_:1}),u((c(),d(t,{type:"primary",onClick:e[1]||(e[1]=n=>a.openForm("create"))},{default:o(()=>[l(s,{icon:"ep:plus",class:"mr-5px"}),e[6]||(e[6]=p(" \u65B0\u589E "))]),_:1})),[[g,["mp:account:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),l(y,null,{default:o(()=>[u((c(),d(b,{data:a.list},{default:o(()=>[l(r,{label:"\u540D\u79F0",align:"center",prop:"name"}),l(r,{label:"\u5FAE\u4FE1\u53F7",align:"center",prop:"account",width:"180"}),l(r,{label:"appId",align:"center",prop:"appId",width:"180"}),l(r,{label:"\u670D\u52A1\u5668\u5730\u5740(URL)",align:"center",prop:"appId",width:"360"},{default:o(n=>[p(z("http://\u670D\u52A1\u7AEF\u5730\u5740/admin-api/mp/open/"+n.row.appId),1)]),_:1}),l(r,{label:"\u4E8C\u7EF4\u7801",align:"center",prop:"qrCodeUrl"},{default:o(n=>[n.row.qrCodeUrl?(c(),P("img",{key:0,src:n.row.qrCodeUrl,alt:"\u4E8C\u7EF4\u7801",style:{display:"inline-block",height:"100px"}},null,8,ae)):D("",!0),u((c(),d(t,{link:"",type:"primary",onClick:q=>a.handleGenerateQrCode(n.row)},{default:o(()=>e[7]||(e[7]=[p(" \u751F\u6210\u4E8C\u7EF4\u7801 ")])),_:2},1032,["onClick"])),[[g,["mp:account:qr-code"]]])]),_:1}),l(r,{label:"\u5907\u6CE8",align:"center",prop:"remark"}),l(r,{label:"\u64CD\u4F5C",align:"center"},{default:o(n=>[u((c(),d(t,{link:"",type:"primary",onClick:q=>a.openForm("update",n.row.id)},{default:o(()=>e[8]||(e[8]=[p(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[g,["mp:account:update"]]]),u((c(),d(t,{link:"",type:"danger",onClick:q=>a.handleDelete(n.row.id)},{default:o(()=>e[9]||(e[9]=[p(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[g,["mp:account:delete"]]]),u((c(),d(t,{link:"",type:"danger",onClick:q=>a.handleCleanQuota(n.row)},{default:o(()=>e[10]||(e[10]=[p(" \u6E05\u7A7A API \u914D\u989D ")])),_:2},1032,["onClick"])),[[g,["mp:account:clear-quota"]]])]),_:1})]),_:1},8,["data"])),[[I,a.loading]]),l(x,{total:a.total,page:a.queryParams.pageNo,"onUpdate:page":e[2]||(e[2]=n=>a.queryParams.pageNo=n),limit:a.queryParams.pageSize,"onUpdate:limit":e[3]||(e[3]=n=>a.queryParams.pageSize=n),onPagination:a.getList},null,8,["total","page","limit"])]),_:1}),l(a.AccountForm,{ref:"formRef",onSuccess:a.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mp/account/index.vue"]]);export{le as default};
