import{d as V,r as g,f as h,G as I,d$ as M,_ as T,o as f,c as x,k as l,w as r,F as P,n as C,q as U,m as q,I as Y,ag as D,L as N,J as k,K as B,Z as A,M as E,z as Q,N as W,O as z,cK as F}from"./index-BaY5TDP-.js";import{_ as O}from"./index-avjYFQiD.js";import{_ as L}from"./ContentWrap-DKQn7kZm.js";import{W as j,g as G}from"./main-B4w8rEKl.js";import{M as H}from"./types-VQvH2Qnl.js";import K from"./main-DuOfDTOL.js";import R from"./MessageTable-0zH29XyQ.js";import"./index-DrSdAlug.js";import"./TabNews-CsSL-hHj.js";import"./main-BdcmYikv.js";import"./el-image-Bg-CwbDE.js";import"./main-KjNEjHxK.js";import"./main-BdArqmip.js";import"./main-DeQxN6ve.js";import"./index-Ci6jvA8Q.js";import"./index-D0l0uLV-.js";import"./formatTime-Dr6TiYYc.js";import"./main-US54NKSx.js";import"./TabText-BH6wUfdj.js";import"./TabImage-dEaedJeg.js";import"./useUpload-Dg-sFRn3.js";import"./TabVoice-C2wi4dha.js";import"./TabVideo-DsHofe_N.js";import"./TabMusic-B3V30vcB.js";import"./MsgList-Ckd30rCW.js";import"./Msg-CEDmhbQ2.js";import"./main-Cf6P5kgZ.js";import"./main-D_67skOp.js";import"./MsgEvent-BdIlr4R1.js";import"./index-DAG8aKkl.js";import"./index-C1v7IUC9.js";import"./tagsView-lnAkwTv2.js";const J=T(V({name:"MpMessage",__name:"index",setup(v,{expose:a}){a();const p=g(!1),e=g(0),y=g([]),t=h({pageNo:1,pageSize:10,openid:"",accountId:-1,type:H.Text,createTime:[]}),u=g(null),i=h({show:!1,userId:0}),n=()=>{t.pageNo=1,d()},d=async()=>{try{p.value=!0;const s=await G(t);y.value=s.list,e.value=s.total}finally{p.value=!1}},c={loading:p,total:e,list:y,queryParams:t,queryFormRef:u,messageBox:i,onAccountChanged:s=>{t.accountId=s,t.pageNo=1,n()},handleQuery:n,getList:d,resetQuery:async()=>{var m;const s=t.accountId;(m=u.value)==null||m.resetFields(),t.accountId=s,n()},handleSend:async s=>{i.userId=s,i.show=!0},get WxMsg(){return j},get WxAccountSelect(){return K},MessageTable:R,get DICT_TYPE(){return I},get getStrDictOptions(){return M}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(v,a,p,e,y,t){const u=N,i=k,n=B,d=A,c=E,s=Q,m=W,b=z,_=L,S=O,w=F;return f(),x(P,null,[l(_,null,{default:r(()=>[l(b,{class:"-mb-15px",model:e.queryParams,ref:"queryFormRef",inline:!0,"label-width":"68px"},{default:r(()=>[l(u,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:r(()=>[l(e.WxAccountSelect,{onChange:e.onAccountChanged})]),_:1}),l(u,{label:"\u6D88\u606F\u7C7B\u578B",prop:"type"},{default:r(()=>[l(n,{modelValue:e.queryParams.type,"onUpdate:modelValue":a[0]||(a[0]=o=>e.queryParams.type=o),placeholder:"\u8BF7\u9009\u62E9\u6D88\u606F\u7C7B\u578B",class:"!w-240px"},{default:r(()=>[(f(!0),x(P,null,C(e.getStrDictOptions(e.DICT_TYPE.MP_MESSAGE_TYPE),o=>(f(),U(i,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"\u7528\u6237\u6807\u8BC6",prop:"openid"},{default:r(()=>[l(d,{modelValue:e.queryParams.openid,"onUpdate:modelValue":a[1]||(a[1]=o=>e.queryParams.openid=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6807\u8BC6",clearable:"","v-on":e.handleQuery,class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(u,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[l(c,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":a[2]||(a[2]=o=>e.queryParams.createTime=o),style:{width:"240px"},"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":["00:00:00","23:59:59"],class:"!w-240px"},null,8,["modelValue"])]),_:1}),l(u,null,{default:r(()=>[l(m,{onClick:e.handleQuery},{default:r(()=>[l(s,{icon:"ep:search",class:"mr-5px"}),a[7]||(a[7]=q(" \u641C\u7D22 "))]),_:1}),l(m,{onClick:e.resetQuery},{default:r(()=>[l(s,{icon:"ep:refresh",class:"mr-5px"}),a[8]||(a[8]=q(" \u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(_,null,{default:r(()=>[l(e.MessageTable,{list:e.list,loading:e.loading,onSend:e.handleSend},null,8,["list","loading"]),Y(l(S,{total:e.total,page:e.queryParams.pageNo,"onUpdate:page":a[3]||(a[3]=o=>e.queryParams.pageNo=o),limit:e.queryParams.pageSize,"onUpdate:limit":a[4]||(a[4]=o=>e.queryParams.pageSize=o),onPagination:e.getList},null,8,["total","page","limit"]),[[D,e.total>0]])]),_:1}),l(w,{title:"\u7C89\u4E1D\u6D88\u606F\u5217\u8868",modelValue:e.messageBox.show,"onUpdate:modelValue":a[5]||(a[5]=o=>e.messageBox.show=o),onClick:a[6]||(a[6]=o=>e.messageBox.show=!0),width:"50%","destroy-on-close":""},{default:r(()=>[l(e.WxMsg,{"user-id":e.messageBox.userId},null,8,["user-id"])]),_:1},8,["modelValue"])],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mp/message/index.vue"]]);export{J as default};
