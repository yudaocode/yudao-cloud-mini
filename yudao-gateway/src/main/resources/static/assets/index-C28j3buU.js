import{d as w,r as f,au as k,aA as T,_ as C,o as r,c as l,F as S,n as R,aF as a,k as h,ah as i,j as d,a2 as m,t as c,q as I}from"./index-BaY5TDP-.js";import{E as B}from"./el-image-Bg-CwbDE.js";import{b as P}from"./spu-BVX48OKx.js";import{e as _}from"./seckillActivity-Cs09fUfF.js";const L=w({name:"PromotionSeckill",__name:"index",props:{property:{type:Object,required:!0}},setup(v,{expose:b}){b();const e=v,p=f([]),u=f([]),y=f([]);k(()=>e.property.activityIds,async()=>{try{const t=e.property.activityIds;Array.isArray(t)&&t.length>0&&(y.value=await _(t),p.value=[],u.value=y.value.map(s=>s.spuId).filter(s=>typeof s=="number"),u.value.length>0&&(p.value=await P(u.value)),y.value.forEach(s=>{const x=p.value.find(g=>g.id===s.spuId);x&&(x.price=Math.min(s.seckillPrice||1/0,x.price||1/0))}))}catch(t){console.error("\u83B7\u53D6\u79D2\u6740\u6D3B\u52A8\u7EC6\u8282\u6216 SPU \u7EC6\u8282\u65F6\u51FA\u9519:",t)}},{immediate:!0,deep:!0});const n=f(),o={props:e,spuList:p,spuIdList:u,seckillActivityList:y,calculateSpace:t=>{const s=e.property.layoutType==="twoCol"?2:1;return{marginLeft:t%s==0?"0":e.property.space+"px",marginTop:t<s?"0":e.property.space+"px"}},containerRef:n,calculateWidth:()=>{let t="100%";return e.property.layoutType==="twoCol"&&(t=(n.value.offsetWidth-e.property.space)/2+"px"),{width:t}},get fenToYuan(){return T}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),$={class:m("box-content min-h-30px w-full flex flex-row flex-wrap"),ref:"containerRef"},U={key:0,class:"absolute left-0 top-0 z-1 items-center justify-center"},j={class:"text-12px"},A={class:"absolute bottom-8px right-8px"},E=C(L,[["render",function(v,b,e,p,u,y){const n=B;return r(),l("div",$,[(r(!0),l(S,null,R(p.spuList,(o,t)=>(r(),l("div",{class:"relative box-content flex flex-row flex-wrap overflow-hidden bg-white",style:a({...p.calculateSpace(t),...p.calculateWidth(),borderTopLeftRadius:`${e.property.borderRadiusTop}px`,borderTopRightRadius:`${e.property.borderRadiusTop}px`,borderBottomLeftRadius:`${e.property.borderRadiusBottom}px`,borderBottomRightRadius:`${e.property.borderRadiusBottom}px`}),key:t},[e.property.badge.show?(r(),l("div",U,[h(n,{fit:"cover",src:e.property.badge.imgUrl,class:"h-26px w-38px"},null,8,["src"])])):i("",!0),d("div",{class:m(["h-140px",{"w-full":e.property.layoutType!=="oneColSmallImg","w-140px":e.property.layoutType==="oneColSmallImg"}])},[h(n,{fit:"cover",class:"h-full w-full",src:o.picUrl},null,8,["src"])],2),d("div",{class:m([" flex flex-col gap-8px p-8px box-border",{"w-full":e.property.layoutType!=="oneColSmallImg","w-[calc(100%-140px-16px)]":e.property.layoutType==="oneColSmallImg"}])},[e.property.fields.name.show?(r(),l("div",{key:0,class:m(["text-14px ",{truncate:e.property.layoutType!=="oneColSmallImg","overflow-ellipsis line-clamp-2":e.property.layoutType==="oneColSmallImg"}]),style:a({color:e.property.fields.name.color})},c(o.name),7)):i("",!0),e.property.fields.introduction.show?(r(),l("div",{key:1,class:"truncate text-12px",style:a({color:e.property.fields.introduction.color})},c(o.introduction),5)):i("",!0),d("div",null,[e.property.fields.price.show?(r(),l("span",{key:0,class:"text-16px",style:a({color:e.property.fields.price.color})}," \uFFE5"+c(p.fenToYuan(o.price||1/0)),5)):i("",!0),e.property.fields.marketPrice.show&&o.marketPrice?(r(),l("span",{key:1,class:"ml-4px text-10px line-through",style:a({color:e.property.fields.marketPrice.color})},"\uFFE5"+c(p.fenToYuan(o.marketPrice)),5)):i("",!0)]),d("div",j,[e.property.fields.salesCount.show?(r(),l("span",{key:0,style:a({color:e.property.fields.salesCount.color})}," \u5DF2\u552E"+c((o.salesCount||0)+(o.virtualSalesCount||0))+"\u4EF6 ",5)):i("",!0),e.property.fields.stock.show?(r(),l("span",{key:1,style:a({color:e.property.fields.stock.color})}," \u5E93\u5B58"+c(o.stock||0),5)):i("",!0)])],2),d("div",A,[e.property.btnBuy.type==="text"?(r(),l("span",{key:0,class:"rounded-full p-x-12px p-y-4px text-12px text-white",style:a({background:`linear-gradient(to right, ${e.property.btnBuy.bgBeginColor}, ${e.property.btnBuy.bgEndColor}`})},c(e.property.btnBuy.text),5)):(r(),I(n,{key:1,class:"h-28px w-28px rounded-full",fit:"cover",src:e.property.btnBuy.imgUrl},null,8,["src"]))])],4))),128))],512)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/components/DiyEditor/components/mobile/PromotionSeckill/index.vue"]]);export{E as default};
