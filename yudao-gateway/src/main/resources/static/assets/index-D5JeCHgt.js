import{d as U,D as Y,g as I,r as y,f as M,C as V,G as N,U as Q,_ as A,X as E,o as i,c as D,k as a,w as o,Y as z,F as S,n as L,q as d,m as c,I as _,ah as H,Z as K,L as j,J as G,K as J,M as X,z as Z,N as B,O as W,P as $,Q as ee,R as ae}from"./index-BaY5TDP-.js";import{_ as te}from"./index-avjYFQiD.js";import{_ as le}from"./DictTag-QtcI9ZjC.js";import{_ as oe}from"./ContentWrap-DKQn7kZm.js";import{_ as re}from"./index-BAz6Gqim.js";import{d as ie}from"./formatTime-Dr6TiYYc.js";import{g as se,R as ne,c as me,d as ue}from"./RewardForm-BfOZdIKQ.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./Dialog-CZSXtzfQ.js";import"./RewardRule-CVWz4Bbl.js";import"./RewardRuleCouponSelect-EE_xVuSI.js";import"./couponTemplate-C5oFUT2R.js";import"./formatter-DYGBdQzW.js";import"./constants-CEEr2azc.js";import"./CouponSelect-InTFkI3y.js";import"./SpuShowcase-DyUON5OE.js";import"./el-image-Bg-CwbDE.js";import"./spu-BVX48OKx.js";import"./SpuTableSelect-CD92PVLd.js";import"./el-tree-select-DphqCDCz.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";import"./ProductCategorySelect-ClWAu1VZ.js";const pe=A(U({name:"PromotionRewardActivity",__name:"index",setup(x,{expose:t}){t();const u=Y(),{t:e}=I(),g=y(!0),T=y(0),w=y([]),v=M({pageNo:1,pageSize:10,name:void 0,status:void 0,createTime:[]}),s=y(),n=async()=>{g.value=!0;try{const r=await se(v);w.value=r.list,T.value=r.total}finally{g.value=!1}},P=()=>{n()},h=y();V(()=>{n()});const p={message:u,t:e,loading:g,total:T,list:w,queryParams:v,queryFormRef:s,getList:n,handleQuery:P,resetQuery:()=>{s.value.resetFields(),P()},formRef:h,openForm:(r,b)=>{var f;(f=h.value)==null||f.open(r,b)},handleClose:async r=>{try{await u.confirm("\u786E\u8BA4\u5173\u95ED\u8BE5\u6EE1\u51CF\u6D3B\u52A8\u5417\uFF1F"),await me(r),u.success("\u5173\u95ED\u6210\u529F"),await n()}catch{}},handleDelete:async r=>{try{await u.delConfirm(),await ue(r),u.success(e("common.delSuccess")),await n()}catch{}},get DICT_TYPE(){return N},get getIntDictOptions(){return Q},get dateFormatter(){return ie},RewardForm:ne};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(x,t,u,e,g,T){const w=re,v=K,s=j,n=G,P=J,h=X,p=Z,r=B,b=W,f=oe,m=$,k=le,F=ee,O=te,C=E("hasPermi"),R=ae;return i(),D(S,null,[a(w,{title:"\u3010\u8425\u9500\u3011\u6EE1\u51CF\u9001",url:"https://doc.iocoder.cn/mall/promotion-record/"}),a(f,null,{default:o(()=>[a(b,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"68px"},{default:o(()=>[a(s,{label:"\u6D3B\u52A8\u540D\u79F0",prop:"name"},{default:o(()=>[a(v,{modelValue:e.queryParams.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.queryParams.name=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u540D\u79F0",onKeyup:z(e.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),a(s,{label:"\u6D3B\u52A8\u72B6\u6001",prop:"status"},{default:o(()=>[a(P,{modelValue:e.queryParams.status,"onUpdate:modelValue":t[1]||(t[1]=l=>e.queryParams.status=l),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6D3B\u52A8\u72B6\u6001"},{default:o(()=>[(i(!0),D(S,null,L(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),l=>(i(),d(n,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"\u6D3B\u52A8\u65F6\u95F4",prop:"createTime"},{default:o(()=>[a(h,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":t[2]||(t[2]=l=>e.queryParams.createTime=l),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px","end-placeholder":"\u6D3B\u52A8\u7ED3\u675F\u65E5\u671F","start-placeholder":"\u6D3B\u52A8\u5F00\u59CB\u65E5\u671F",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),a(s,null,{default:o(()=>[a(r,{onClick:e.handleQuery},{default:o(()=>[a(p,{class:"mr-5px",icon:"ep:search"}),t[6]||(t[6]=c(" \u641C\u7D22 "))]),_:1}),a(r,{onClick:e.resetQuery},{default:o(()=>[a(p,{class:"mr-5px",icon:"ep:refresh"}),t[7]||(t[7]=c(" \u91CD\u7F6E "))]),_:1}),_((i(),d(r,{plain:"",type:"primary",onClick:t[3]||(t[3]=l=>e.openForm("create"))},{default:o(()=>[a(p,{class:"mr-5px",icon:"ep:plus"}),t[8]||(t[8]=c(" \u65B0\u589E "))]),_:1})),[[C,["promotion:reward-activity:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),a(f,null,{default:o(()=>[_((i(),d(F,{data:e.list,"default-expand-all":"","row-key":"id"},{default:o(()=>[a(m,{label:"\u6D3B\u52A8\u540D\u79F0",prop:"name"}),a(m,{label:"\u6D3B\u52A8\u8303\u56F4",prop:"productScope"},{default:o(l=>[a(k,{type:e.DICT_TYPE.PROMOTION_PRODUCT_SCOPE,value:l.row.productScope},null,8,["type","value"])]),_:1}),a(m,{formatter:e.dateFormatter,align:"center",label:"\u6D3B\u52A8\u5F00\u59CB\u65F6\u95F4",prop:"startTime"},null,8,["formatter"]),a(m,{formatter:e.dateFormatter,align:"center",label:"\u6D3B\u52A8\u7ED3\u675F\u65F6\u95F4",prop:"endTime"},null,8,["formatter"]),a(m,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:o(l=>[a(k,{type:e.DICT_TYPE.COMMON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),a(m,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),a(m,{align:"center",label:"\u64CD\u4F5C"},{default:o(l=>[_((i(),d(r,{link:"",type:"primary",onClick:q=>e.openForm("update",l.row.id)},{default:o(()=>t[9]||(t[9]=[c(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[C,["promotion:reward-activity:update"]]]),l.row.status===0?_((i(),d(r,{key:0,link:"",type:"danger",onClick:q=>e.handleClose(l.row.id)},{default:o(()=>t[10]||(t[10]=[c(" \u5173\u95ED ")])),_:2},1032,["onClick"])),[[C,["promotion:reward-activity:close"]]]):H("",!0),_((i(),d(r,{link:"",type:"danger",onClick:q=>e.handleDelete(l.row.id)},{default:o(()=>t[11]||(t[11]=[c(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[C,["promotion:reward-activity:delete"]]])]),_:1})]),_:1},8,["data"])),[[R,e.loading]]),a(O,{limit:e.queryParams.pageSize,"onUpdate:limit":t[4]||(t[4]=l=>e.queryParams.pageSize=l),page:e.queryParams.pageNo,"onUpdate:page":t[5]||(t[5]=l=>e.queryParams.pageNo=l),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),a(e.RewardForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/rewardActivity/index.vue"]]);export{pe as default};
