import{d as S,u as Y,r as c,f as N,C as z,_ as M,o as p,c as f,k as e,w as l,Y as R,m as u,F as P,n as q,q as x,I as j,t as I,ah as A,Z as B,L as H,z as K,N as O,J,K as Z,M as E,dF as W,O as G,P as X,b8 as $,Q as ee,R as ae}from"./index-BaY5TDP-.js";import{_ as te}from"./index-avjYFQiD.js";import{_ as le}from"./ContentWrap-DKQn7kZm.js";import{_ as oe}from"./index-BAz6Gqim.js";import{d as re}from"./formatTime-Dr6TiYYc.js";import{j as se}from"./index-ZFL2ufyC.js";import{C as ne}from"./index-D7iZxFey.js";import"./index-DrSdAlug.js";const ie={key:0,class:"flex flex-col"},de=M(S({name:"BpmTodoTask",__name:"index",setup(C,{expose:t}){t();const{push:b}=Y(),a=c(!0),w=c(0),_=c([]),n=N({pageNo:1,pageSize:10,name:"",category:void 0,createTime:[]}),y=c(),r=c([]),m=async()=>{a.value=!0;try{const d=await se(n);_.value=d.list,w.value=d.total}finally{a.value=!1}},i=c(!1),g=()=>{n.pageNo=1,m()};z(async()=>{await m(),r.value=await ne.getCategorySimpleList()});const h={push:b,loading:a,total:w,list:_,queryParams:n,queryFormRef:y,categoryList:r,getList:m,showPopover:i,handleQuery:g,resetQuery:()=>{y.value.resetFields(),g()},handleAudit:d=>{b({name:"BpmProcessInstanceDetail",query:{id:d.processInstance.id,taskId:d.id}})},get dateFormatter(){return re}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),[["render",function(C,t,b,a,w,_){const n=oe,y=B,r=H,m=K,i=O,g=J,h=Z,d=E,V=W,F=G,k=le,s=X,Q=$,T=ee,U=te,L=ae;return p(),f(P,null,[e(n,{title:"\u5BA1\u6279\u901A\u8FC7\u3001\u4E0D\u901A\u8FC7\u3001\u9A73\u56DE",url:"https://doc.iocoder.cn/bpm/task-todo-done/"}),e(n,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(n,{title:"\u5BA1\u6279\u8F6C\u529E\u3001\u59D4\u6D3E\u3001\u6284\u9001",url:"https://doc.iocoder.cn/bpm/task-delegation-and-cc/"}),e(n,{title:"\u5BA1\u6279\u52A0\u7B7E\u3001\u51CF\u7B7E",url:"https://doc.iocoder.cn/bpm/sign/"}),e(k,null,{default:l(()=>[e(F,{ref:"queryFormRef",inline:!0,model:a.queryParams,class:"-mb-15px","label-width":"68px"},{default:l(()=>[e(r,{label:"",prop:"name"},{default:l(()=>[e(y,{modelValue:a.queryParams.name,"onUpdate:modelValue":t[0]||(t[0]=o=>a.queryParams.name=o),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",onKeyup:R(a.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),e(r,null,{default:l(()=>[e(i,{onClick:a.handleQuery},{default:l(()=>[e(m,{class:"mr-5px",icon:"ep:search"}),t[7]||(t[7]=u(" \u641C\u7D22 "))]),_:1})]),_:1}),e(r,{label:"",prop:"category",style:{position:"absolute",right:"130px"}},{default:l(()=>[e(h,{modelValue:a.queryParams.category,"onUpdate:modelValue":t[1]||(t[1]=o=>a.queryParams.category=o),placeholder:"\u8BF7\u9009\u62E9\u6D41\u7A0B\u5206\u7C7B",clearable:"",class:"!w-155px",onChange:a.handleQuery},{default:l(()=>[(p(!0),f(P,null,q(a.categoryList,o=>(p(),x(g,{key:o.code,label:o.name,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(r,{style:{position:"absolute",right:"0px"}},{default:l(()=>[e(V,{visible:a.showPopover,persistent:"",width:400,"show-arrow":!1,placement:"bottom-end"},{reference:l(()=>[e(i,{onClick:t[2]||(t[2]=o=>a.showPopover=!a.showPopover)},{default:l(()=>[e(m,{icon:"ep:plus",class:"mr-5px"}),t[8]||(t[8]=u("\u9AD8\u7EA7\u7B5B\u9009 "))]),_:1})]),default:l(()=>[e(r,{label:"\u53D1\u8D77\u65F6\u95F4",class:"bold-label","label-position":"top",prop:"createTime"},{default:l(()=>[e(d,{modelValue:a.queryParams.createTime,"onUpdate:modelValue":t[3]||(t[3]=o=>a.queryParams.createTime=o),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(r,{class:"bold-label","label-position":"top"},{default:l(()=>[e(i,{onClick:a.handleQuery},{default:l(()=>t[9]||(t[9]=[u(" \u786E\u8BA4")])),_:1}),e(i,{onClick:t[4]||(t[4]=o=>a.showPopover=!1)},{default:l(()=>t[10]||(t[10]=[u(" \u53D6\u6D88")])),_:1}),e(i,{onClick:a.resetQuery},{default:l(()=>t[11]||(t[11]=[u(" \u6E05\u7A7A")])),_:1})]),_:1})]),_:1},8,["visible"])]),_:1})]),_:1},8,["model"])]),_:1}),e(k,null,{default:l(()=>[j((p(),x(T,{data:a.list},{default:l(()=>[e(s,{align:"center",label:"\u6D41\u7A0B",prop:"processInstance.name",width:"180"}),e(s,{label:"\u6458\u8981",prop:"processInstance.summary","min-width":"180"},{default:l(o=>[o.row.processInstance.summary&&o.row.processInstance.summary.length>0?(p(),f("div",ie,[(p(!0),f(P,null,q(o.row.processInstance.summary,(v,D)=>(p(),f("div",{key:D},[e(Q,{type:"info"},{default:l(()=>[u(I(v.key)+" : "+I(v.value),1)]),_:2},1024)]))),128))])):A("",!0)]),_:1}),e(s,{align:"center",label:"\u53D1\u8D77\u4EBA",prop:"processInstance.startUser.nickname",width:"100"}),e(s,{formatter:a.dateFormatter,align:"center",label:"\u53D1\u8D77\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",label:"\u5F53\u524D\u4EFB\u52A1",prop:"name",width:"180"}),e(s,{formatter:a.dateFormatter,align:"center",label:"\u4EFB\u52A1\u65F6\u95F4",prop:"createTime",width:"180"},null,8,["formatter"]),e(s,{align:"center",label:"\u6D41\u7A0B\u7F16\u53F7",prop:"processInstanceId","show-overflow-tooltip":!0}),e(s,{align:"center",label:"\u4EFB\u52A1\u7F16\u53F7",prop:"id","show-overflow-tooltip":!0}),e(s,{align:"center",label:"\u64CD\u4F5C",fixed:"right",width:"80"},{default:l(o=>[e(i,{link:"",type:"primary",onClick:v=>a.handleAudit(o.row)},{default:l(()=>t[12]||(t[12]=[u("\u529E\u7406")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,a.loading]]),e(U,{limit:a.queryParams.pageSize,"onUpdate:limit":t[5]||(t[5]=o=>a.queryParams.pageSize=o),page:a.queryParams.pageNo,"onUpdate:page":t[6]||(t[6]=o=>a.queryParams.pageNo=o),total:a.total,onPagination:a.getList},null,8,["limit","page","total"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/bpm/task/todo/index.vue"]]);export{de as default};
