import{d as C,g as L,D as A,r as i,f as N,C as E,G as H,H as P,U as x,_ as Y,o as s,c as b,k as l,w as o,m as n,I as G,q as v,F as V,n as O,t as R,ah as j,Z as M,L as J,v as K,J as W,K as Z,co as z,cf as Q,ak as X,al as $,an as ee,N as ae,cn as le,E as oe,O as te,R as re}from"./index-BaY5TDP-.js";import{_ as ue}from"./Dialog-CZSXtzfQ.js";import{g as de,c as se,u as ie}from"./index-a5GtVB2l.js";import{g as me}from"./index-FjqAEAGa.js";import{i as ne}from"./spu-BVX48OKx.js";import pe from"./SpuSelect-egfD7fzC.js";import"./el-image-Bg-CwbDE.js";import"./SkuList-LfTbtJ44.js";import"./ContentWrap-DKQn7kZm.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./el-tree-select-DphqCDCz.js";import"./index-DqlyDc99.js";import"./formatTime-Dr6TiYYc.js";import"./tree-z7HkrWVC.js";import"./category-B7jjsMOS.js";const ce=Y(C({name:"PromotionArticleForm",__name:"ArticleForm",emits:["success"],setup(q,{expose:t,emit:k}){const{t:e}=L(),D=A(),y=i(!1),p=i(""),r=i(!1),u=i(""),m=i({id:void 0,categoryId:void 0,title:void 0,author:void 0,picUrl:void 0,introduction:void 0,sort:0,status:0,spuId:0,recommendHot:!1,recommendBanner:!1,content:void 0}),B=N({categoryId:[{required:!0,message:"\u5206\u7C7Bid\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],title:[{required:!0,message:"\u6587\u7AE0\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],picUrl:[{required:!0,message:"\u6587\u7AE0\u5C01\u9762\u56FE\u7247\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],spuId:[{required:!0,message:"\u5546\u54C1\u5173\u8054id\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],recommendHot:[{required:!0,message:"\u662F\u5426\u70ED\u95E8(\u5C0F\u7A0B\u5E8F)\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],recommendBanner:[{required:!0,message:"\u662F\u5426\u8F6E\u64AD\u56FE(\u5C0F\u7A0B\u5E8F)\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u6587\u7AE0\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=i(),F=i(),f=async(d,S)=>{if(y.value=!0,p.value=e("action."+d),u.value=d,I(),S){r.value=!0;try{m.value=await de(S)}finally{r.value=!1}}};t({open:f});const g=k,I=()=>{var d;m.value={id:void 0,categoryId:void 0,title:void 0,author:void 0,picUrl:void 0,introduction:void 0,sort:0,status:0,spuId:0,recommendHot:!1,recommendBanner:!1,content:void 0},(d=c.value)==null||d.resetFields()},_=i([]),U=i([]);E(async()=>{_.value=await me(),U.value=await ne()});const h={t:e,message:D,dialogVisible:y,dialogTitle:p,formLoading:r,formType:u,formData:m,formRules:B,formRef:c,spuSelectRef:F,selectSpu:d=>{m.value.spuId=d},open:f,emit:g,submitForm:async()=>{if(c&&await c.value.validate()){r.value=!0;try{const d=m.value;u.value==="create"?(await se(d),D.success(e("common.createSuccess"))):(await ie(d),D.success(e("common.updateSuccess"))),y.value=!1,g("success")}finally{r.value=!1}}},resetForm:I,categoryList:_,spuList:U,get DICT_TYPE(){return H},get getBoolDictOptions(){return P},get getIntDictOptions(){return x},get SpuSelect(){return pe}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),[["render",function(q,t,k,e,D,y){const p=M,r=J,u=K,m=W,B=Z,c=z,F=Q,f=X,g=$,I=ee,_=ae,U=le,h=oe,d=te,S=ue,w=re;return s(),b(V,null,[l(S,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[12]||(t[12]=a=>e.dialogVisible=a),title:e.dialogTitle,width:"70%"},{footer:o(()=>[l(_,{disabled:e.formLoading,type:"primary",onClick:e.submitForm},{default:o(()=>t[14]||(t[14]=[n("\u786E \u5B9A")])),_:1},8,["disabled"]),l(_,{onClick:t[11]||(t[11]=a=>e.dialogVisible=!1)},{default:o(()=>t[15]||(t[15]=[n("\u53D6 \u6D88")])),_:1})]),default:o(()=>[G((s(),v(d,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"110px"},{default:o(()=>[l(h,null,{default:o(()=>[l(u,{span:12},{default:o(()=>[l(r,{label:"\u6587\u7AE0\u6807\u9898",prop:"title"},{default:o(()=>[l(p,{modelValue:e.formData.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.formData.title=a),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:o(()=>[l(r,{label:"\u6587\u7AE0\u5206\u7C7B",prop:"categoryId"},{default:o(()=>[l(B,{modelValue:e.formData.categoryId,"onUpdate:modelValue":t[1]||(t[1]=a=>e.formData.categoryId=a),placeholder:"\u8BF7\u9009\u62E9"},{default:o(()=>[(s(!0),b(V,null,O(e.categoryList,a=>(s(),v(m,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:o(()=>[l(r,{label:"\u6587\u7AE0\u4F5C\u8005",prop:"author"},{default:o(()=>[l(p,{modelValue:e.formData.author,"onUpdate:modelValue":t[2]||(t[2]=a=>e.formData.author=a),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u4F5C\u8005"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:o(()=>[l(r,{label:"\u6587\u7AE0\u7B80\u4ECB",prop:"introduction"},{default:o(()=>[l(p,{modelValue:e.formData.introduction,"onUpdate:modelValue":t[3]||(t[3]=a=>e.formData.introduction=a),placeholder:"\u8BF7\u8F93\u5165\u6587\u7AE0\u7B80\u4ECB"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:o(()=>[l(r,{label:"\u6587\u7AE0\u5C01\u9762",prop:"picUrl"},{default:o(()=>[l(c,{modelValue:e.formData.picUrl,"onUpdate:modelValue":t[4]||(t[4]=a=>e.formData.picUrl=a),height:"80px"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:o(()=>[l(r,{label:"\u6392\u5E8F",prop:"sort"},{default:o(()=>[l(F,{modelValue:e.formData.sort,"onUpdate:modelValue":t[5]||(t[5]=a=>e.formData.sort=a),min:0,clearable:"","controls-position":"right"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:o(()=>[l(r,{label:"\u72B6\u6001",prop:"status"},{default:o(()=>[l(g,{modelValue:e.formData.status,"onUpdate:modelValue":t[6]||(t[6]=a=>e.formData.status=a)},{default:o(()=>[(s(!0),b(V,null,O(e.getIntDictOptions(e.DICT_TYPE.COMMON_STATUS),a=>(s(),v(f,{key:a.value,value:a.value},{default:o(()=>[n(R(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:o(()=>[l(r,{label:"\u662F\u5426\u70ED\u95E8",prop:"recommendHot"},{default:o(()=>[l(g,{modelValue:e.formData.recommendHot,"onUpdate:modelValue":t[7]||(t[7]=a=>e.formData.recommendHot=a)},{default:o(()=>[(s(!0),b(V,null,O(e.getBoolDictOptions(e.DICT_TYPE.INFRA_BOOLEAN_STRING),a=>(s(),v(f,{key:a.value,value:a.value},{default:o(()=>[n(R(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:12},{default:o(()=>[l(r,{label:"\u662F\u5426\u8F6E\u64AD\u56FE",prop:"recommendBanner"},{default:o(()=>[l(g,{modelValue:e.formData.recommendBanner,"onUpdate:modelValue":t[8]||(t[8]=a=>e.formData.recommendBanner=a)},{default:o(()=>[(s(!0),b(V,null,O(e.getBoolDictOptions(e.DICT_TYPE.INFRA_BOOLEAN_STRING),a=>(s(),v(f,{key:a.value,value:a.value},{default:o(()=>[n(R(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{span:24},{default:o(()=>[l(r,{label:"\u5546\u54C1\u5173\u8054",prop:"spuId"},{default:o(()=>[e.formData.spuId?(s(),v(I,{key:0,class:"mr-10px"},{default:o(()=>{var a;return[n(R((a=e.spuList.find(T=>T.id===e.formData.spuId))==null?void 0:a.name),1)]}),_:1})):j("",!0),l(_,{onClick:t[9]||(t[9]=a=>{var T;return(T=e.spuSelectRef)==null?void 0:T.open()})},{default:o(()=>t[13]||(t[13]=[n("\u9009\u62E9\u5546\u54C1")])),_:1})]),_:1})]),_:1}),l(u,{span:24},{default:o(()=>[l(r,{label:"\u6587\u7AE0\u5185\u5BB9"},{default:o(()=>[l(U,{modelValue:e.formData.content,"onUpdate:modelValue":t[10]||(t[10]=a=>e.formData.content=a),height:"150px"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[w,e.formLoading]])]),_:1},8,["modelValue","title"]),l(e.SpuSelect,{ref:"spuSelectRef",onConfirm:e.selectSpu},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/article/ArticleForm.vue"]]);export{ce as default};
