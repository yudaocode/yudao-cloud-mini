import{d as h,g as F,D,r as y,f as q,au as C,_ as I,X as S,o as p,c as x,k as s,w as l,I as _,q as v,m as k,F as N,z as L,N as z,P as G,Q as R,R as U}from"./index-BaY5TDP-.js";import{_ as j}from"./ContentWrap-DKQn7kZm.js";import{_ as Q}from"./index-avjYFQiD.js";import{d as O}from"./formatTime-Dr6TiYYc.js";import{k as T,l as X}from"./index-DmE3xvm5.js";import A from"./Demo03GradeForm-Bi66bQ0V.js";import"./index-DrSdAlug.js";import"./Dialog-CZSXtzfQ.js";const B=I(h({__name:"Demo03GradeList",props:{studentId:{type:Number,required:!1}},setup(P,{expose:a}){a();const{t:w}=F(),e=D(),d=P,u=y(!1),c=y([]),n=y(0),o=q({pageNo:1,pageSize:10,studentId:void 0});C(()=>d.studentId,t=>{t&&(o.studentId=t,f())},{immediate:!0,deep:!0});const m=async()=>{u.value=!0;try{const t=await T(o);c.value=t.list,n.value=t.total}finally{u.value=!1}},f=()=>{o.pageNo=1,m()},g=y(),i={t:w,message:e,props:d,loading:u,list:c,total:n,queryParams:o,getList:m,handleQuery:f,formRef:g,openForm:(t,r)=>{d.studentId?g.value.open(t,r,d.studentId):e.error("\u8BF7\u9009\u62E9\u4E00\u4E2A\u5B66\u751F")},handleDelete:async t=>{try{await e.delConfirm(),await X(t),e.success(w("common.delSuccess")),await m()}catch{}},get dateFormatter(){return O},Demo03GradeForm:A};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),[["render",function(P,a,w,e,d,u){const c=L,n=z,o=G,m=R,f=Q,g=j,i=S("hasPermi"),t=U;return p(),x(N,null,[s(g,null,{default:l(()=>[_((p(),v(n,{plain:"",type:"primary",onClick:a[0]||(a[0]=r=>e.openForm("create"))},{default:l(()=>[s(c,{class:"mr-5px",icon:"ep:plus"}),a[3]||(a[3]=k(" \u65B0\u589E "))]),_:1})),[[i,["infra:demo03-student:create"]]]),_((p(),v(m,{data:e.list,"show-overflow-tooltip":!0,stripe:!0},{default:l(()=>[s(o,{align:"center",label:"\u7F16\u53F7",prop:"id"}),s(o,{align:"center",label:"\u540D\u5B57",prop:"name"}),s(o,{align:"center",label:"\u73ED\u4E3B\u4EFB",prop:"teacher"}),s(o,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),s(o,{align:"center",label:"\u64CD\u4F5C"},{default:l(r=>[_((p(),v(n,{link:"",type:"primary",onClick:b=>e.openForm("update",r.row.id)},{default:l(()=>a[4]||(a[4]=[k(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[i,["infra:demo03-student:update"]]]),_((p(),v(n,{link:"",type:"danger",onClick:b=>e.handleDelete(r.row.id)},{default:l(()=>a[5]||(a[5]=[k(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[i,["infra:demo03-student:delete"]]])]),_:1})]),_:1},8,["data"])),[[t,e.loading]]),s(f,{limit:e.queryParams.pageSize,"onUpdate:limit":a[1]||(a[1]=r=>e.queryParams.pageSize=r),page:e.queryParams.pageNo,"onUpdate:page":a[2]||(a[2]=r=>e.queryParams.pageNo=r),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),s(e.Demo03GradeForm,{ref:"formRef",onSuccess:e.getList},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/infra/demo/demo03/erp/components/Demo03GradeList.vue"]]);export{B as default};
