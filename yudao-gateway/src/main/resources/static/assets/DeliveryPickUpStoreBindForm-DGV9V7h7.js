import{d as V,D as C,r as u,f as I,G as F,_ as P,X as x,o as y,c as R,k as l,w as r,m as _,I as k,q as U,ah as L,F as O,Z as E,L as B,v as M,E as j,N as A,P as N,Q as Y,O as q,R as G}from"./index-BaY5TDP-.js";import{_ as Q}from"./Dialog-CZSXtzfQ.js";import{_ as X}from"./ContentWrap-DKQn7kZm.js";import{_ as Z}from"./DictTag-QtcI9ZjC.js";import{g as z,b as H}from"./index-BuoBEkWu.js";import J from"./StoreStaffTableSelect-Bp2EYmnA.js";import"./color-BN7ZL7BD.js";import"./index-avjYFQiD.js";import"./index-DrSdAlug.js";import"./formatTime-Dr6TiYYc.js";import"./index-CuAlllbQ.js";import"./DeptTree-BfFcmnO_.js";import"./index-dK17nfjs.js";import"./tree-z7HkrWVC.js";const K=P(V({__name:"DeliveryPickUpStoreBindForm",setup(h,{expose:a}){const b=C(),e=u(!1),S=u(""),n=u(!1),t=u({id:void 0,name:"",verifyUserIds:[],verifyUsers:[]}),p=I({}),s=u(),v=u(),d=async i=>{e.value=!0,S.value="\u7ED1\u5B9A\u81EA\u63D0\u95E8\u5E97\u5458\u5DE5",f(),n.value=!0;try{t.value=await z(i)}finally{n.value=!1}};a({open:d});const f=()=>{var i;t.value={id:void 0,name:"",verifyUserIds:[],verifyUsers:[]},(i=s.value)==null||i.resetFields()},c={message:b,dialogVisible:e,dialogTitle:S,formLoading:n,formData:t,formRules:p,formRef:s,storeStaffTableSelect:v,open:d,submitForm:async()=>{if(s&&await s.value.validate()){n.value=!0;try{const i={id:t.value.id,verifyUserIds:t.value.verifyUsers.map(m=>m.id)};await H(i),b.success("\u7ED1\u5B9A\u6210\u529F"),e.value=!1}finally{n.value=!1}}},handleSelect:i=>{t.value.verifyUsers=i},handleDelete:async i=>{const m=t.value.verifyUsers.findIndex(g=>{if(g.id==i)return!0});t.value.verifyUsers.splice(m,1)},resetForm:f,StoreStaffTableSelect:J,get DICT_TYPE(){return F}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(h,a,b,e,S,n){const t=E,p=B,s=M,v=j,d=A,f=N,c=Z,i=Y,m=X,g=q,D=Q,T=x("hasPermi"),w=G;return y(),R(O,null,[l(D,{title:e.dialogTitle,modelValue:e.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=o=>e.dialogVisible=o),width:"20%"},{footer:r(()=>[l(d,{onClick:e.submitForm,type:"primary",disabled:e.formLoading},{default:r(()=>a[6]||(a[6]=[_("\u786E \u5B9A")])),_:1},8,["disabled"]),l(d,{onClick:a[2]||(a[2]=o=>e.dialogVisible=!1)},{default:r(()=>a[7]||(a[7]=[_("\u53D6 \u6D88")])),_:1})]),default:r(()=>[k((y(),U(g,{ref:"formRef",model:e.formData,rules:e.formRules,"label-width":"120px"},{default:r(()=>[l(v,null,{default:r(()=>[l(s,{span:24},{default:r(()=>[l(p,{label:"\u95E8\u5E97\u540D\u79F0",prop:"name"},{default:r(()=>[l(t,{modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.name=o),placeholder:"\u8BF7\u8F93\u5165\u95E8\u5E97\u540D\u79F0",readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(v,null,{default:r(()=>[l(s,{span:24},{default:r(()=>[l(p,{label:"\u95E8\u5E97\u5E97\u5458",prop:"verifyUserIds"},{default:r(()=>[l(d,{type:"primary",onClick:a[1]||(a[1]=o=>e.storeStaffTableSelect.open())},{default:r(()=>a[4]||(a[4]=[_("\u9009\u62E9\u5E97\u5458")])),_:1})]),_:1}),e.formData.verifyUsers.length>0?(y(),U(m,{key:0},{default:r(()=>[l(i,{data:e.formData.verifyUsers},{default:r(()=>[l(f,{label:"\u7F16\u53F7",align:"center",prop:"id"}),l(f,{label:"\u7528\u6237\u6635\u79F0",align:"center",prop:"nickname","show-overflow-tooltip":!0}),l(f,{label:"\u72B6\u6001",align:"center",key:"status"},{default:r(o=>[l(c,{type:e.DICT_TYPE.COMMON_STATUS,value:o.row.status},null,8,["type","value"])]),_:1}),l(f,{align:"center",label:"\u64CD\u4F5C"},{default:r(o=>[k((y(),U(d,{link:"",type:"danger",onClick:W=>e.handleDelete(o.row.id)},{default:r(()=>a[5]||(a[5]=[_(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[T,["trade:delivery:pick-up-store:delete"]]])]),_:1})]),_:1},8,["data"])]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[w,e.formLoading]])]),_:1},8,["title","modelValue"]),l(e.StoreStaffTableSelect,{ref:"storeStaffTableSelect",onChange:e.handleSelect},null,512)],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/trade/delivery/pickUpStore/DeliveryPickUpStoreBindForm.vue"]]);export{K as default};
