import{d as k,D as Y,r as p,f as O,C as A,eI as L,aA as f,cv as V,_ as D,X as I,o as T,c as j,k as o,j as w,w as c,I as E,q as X,m as q,F as z,v as F,E as G,z as N,N as U,l as Z}from"./index-BaY5TDP-.js";import{E as B}from"./el-skeleton-item-BYAIkmCs.js";import{_ as H}from"./Echart-BQxFkezy.js";import{_ as J}from"./index-BYWVnEtA.js";import{_ as K}from"./index-BAz6Gqim.js";import{c as M,d as Q,e as W,f as $}from"./trade-BIMVgidL.js";import ee from"./TradeStatisticValue-CJZNfOmx.js";import{S as ae}from"./index-DYEmSFQB.js";import{d as te}from"./download-oWiM5xVU.js";import{C as re}from"./CardTitle-Z2xLAPly.js";import{n as le,f as ie}from"./formatTime-Dr6TiYYc.js";import"./echarts-DpbyC_6K.js";import"./CountTo-DJpCwbFz.js";const ne={class:"flex flex-col"},oe={class:"flex flex-row items-center justify-between"},ce=D(k({name:"TradeStatistics",__name:"index",setup(C,{expose:v}){v();const _=Y(),e=p(!0),g=p(!1),R=p(),P=p(),s=p(),d=O({dataset:{dimensions:["date","turnoverPrice","orderPayPrice","rechargePrice","expensePrice"],source:[]},grid:{left:20,right:20,bottom:20,top:80,containLabel:!0},legend:{top:50},series:[{name:"\u8425\u4E1A\u989D",type:"line",smooth:!0},{name:"\u5546\u54C1\u652F\u4ED8\u91D1\u989D",type:"line",smooth:!0},{name:"\u5145\u503C\u91D1\u989D",type:"line",smooth:!0},{name:"\u652F\u51FA\u91D1\u989D",type:"line",smooth:!0}],toolbox:{feature:{dataZoom:{yAxisIndex:!1},brush:{type:["lineX","clear"]},saveAsImage:{show:!0,name:"\u4EA4\u6613\u72B6\u51B5"}}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},xAxis:{type:"category",boundaryGap:!1,axisTick:{show:!1}},yAxis:{axisTick:{show:!1}}}),x=async()=>{R.value=await M()},S=async()=>{const u=s.value.times;P.value=await Q({times:u})},h=async()=>{const u=s.value.times,y=await W({times:u});for(let m of y)m.turnoverPrice=f(m.turnoverPrice),m.orderPayPrice=f(m.orderPayPrice),m.rechargePrice=f(m.rechargePrice),m.expensePrice=f(m.expensePrice);d.dataset&&d.dataset.source&&(d.dataset.source=y)};A(async()=>{await x()});const b={message:_,trendLoading:e,exportLoading:g,summary:R,trendSummary:P,shortcutDateRangePicker:s,lineChartOptions:d,getTradeTrendData:async()=>{e.value=!0;const u=s.value.times;le(u[0],u[1])&&(u[0]=ie(V(u[0]).subtract(1,"d"))),await Promise.all([S(),h()]),e.value=!1},getTradeStatisticsSummary:x,getTradeStatisticsAnalyse:S,getTradeStatisticsList:h,handleExport:async()=>{try{await _.exportConfirm(),g.value=!0;const u=s.value.times,y=await $({times:u});te.excel(y,"\u4EA4\u6613\u72B6\u51B5.xls")}catch{}finally{g.value=!1}},TradeStatisticValue:ee,SummaryCard:ae,get calculateRelativeRate(){return L},get fenToYuan(){return f},get CardTitle(){return re}};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),[["render",function(C,v,_,e,g,R){const P=K,s=F,d=G,x=N,S=U,h=J,b=H,u=B,y=Z,m=I("hasPermi");return T(),j(z,null,[o(P,{title:"\u3010\u7EDF\u8BA1\u3011\u4F1A\u5458\u3001\u5546\u54C1\u3001\u4EA4\u6613\u7EDF\u8BA1",url:"https://doc.iocoder.cn/mall/statistics/"}),w("div",ne,[o(d,{gutter:16,class:"summary"},{default:c(()=>[o(s,{sm:6,xs:12},{default:c(()=>{var a,t,r,l,i,n;return[o(e.TradeStatisticValue,{tooltip:"\u6628\u65E5\u8BA2\u5355\u6570\u91CF",title:"\u6628\u65E5\u8BA2\u5355\u6570\u91CF",value:((t=(a=e.summary)==null?void 0:a.value)==null?void 0:t.yesterdayOrderCount)||0,percent:e.calculateRelativeRate((l=(r=e.summary)==null?void 0:r.value)==null?void 0:l.yesterdayOrderCount,(n=(i=e.summary)==null?void 0:i.reference)==null?void 0:n.yesterdayOrderCount)},null,8,["value","percent"])]}),_:1}),o(s,{sm:6,xs:12},{default:c(()=>{var a,t,r,l,i,n;return[o(e.TradeStatisticValue,{tooltip:"\u672C\u6708\u8BA2\u5355\u6570\u91CF",title:"\u672C\u6708\u8BA2\u5355\u6570\u91CF",value:((t=(a=e.summary)==null?void 0:a.value)==null?void 0:t.monthOrderCount)||0,percent:e.calculateRelativeRate((l=(r=e.summary)==null?void 0:r.value)==null?void 0:l.monthOrderCount,(n=(i=e.summary)==null?void 0:i.reference)==null?void 0:n.monthOrderCount)},null,8,["value","percent"])]}),_:1}),o(s,{sm:6,xs:12},{default:c(()=>{var a,t,r,l,i,n;return[o(e.TradeStatisticValue,{tooltip:"\u6628\u65E5\u652F\u4ED8\u91D1\u989D",title:"\u6628\u65E5\u652F\u4ED8\u91D1\u989D",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.summary)==null?void 0:a.value)==null?void 0:t.yesterdayPayPrice)||0),percent:e.calculateRelativeRate((l=(r=e.summary)==null?void 0:r.value)==null?void 0:l.yesterdayPayPrice,(n=(i=e.summary)==null?void 0:i.reference)==null?void 0:n.yesterdayPayPrice)},null,8,["value","percent"])]}),_:1}),o(s,{sm:6,xs:12},{default:c(()=>{var a,t,r,l,i,n;return[o(e.TradeStatisticValue,{tooltip:"\u672C\u6708\u652F\u4ED8\u91D1\u989D",title:"\u672C\u6708\u652F\u4ED8\u91D1\u989D",prefix:"\uFFE5",":decimals":2,value:e.fenToYuan(((t=(a=e.summary)==null?void 0:a.value)==null?void 0:t.monthPayPrice)||0),percent:e.calculateRelativeRate((l=(r=e.summary)==null?void 0:r.value)==null?void 0:l.monthPayPrice,(n=(i=e.summary)==null?void 0:i.reference)==null?void 0:n.monthPayPrice)},null,8,["value","percent"])]}),_:1})]),_:1}),o(y,{shadow:"never"},{header:c(()=>[w("div",oe,[o(e.CardTitle,{title:"\u4EA4\u6613\u72B6\u51B5"}),o(h,{ref:"shortcutDateRangePicker",onChange:e.getTradeTrendData},{default:c(()=>[E((T(),X(S,{class:"ml-4",onClick:e.handleExport,loading:e.exportLoading},{default:c(()=>[o(x,{icon:"ep:download",class:"mr-1"}),v[0]||(v[0]=q("\u5BFC\u51FA "))]),_:1},8,["loading"])),[[m,["statistics:trade:export"]]])]),_:1},512)])]),default:c(()=>[o(d,{gutter:16},{default:c(()=>[o(s,{md:6,sm:12,xs:24},{default:c(()=>{var a,t,r,l,i,n;return[o(e.SummaryCard,{title:"\u8425\u4E1A\u989D",tooltip:"\u5546\u54C1\u652F\u4ED8\u91D1\u989D\u3001\u5145\u503C\u91D1\u989D",icon:"fa-solid:yen-sign","icon-color":"bg-blue-100","icon-bg-color":"text-blue-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:t.turnoverPrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.turnoverPrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.turnoverPrice)},null,8,["value","percent"])]}),_:1}),o(s,{md:6,sm:12,xs:24},{default:c(()=>{var a,t,r,l,i,n;return[o(e.SummaryCard,{title:"\u5546\u54C1\u652F\u4ED8\u91D1\u989D",tooltip:"\u7528\u6237\u8D2D\u4E70\u5546\u54C1\u7684\u5B9E\u9645\u652F\u4ED8\u91D1\u989D\uFF0C\u5305\u62EC\u5FAE\u4FE1\u652F\u4ED8\u3001\u4F59\u989D\u652F\u4ED8\u3001\u652F\u4ED8\u5B9D\u652F\u4ED8\u3001\u7EBF\u4E0B\u652F\u4ED8\u91D1\u989D\uFF08\u62FC\u56E2\u5546\u54C1\u5728\u6210\u56E2\u4E4B\u540E\u8BA1\u5165\uFF0C\u7EBF\u4E0B\u652F\u4ED8\u8BA2\u5355\u5728\u540E\u53F0\u786E\u8BA4\u652F\u4ED8\u540E\u8BA1\u5165\uFF09",icon:"fa-solid:shopping-cart","icon-color":"bg-purple-100","icon-bg-color":"text-purple-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:t.orderPayPrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.orderPayPrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.orderPayPrice)},null,8,["value","percent"])]}),_:1}),o(s,{md:6,sm:12,xs:24},{default:c(()=>{var a,t,r,l,i,n;return[o(e.SummaryCard,{title:"\u5145\u503C\u91D1\u989D",tooltip:"\u7528\u6237\u6210\u529F\u5145\u503C\u7684\u91D1\u989D",icon:"fa-solid:money-check-alt","icon-color":"bg-yellow-100","icon-bg-color":"text-yellow-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:t.rechargePrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.rechargePrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.rechargePrice)},null,8,["value","percent"])]}),_:1}),o(s,{md:6,sm:12,xs:24},{default:c(()=>{var a,t,r,l,i,n;return[o(e.SummaryCard,{title:"\u652F\u51FA\u91D1\u989D",tooltip:"\u4F59\u989D\u652F\u4ED8\u91D1\u989D\u3001\u652F\u4ED8\u4F63\u91D1\u91D1\u989D\u3001\u5546\u54C1\u9000\u6B3E\u91D1\u989D",icon:"ep:warning-filled","icon-color":"bg-green-100","icon-bg-color":"text-green-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:t.expensePrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.expensePrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.expensePrice)},null,8,["value","percent"])]}),_:1}),o(s,{md:6,sm:12,xs:24},{default:c(()=>{var a,t,r,l,i,n;return[o(e.SummaryCard,{title:"\u4F59\u989D\u652F\u4ED8\u91D1\u989D",tooltip:"\u7528\u6237\u4E0B\u5355\u65F6\u4F7F\u7528\u4F59\u989D\u5B9E\u9645\u652F\u4ED8\u7684\u91D1\u989D",icon:"fa-solid:wallet","icon-color":"bg-cyan-100","icon-bg-color":"text-cyan-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:t.walletPayPrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.walletPayPrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.walletPayPrice)},null,8,["value","percent"])]}),_:1}),o(s,{md:6,sm:12,xs:24},{default:c(()=>{var a,t,r,l,i,n;return[o(e.SummaryCard,{title:"\u652F\u4ED8\u4F63\u91D1\u91D1\u989D",tooltip:"\u540E\u53F0\u7ED9\u63A8\u5E7F\u5458\u652F\u4ED8\u7684\u63A8\u5E7F\u4F63\u91D1\uFF0C\u4EE5\u5B9E\u9645\u652F\u4ED8\u4E3A\u51C6",icon:"fa-solid:award","icon-color":"bg-yellow-100","icon-bg-color":"text-yellow-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:t.brokerageSettlementPrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.brokerageSettlementPrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.brokerageSettlementPrice)},null,8,["value","percent"])]}),_:1}),o(s,{md:6,sm:12,xs:24},{default:c(()=>{var a,t,r,l,i,n;return[o(e.SummaryCard,{title:"\u5546\u54C1\u9000\u6B3E\u91D1\u989D",tooltip:"\u7528\u6237\u6210\u529F\u9000\u6B3E\u7684\u5546\u54C1\u91D1\u989D",icon:"fa-solid:times-circle","icon-color":"bg-blue-100","icon-bg-color":"text-blue-500",prefix:"\uFFE5",decimals:2,value:e.fenToYuan(((t=(a=e.trendSummary)==null?void 0:a.value)==null?void 0:t.afterSaleRefundPrice)||0),percent:e.calculateRelativeRate((l=(r=e.trendSummary)==null?void 0:r.value)==null?void 0:l.afterSaleRefundPrice,(n=(i=e.trendSummary)==null?void 0:i.reference)==null?void 0:n.afterSaleRefundPrice)},null,8,["value","percent"])]}),_:1})]),_:1}),o(u,{loading:e.trendLoading,animated:""},{default:c(()=>[o(b,{height:500,options:e.lineChartOptions},null,8,["options"])]),_:1},8,["loading"])]),_:1})])],64)}],["__scopeId","data-v-fb5ef5e3"],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/statistics/trade/index.vue"]]);export{ce as default};
