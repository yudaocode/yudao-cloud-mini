import{d as x,D as E,r as p,f as O,C as F,U as R,G as h,_ as V,X as M,o as d,c as w,k as a,w as o,m as g,F as C,n as Q,q as v,I as k,t as z,Z as A,L,M as H,z as K,N as j,O as B,A as G,B as X,P as Z,Q as J,R as W}from"./index-BaY5TDP-.js";import{_ as $}from"./index-avjYFQiD.js";import{_ as ee}from"./DictTag-QtcI9ZjC.js";import{_ as ae}from"./ContentWrap-DKQn7kZm.js";import{_ as le}from"./index-BAz6Gqim.js";import{g as te,d as re}from"./coupon-C8Edebvp.js";import{d as oe}from"./formatTime-Dr6TiYYc.js";import{d as ne}from"./formatter-DYGBdQzW.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";import"./constants-CEEr2azc.js";const se=V(x({name:"PromotionCoupon",__name:"index",setup(D,{expose:t}){t();const c=E(),e=p(!0),P=p(0),b=p([]),u=O({pageNo:1,pageSize:10,createTime:[],status:void 0,nickname:void 0}),f=p(),m=p("all"),_=O([{label:"\u5168\u90E8",value:"all"}]),s=async()=>{e.value=!0;try{const r=await te(u);b.value=r.list,P.value=r.total}finally{e.value=!1}},i=()=>{u.pageNo=1,s()};F(()=>{s();for(const r of R(h.PROMOTION_COUPON_STATUS))_.push({label:r.label,value:r.value})});const y={message:c,loading:e,total:P,list:b,queryParams:u,queryFormRef:f,activeTab:m,statusTabs:_,getList:s,handleQuery:i,resetQuery:()=>{var r;(r=f.value)==null||r.resetFields(),i()},handleDelete:async r=>{try{await c.confirm("\u56DE\u6536\u5C06\u4F1A\u6536\u56DE\u4F1A\u5458\u9886\u53D6\u7684\u5F85\u4F7F\u7528\u7684\u4F18\u60E0\u5238\uFF0C\u5DF2\u4F7F\u7528\u7684\u5C06\u65E0\u6CD5\u56DE\u6536\uFF0C\u786E\u5B9A\u8981\u56DE\u6536\u6240\u9009\u4F18\u60E0\u5238\u5417\uFF1F"),await re(r),c.notifySuccess("\u56DE\u6536\u6210\u529F"),await s()}catch{}},onTabChange:r=>{u.status=r==="all"?void 0:r,s()},get DICT_TYPE(){return h},get dateFormatter(){return oe},get discountFormat(){return ne}};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}}),[["render",function(D,t,c,e,P,b){const u=le,f=A,m=L,_=H,s=K,i=j,y=B,r=ae,N=G,U=X,n=Z,T=ee,q=J,I=$,S=M("hasPermi"),Y=W;return d(),w(C,null,[a(u,{title:"\u3010\u8425\u9500\u3011\u4F18\u60E0\u52B5",url:"https://doc.iocoder.cn/mall/promotion-coupon/"}),a(r,null,{default:o(()=>[a(y,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"68px"},{default:o(()=>[a(m,{label:"\u4F1A\u5458\u6635\u79F0",prop:"nickname"},{default:o(()=>[a(f,{modelValue:e.queryParams.nickname,"onUpdate:modelValue":t[0]||(t[0]=l=>e.queryParams.nickname=l),class:"!w-240px",placeholder:"\u8BF7\u8F93\u5165\u4F1A\u5458\u6635\u79F0",clearable:"",onKeyup:e.handleQuery},null,8,["modelValue"])]),_:1}),a(m,{label:"\u9886\u53D6\u65F6\u95F4",prop:"createTime"},{default:o(()=>[a(_,{modelValue:e.queryParams.createTime,"onUpdate:modelValue":t[1]||(t[1]=l=>e.queryParams.createTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),a(m,null,{default:o(()=>[a(i,{onClick:e.handleQuery},{default:o(()=>[a(s,{icon:"ep:search",class:"mr-5px"}),t[5]||(t[5]=g("\u641C\u7D22 "))]),_:1}),a(i,{onClick:e.resetQuery},{default:o(()=>[a(s,{icon:"ep:refresh",class:"mr-5px"}),t[6]||(t[6]=g("\u91CD\u7F6E "))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(r,null,{default:o(()=>[a(U,{modelValue:e.activeTab,"onUpdate:modelValue":t[2]||(t[2]=l=>e.activeTab=l),type:"card",onTabChange:e.onTabChange},{default:o(()=>[(d(!0),w(C,null,Q(e.statusTabs,l=>(d(),v(N,{key:l.value,label:l.label,name:l.value},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),k((d(),v(q,{data:e.list},{default:o(()=>[a(n,{label:"\u4F1A\u5458\u6635\u79F0",align:"center","min-width":"100",prop:"nickname"}),a(n,{label:"\u4F18\u60E0\u5238\u540D\u79F0",align:"center","min-width":"140",prop:"name"}),a(n,{label:"\u7C7B\u578B",align:"center",prop:"discountType"},{default:o(l=>[a(T,{type:e.DICT_TYPE.PROMOTION_PRODUCT_SCOPE,value:l.row.productScope},null,8,["type","value"])]),_:1}),a(n,{label:"\u4F18\u60E0","min-width":"100",prop:"discount"},{default:o(l=>[a(T,{type:e.DICT_TYPE.PROMOTION_DISCOUNT_TYPE,value:l.row.discountType},null,8,["type","value"]),g(" "+z(e.discountFormat(l.row)),1)]),_:1}),a(n,{label:"\u9886\u53D6\u65B9\u5F0F",align:"center",prop:"takeType"},{default:o(l=>[a(T,{type:e.DICT_TYPE.PROMOTION_COUPON_TAKE_TYPE,value:l.row.takeType},null,8,["type","value"])]),_:1}),a(n,{label:"\u72B6\u6001",align:"center",prop:"status"},{default:o(l=>[a(T,{type:e.DICT_TYPE.PROMOTION_COUPON_STATUS,value:l.row.status},null,8,["type","value"])]),_:1}),a(n,{label:"\u9886\u53D6\u65F6\u95F4",align:"center",prop:"createTime",formatter:e.dateFormatter,width:"180"},null,8,["formatter"]),a(n,{label:"\u4F7F\u7528\u65F6\u95F4",align:"center",prop:"useTime",formatter:e.dateFormatter,width:"180"},null,8,["formatter"]),a(n,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(l=>[k((d(),v(i,{type:"danger",link:"",onClick:ue=>e.handleDelete(l.row.id)},{default:o(()=>t[7]||(t[7]=[g(" \u56DE\u6536 ")])),_:2},1032,["onClick"])),[[S,["promotion:coupon:delete"]]])]),_:1})]),_:1},8,["data"])),[[Y,e.loading]]),a(I,{limit:e.queryParams.pageSize,"onUpdate:limit":t[3]||(t[3]=l=>e.queryParams.pageSize=l),page:e.queryParams.pageNo,"onUpdate:page":t[4]||(t[4]=l=>e.queryParams.pageNo=l),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1})],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/mall/promotion/coupon/index.vue"]]);export{se as default};
