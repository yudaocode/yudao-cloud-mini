import{d as S,D as Q,g as T,u as U,r as c,f as N,au as R,C as z,G as O,_ as E,am as I,X as L,o as p,c as Y,k as t,w as r,Y as B,m as d,I as f,q as y,F as j,Z as K,L as M,z as A,N as G,O as X,P as Z,Q as H,R as J}from"./index-BaY5TDP-.js";import{_ as W}from"./Dialog-CZSXtzfQ.js";import{_ as $}from"./index-avjYFQiD.js";import{_ as ee}from"./DictTag-QtcI9ZjC.js";import{_ as ae}from"./ContentWrap-DKQn7kZm.js";import{_ as te}from"./index-BAz6Gqim.js";import{d as re}from"./formatTime-Dr6TiYYc.js";import{b as oe,d as le,g as ie}from"./index-BeYJ8u62.js";import{b as ne}from"./formCreate-Dy2BGZHq.js";import"./index-DrSdAlug.js";import"./color-BN7ZL7BD.js";const se=E(S({name:"BpmForm",__name:"index",setup(D,{expose:a}){a();const h=Q(),{t:e}=T(),{currentRoute:P,push:F}=U(),_=c(!0),C=c(0),g=c([]),m=N({pageNo:1,pageSize:10,name:null}),l=c(),u=async()=>{_.value=!0;try{const i=await oe(m);g.value=i.list,C.value=i.total}finally{_.value=!1}},b=()=>{m.pageNo=1,u()},n=c(!1),w=c({rule:[],option:{}});R(()=>P.value,()=>{u()},{immediate:!0}),z(()=>{u()});const q={message:h,t:e,currentRoute:P,push:F,loading:_,total:C,list:g,queryParams:m,queryFormRef:l,getList:u,handleQuery:b,resetQuery:()=>{l.value.resetFields(),b()},openForm:(i,s)=>{const v={name:"BpmFormEditor",query:{type:i}};console.log(typeof s),typeof s!="number"&&typeof s!="string"||(v.query.id=s),F(v)},handleDelete:async i=>{try{await h.delConfirm(),await le(i),h.success(e("common.delSuccess")),await u()}catch{}},detailVisible:n,detailData:w,openDetail:async i=>{const s=await ie(i);ne(w,s.conf,s.fields),n.value=!0},get DICT_TYPE(){return O},get dateFormatter(){return re}};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),[["render",function(D,a,h,e,P,F){const _=te,C=K,g=M,m=A,l=G,u=X,b=ae,n=Z,w=ee,q=H,i=$,s=I("form-create"),v=W,k=L("hasPermi"),V=J;return p(),Y(j,null,[t(_,{title:"\u5BA1\u6279\u63A5\u5165\uFF08\u6D41\u7A0B\u8868\u5355\uFF09",url:"https://doc.iocoder.cn/bpm/use-bpm-form/"}),t(b,null,{default:r(()=>[t(u,{ref:"queryFormRef",inline:!0,model:e.queryParams,class:"-mb-15px","label-width":"68px"},{default:r(()=>[t(g,{label:"\u8868\u5355\u540D",prop:"name"},{default:r(()=>[t(C,{modelValue:e.queryParams.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.queryParams.name=o),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8868\u5355\u540D",onKeyup:B(e.handleQuery,["enter"])},null,8,["modelValue"])]),_:1}),t(g,null,{default:r(()=>[t(l,{onClick:e.handleQuery},{default:r(()=>[t(m,{class:"mr-5px",icon:"ep:search"}),a[4]||(a[4]=d(" \u641C\u7D22 "))]),_:1}),t(l,{onClick:e.resetQuery},{default:r(()=>[t(m,{class:"mr-5px",icon:"ep:refresh"}),a[5]||(a[5]=d(" \u91CD\u7F6E "))]),_:1}),f((p(),y(l,{plain:"",type:"primary",onClick:e.openForm},{default:r(()=>[t(m,{class:"mr-5px",icon:"ep:plus"}),a[6]||(a[6]=d(" \u65B0\u589E "))]),_:1})),[[k,["bpm:form:create"]]])]),_:1})]),_:1},8,["model"])]),_:1}),t(b,null,{default:r(()=>[f((p(),y(q,{data:e.list},{default:r(()=>[t(n,{align:"center",label:"\u7F16\u53F7",prop:"id"}),t(n,{align:"center",label:"\u8868\u5355\u540D",prop:"name"}),t(n,{align:"center",label:"\u72B6\u6001",prop:"status"},{default:r(o=>[t(w,{type:e.DICT_TYPE.COMMON_STATUS,value:o.row.status},null,8,["type","value"])]),_:1}),t(n,{align:"center",label:"\u5907\u6CE8",prop:"remark"}),t(n,{formatter:e.dateFormatter,align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},null,8,["formatter"]),t(n,{align:"center",label:"\u64CD\u4F5C"},{default:r(o=>[f((p(),y(l,{link:"",type:"primary",onClick:x=>e.openForm("copy",o.row.id)},{default:r(()=>a[7]||(a[7]=[d(" \u590D\u5236 ")])),_:2},1032,["onClick"])),[[k,["bpm:form:update"]]]),f((p(),y(l,{link:"",type:"primary",onClick:x=>e.openForm("update",o.row.id)},{default:r(()=>a[8]||(a[8]=[d(" \u7F16\u8F91 ")])),_:2},1032,["onClick"])),[[k,["bpm:form:update"]]]),f((p(),y(l,{link:"",onClick:x=>e.openDetail(o.row.id)},{default:r(()=>a[9]||(a[9]=[d(" \u8BE6\u60C5 ")])),_:2},1032,["onClick"])),[[k,["bpm:form:query"]]]),f((p(),y(l,{link:"",type:"danger",onClick:x=>e.handleDelete(o.row.id)},{default:r(()=>a[10]||(a[10]=[d(" \u5220\u9664 ")])),_:2},1032,["onClick"])),[[k,["bpm:form:delete"]]])]),_:1})]),_:1},8,["data"])),[[V,e.loading]]),t(i,{limit:e.queryParams.pageSize,"onUpdate:limit":a[1]||(a[1]=o=>e.queryParams.pageSize=o),page:e.queryParams.pageNo,"onUpdate:page":a[2]||(a[2]=o=>e.queryParams.pageNo=o),total:e.total,onPagination:e.getList},null,8,["limit","page","total"])]),_:1}),t(v,{modelValue:e.detailVisible,"onUpdate:modelValue":a[3]||(a[3]=o=>e.detailVisible=o),title:"\u8868\u5355\u8BE6\u60C5",width:"800"},{default:r(()=>[t(s,{option:e.detailData.option,rule:e.detailData.rule},null,8,["option","rule"])]),_:1},8,["modelValue"])],64)}],["__file","/Users/steven/00/500_code/520_github/yudao-ui-admin-vue3/src/views/bpm/form/index.vue"]]);export{se as default};
